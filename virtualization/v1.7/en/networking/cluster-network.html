<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cluster Network | SUSE® Virtualization  v1.7 (Dev)</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/virtualization/v1.6/en/networking/cluster-network.html">
    <link rel="prev" href="../storage/storage-validator.html">
    <link rel="next" href="vm-network.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2026-01-20"/>
<link rel="stylesheet" href="../../../../_/css/search.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<link rel="stylesheet" href="../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>
<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/assets");
</script>
<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.7/en/networking/cluster-network.html" hreflang="x-default" rel="alternate"/>
<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.7/en/networking/cluster-network.html" hrefLang="en-US" rel="alternate" />

<!-- JSON-LD for doc metadata -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "name": "Cluster Network | SUSE Virtualization v1.7",
  "headline": "Cluster Network",
  "description": "Cluster Network",
  "inLanguage": "en",
  "dateModified": "2026-01-20T00:00:00Z",
  "author": {
    "@type": "Organization",
    "name": "SUSE Product & Solution Documentation Team",
    "url": "https://documentation.suse.com"
  },
  "mentions": [
    {
      "@type": "SoftwareApplication",
      "name": "SUSE Virtualization",
      "softwareVersion": "v1.7",
      "applicationCategory": "Cloud Infrastructure",
      "operatingSystem": "Linux"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "SUSE",
    "url": "https://documentation.suse.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
    }
  }
}
</script>
<!-- end JSON-LD for doc metadata -->
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><shared-header
language="en"
languages='{
    "en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
    "de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
    "fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
    "es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
    "zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
    "pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'
enable-search='false'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="virtualization" data-version="v1.7">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">SUSE® Virtualization</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-ha-cluster.html">Deploy a High-Availability Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-singlenode-cluster.html">Deploy a Single-Node Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/document-conventions.html">Document Conventions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation and Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/requirements.html">Hardware and Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Media</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/net-install.html">Net Install ISO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/install-binaries-mode.html">Install Binaries Only</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Methods</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/iso-install.html">ISO Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/usb-install.html">USB Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/pxe-boot-install.html">PXE Boot Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/configuration-file.html">Configuration File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/update-configuration.html">Update the Configuration After Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/settings.html">Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/cloudinitcrd.html">CloudInit CRD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/post-installation.html">Post-Installation Tasks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/management-address.html">Management Address</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/external-disk.html">External Disk Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/airgap.html">Air-Gapped Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/single-node-clusters.html">Single-Node Clusters</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Upgrades</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/upgrades.html">Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-1-2-to-v1-2-0.html">Upgrade from v1.1.2 to v1.2.0 (not recommended)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-0-to-v1-2-1.html">Upgrade from v1.1.2/v1.1.3/v1.2.0 to v1.2.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-1-to-v1-2-2.html">Upgrade from v1.2.1 to v1.2.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-2-to-v1-3-1.html">Upgrade from v1.2.2/v1.3.0 to v1.3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-1-to-v1-3-2.html">Upgrade from v1.3.1 to v1.3.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-2-to-v1-4-0.html">Upgrade from v1.3.2 to v1.4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-0-to-v1-4-1.html">Upgrade from v1.4.0 to v1.4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-1-to-v1-4-2.html">Upgrade from v1.4.1 to v1.4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-1-to-v1-4-3.html">Upgrade from v1.4.1 or v1.4.2 to v1.4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-0.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-1.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-2.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-5-0-to-v1-5-1.html">Upgrade from v1.5.0 to v1.5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-5-0-to-v1-5-2.html">Upgrade from v1.5.0 or v1.5.1 to v1.5.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-5-x-to-v1-6-x.html">Upgrade from v1.5.x to v1.6.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-6-x-to-v1-6-y.html">Upgrade from v1.6.x to v1.6.y</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-6-x-to-v1-7-x.html">Upgrade from v1.6.x to v1.7.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-7-x-to-v1-7-y.html">Upgrade from v1.7.x to v1.7.y</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Hosts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/hosts.html">Host Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/witness-node.html">Witness Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/vgpu-support.html">vGPU Support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/virtual-machines.html">Virtual Machines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machine Images</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/upload-image.html">Upload Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/custom-suse-images.html">Custom SUSE Virtual Machine Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/image-security.html">Image Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-vm.html">Create a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-windows-vm.html">Create a Windows Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/edit-vm.html">Edit a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/access-vm.html">Access to the Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/clone-vm.html">Clone a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/backup-restore.html">Virtual Machine Backup, Snapshot &amp; Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/live-migration.html">Live Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/hotplug-volume.html">Hot-Plug Volumes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/resource-overcommit.html">Resource Overcommit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/cpu-pinning.html">CPU Pinning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/cpu-memory-hotplug.html">CPU and Memory Hotplug</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/nic-hotplug.html">NIC Hotplug</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Volumes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/create-volume.html">Create a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/edit-volume.html">Edit a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/clone-volume.html">Clone a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/export-volume.html">Export a Volume to Image</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-snapshots.html">Volume Snapshots</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-security.html">Volume Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/storageclass.html">StorageClass</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/csidriver.html">Third-Party Storage Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/longhorn-v2-data-engine.html">Longhorn V2 Data Engine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/storage-validator.html">Storage Validator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Networking</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="cluster-network.html">Cluster Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vm-network.html">VM Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deep-dive.html">Networking Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="load-balancer.html">Load Balancer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip-pool.html">IP Pool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="storage-network.html">Storage Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vm-migration-network.html">VM Migration Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubeovn-vpc.html">Virtual Private Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vm-isolation.html">Virtual Machine Isolation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices.html">Networking Best Practices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/monitoring.html">Monitoring</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Add-ons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/add-ons.html">Add-ons</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/harvester-seeder.html">Harvester Seeder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/kubeovn-operator.html">Kube-OVN Operator (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/lvm-local-storage.html">CSI Driver LVM (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/nvidia-driver-toolkit.html">NVIDIA Driver Toolkit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/pcidevices-controller.html">PCI Devices Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/rancher-vcluster.html">Rancher vCluster (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/virtual-machine-auto-balance.html">Virtual Machine Auto Balance (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-dhcp-controller.html">VM DHCP Controller (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-import-controller.html">VM Import Controller</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher Integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-integration.html">SUSE Rancher Prime Integration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/virtualization-management.html">Virtualization Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node Driver</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/node-driver.html">Harvester Node Driver</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/rke2-cluster.html">Creating an RKE2 Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/k3s-cluster.html">Creating a K3s Kubernetes Cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/cloud-provider.html">Harvester Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/csi-driver.html">Harvester CSI Driver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/resource-quota.html">Resource Quotas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-terraform-provider.html">Rancher Terraform</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/import-vm.html">Import a Cluster Built on a SUSE® Virtualization VM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/harvester-ui-extension.html">Harvester UI Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/terraform/terraform-provider.html">Terraform Provider</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/installation.html">Installation Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/operating-system.html">Operating System Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/cluster.html">Cluster Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/virtual-machines.html">Virtual Machine Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/monitoring.html">Monitoring Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/logging.html">Logging Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/rancher.html">Rancher Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/faq.html">FAQ</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Developer Content</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developer/addon-development.html">Add-on Development Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../api.html">API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE® Virtualization</span>
    <span class="version">v1.7 (Dev)</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../admission-controller/1.31/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../admission-controller/1.32/en/introduction.html">1.32-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../admission-controller/1.31/en/introduction.html">1.31-latest</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.30/en/introduction.html">1.30</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../cluster-api/v0.25/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../cluster-api/v0.25/en/index.html">0.25</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../continuous-delivery/v0.14/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../continuous-delivery/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../os-manager/1.8/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../os-manager/1.9/en/index.html">1.9-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../os-manager/1.8/en/index.html">1.8</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher for AWS</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">v2.13</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../storage/1.10/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.9/en/longhorn-documentation.html">1.9</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../suse-virtual-clusters/v1.0.1/en/introduction.html">SUSE® Virtual Clusters</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../suse-virtual-clusters/1.0.2/en/introduction.html">1.0.2-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../suse-virtual-clusters/v1.0.1/en/introduction.html">v1.0.1-latest</a>
            </li>
            <li class="version">
              <a href="../../../../suse-virtual-clusters/v1.0.0/en/introduction.html">v1.0.0</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../v1.6/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version is-current">
              <a href="../introduction/overview.html">v1.7 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../v1.6/en/introduction/overview.html">v1.6 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../v1.5/en/introduction/overview.html">v1.5</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a class="home-link-dsc" href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home"></a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/virtualization" title="SUSE Virtualization" aria-label="SUSE Documentation - SUSE Virtualization">
        SUSE Virtualization
      </a>
    </li>
      <li>
          Networking
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v1.7 (Dev)</button>
  <div class="version-menu">
    <a class="version is-current" href="cluster-network.html">v1.7 (Dev)</a>
    <a class="version" href="../../../v1.6/en/networking/cluster-network.html">v1.6 (Latest)</a>
    <a class="version" href="../../../v1.5/en/networking/cluster-network.html">v1.5</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/harvester-product-docs/edit/main/versions/v1.7/modules/en/pages/networking/cluster-network.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:virtualization" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is unreleased documentation for SUSE® Virtualization v1.7 (Dev).</p>
</div>
</td>
</tr>
</table>
</div>
<h1 class="page">Cluster Network</h1>
<div class="sect1">
<h2 id="_concepts"><a class="anchor" href="#_concepts"></a>Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cluster_network"><a class="anchor" href="#_cluster_network"></a>Cluster Network</h3>
<div class="paragraph">
<p>The following diagram describes a typical network architecture that separates data-center (DC) traffic from out-of-band (OOB) traffic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/traffic-isolation.png" alt="Network traffic isolation">
</div>
</div>
<div class="paragraph">
<p>We abstract the sum of devices, links, and configurations on a traffic-isolated forwarding path on SUSE Virtualization as a cluster network.</p>
</div>
<div class="paragraph">
<p>In the above case, there will be two cluster networks corresponding to two traffic-isolated forwarding paths.</p>
</div>
</div>
<div class="sect2">
<h3 id="_network_configuration"><a class="anchor" href="#_network_configuration"></a>Network Configuration</h3>
<div class="paragraph">
<p>Specifications including network devices of the SUSE Virtualization hosts can be different. To be compatible with such a heterogeneous cluster, we designed the network configuration.</p>
</div>
<div class="paragraph">
<p>Network configuration only works under a certain cluster network. Each network configuration corresponds to a set of hosts with uniform network specifications. Therefore, multiple network configurations are required for a cluster network on non-uniform hosts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vm_network"><a class="anchor" href="#_vm_network"></a>VM Network</h3>
<div class="paragraph">
<p>A VM network is an interface in a virtual machine that connects to the host network. As with a network configuration, every network except the built-in <a href="vm-network.html#_management_network" class="xref page">management network</a> must be under a cluster network.</p>
</div>
<div class="paragraph">
<p>SUSE Virtualization supports adding multiple networks to one VM. If a network&#8217;s cluster network is not enabled on some hosts, the VM that owns this network will not be scheduled to those hosts.</p>
</div>
<div class="paragraph">
<p>Please refer to <a href="vm-network.html" class="xref page">network part</a> for more details about networks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_relationship_between_cluster_network_network_config_vm_network"><a class="anchor" href="#_relationship_between_cluster_network_network_config_vm_network"></a>Relationship Between Cluster Network, Network Config, VM Network</h3>
<div class="paragraph">
<p>The following diagram shows the relationship between a cluster network, a network config, and a VM network.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/relation.png" alt="SUSE Virtualization networking concepts">
</div>
</div>
<div class="paragraph">
<p>All <code>Network Configs</code> and <code>VM Networks</code> are grouped under a cluster network.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A label can be assigned to each host to categorize hosts based on their network specifications.</p>
</li>
<li>
<p>A network config can be added for each group of hosts using a node selector.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, in the diagram above, the hosts in <code>ClusterNetwork-A</code> are divided into three groups as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first group includes host0, which corresponds to <code>network-config-A</code>.</p>
</li>
<li>
<p>The second group includes host1 and host2, which correspond to <code>network-config-B</code>.</p>
</li>
<li>
<p>The third group includes the remaining hosts (host3, host4, and host5), which do not have any related network config and therefore do not belong to <code>ClusterNetwork-A</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The cluster network is only effective on hosts that are covered by the network configuration. A VM using a <code>VM network</code> under a specific cluster network can only be scheduled on a host where the cluster network is active.</p>
</div>
<div class="paragraph">
<p>In the diagram above, we can see that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ClusterNetwork-A</code> is active on host0, host1, and host2. <code>VM0</code> uses <code>VM-network-A</code>, so it can be scheduled on any of these hosts.</p>
</li>
<li>
<p><code>VM1</code> uses both <code>VM-network-B</code> and <code>VM-network-C</code>, so it can only be scheduled on host2 where both <code>ClusterNetwork-A</code> and <code>ClusterNetwork-B</code> are active.</p>
</li>
<li>
<p><code>VM0</code>, <code>VM1</code>, and <code>VM2</code> cannot run on host3 where the two cluster networks are inactive.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Overall, this diagram provides a clear visualization of the relationship between cluster networks, network configurations, and VM networks, as well as how they impact VM scheduling on hosts.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cluster_network_details"><a class="anchor" href="#_cluster_network_details"></a>Cluster network details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cluster networks are traffic-isolated forwarding paths for transmission of network traffic within a SUSE Virtualization cluster.</p>
</div>
<div class="paragraph">
<p>A cluster network called <code>mgmt</code> is automatically created when a SUSE Virtualization cluster is deployed. You can also create custom cluster networks that can be dedicated to virtual machine traffic.</p>
</div>
<div class="sect2">
<h3 id="_built_in_cluster_network"><a class="anchor" href="#_built_in_cluster_network"></a>Built-in cluster network</h3>
<div class="paragraph">
<p>When a SUSE Virtualization cluster is deployed, a cluster network named <code>mgmt</code> is automatically created for intra-cluster communications. <code>mgmt</code> consists of the same bridge, bond and NICs as the external infrastructure network to which each SUSE Virtualization host attaches with management NICs. Because of this design, <code>mgmt</code> also allows virtual machines to be accessed from the external infrastructure network for cluster management purposes.</p>
</div>
<div class="paragraph">
<p><code>mgmt</code> does not require a network configuration and is always enabled on all hosts. You cannot disable and delete <code>mgmt</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In SUSE Virtualization v1.5.x and earlier versions, the entire VLAN ID range (2 to 4094) was assigned to the <code>mgmt</code> interfaces. However, this exceeded the upper limit of supported VLANs on certain network cards, so hardware VLAN offloading stopped working correctly.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://github.com/harvester/harvester/issues/7650">issue #7650</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting with v1.6.0, only the <a href="../installation-setup/config/configuration-file.html#_install_management_interface" class="xref page">primary VLAN ID</a> provided during installation is automatically added to the <code>mgmt-br</code> bridge and the <code>mgmt-bo</code> interface. You can <a href="#_add_secondary_vlan_interfaces">add secondary VLAN interfaces</a> after installation is completed.</p>
</div>
<div class="paragraph">
<p>During installation of the first cluster node, you can configure the MTU value for <code>mgmt</code> using the <a href="../installation-setup/config/configuration-file.html#_install_management_interface" class="xref page"><code>install.management_interface</code></a> setting. The default value of the <code>mtu</code> field is <code>1500</code>, which is what <code>mgmt</code> typically uses. However, if you specify an MTU value other than <code>0</code> or <code>1500</code>, you must <a href="#_annotate_a_non_default_mtu_value_to_mgmt_after_installation">add a corresponding annotation</a> after the cluster is deployed.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Certain <a href="https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt">ARP settings</a> can break cluster communications. With <code>arp_ignore=2</code>, for example, replies are sent only if the sender IP address is in the same subnet as the target IP address for which the MAC address is requested. This is not the case in a SUSE Virtualization cluster, so using <code>arp_ignore=2</code> on all interfaces results in failed connectivity checks and prevents SUSE Storage pods (specifically, <code>backing-image</code> and <code>instance-manager</code>) from transitioning to the <code>Ready</code> state. Volumes cannot be attached to virtual machines if these SUSE Storage pods are not ready.</p>
</li>
<li>
<p>All nodes in a SUSE Virtualization cluster must use the same MTU value. Because SUSE Virtualization does not automatically detect discrepancies when nodes join, you must manually ensure that the values are identical to prevent unexpected system behavior.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_add_secondary_vlan_interfaces"><a class="anchor" href="#_add_secondary_vlan_interfaces"></a>Add secondary VLAN interfaces</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the current VLAN settings for the <code>bond-mgmt</code> and <code>bridge-mgmt</code> connection profiles.</p>
<div class="paragraph">
<p>Example (where the primary VLAN ID is 2017):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ nmcli -f bridge-port.vlans con show bond-mgmt
bridge-port.vlans:                      1 pvid untagged, 2017
$ nmcli -f bridge.vlans con show bridge-mgmt
bridge.vlans:                           2017</code></pre>
</div>
</div>
</li>
<li>
<p>Update the <code>bond-mgmt</code> and <code>bridge-mgmt</code> connection profiles to add the secondary VLAN ID.</p>
<div class="paragraph">
<p>Example (where the primary VLAN ID is 2017 and the secondary VLAN ID is 2018):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ nmcli con modify bond-mgmt bridge-port.vlans '1 pvid untagged, 2017, 2018'
$ nmcli con modify bridge-mgmt bridge.vlans 2017,2018</code></pre>
</div>
</div>
</li>
<li>
<p>Reboot each node to apply the change.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_annotate_a_non_default_mtu_value_to_mgmt_after_installation"><a class="anchor" href="#_annotate_a_non_default_mtu_value_to_mgmt_after_installation"></a>Annotate a Non-Default MTU Value to <code>mgmt</code> After Installation</h3>
<div class="paragraph">
<p>If you specified a value other than <code>0</code> or <code>1500</code> in the <code>mtu</code> field of the <a href="../installation-setup/config/configuration-file.html#_install_management_interface" class="xref page"><code>install.management_interface</code></a> setting, you must annotate this value to the <code>mgmt</code> <code>clusternetwork</code> object. Without the annotation, all created <a href="vm-network.html#_create_a_vm_network" class="xref page">VM networks</a> use the default MTU value <code>1500</code> instead of automatically inheriting the value that you specified.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ kubectl annotate clusternetwork mgmt network.harvesterhci.io/uplink-mtu="9000"</pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must ensure the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>uplink-mtu</code> value in the annotation is identical to the <code>mtu</code> value in the <a href="../installation-setup/config/configuration-file.html#_install_management_interface" class="xref page"><code>install.management_interface</code></a> SETTING.</p>
</li>
<li>
<p>All cluster nodes use the same MTU value.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_change_the_mtu_value_of_mgmt_after_installation"><a class="anchor" href="#_change_the_mtu_value_of_mgmt_after_installation"></a>Change the MTU Value of <code>mgmt</code> After Installation</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop all virtual machines that are attached to the <code>mgmt</code> network.</p>
</li>
<li>
<p>(Optional) Disable the <a href="storage-network.html#_storage_network_setting" class="xref page">storage network</a> if it uses <code>mgmt</code> and is enabled.</p>
</li>
<li>
<p>Change the MTU value for the <code>bond-mgmt</code>, <code>bridge-mgmt</code>, and the <code>vlan-mgmt</code> (if you are using a VLAN) connection profiles.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ nmcli con modify bond-mgmt 802-3-ethernet.mtu 9000
$ nmcli con modify bridge-mgmt 802-3-ethernet.mtu 9000
$ nmcli con modify vlan-mgmt 802-3-ethernet.mtu 9000
$ nmcli device reapply mgmt-bo
$ nmcli device reapply mgmt-br</code></pre>
</div>
</div>
</li>
<li>
<p>Check the MTU values using the <code>ip link</code> command.</p>
</li>
<li>
<p>Annotate the <code>mgmt</code> <code>clusternetwork</code> object with new MTU value.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl annotate clusternetwork mgmt network.harvesterhci.io/uplink-mtu="9000"</code></pre>
</div>
</div>
<div class="paragraph">
<p>All VM networks that are attached to <code>mgmt</code> automatically inherit the new MTU value.</p>
</div>
</li>
<li>
<p>(Optional) Enable the <a href="storage-network.html#_storage_network_setting" class="xref page">storage network</a> that you disabled before changing the MTU value.</p>
</li>
<li>
<p>Start all virtual machines that are attached to <code>mgmt</code>.</p>
</li>
<li>
<p>Verify that the virtual machine workloads are running normally.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see <a href="#_change_the_mtu_of_a_network_configuration_with_an_attached_storage_network">Change the MTU of a network configuration with an attached storage network</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_cluster_network"><a class="anchor" href="#_custom_cluster_network"></a>Custom cluster network</h3>
<div class="paragraph">
<p>If more than one network interface is attached to each host, you can create custom cluster networks for better traffic isolation. Each cluster network must have at least one network configuration with a defined scope and bonding mode.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <a href="../hosts/witness-node.html" class="xref page">witness node</a> is generally not involved in the custom cluster network.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_create_a_new_cluster_network"><a class="anchor" href="#_create_a_new_cluster_network"></a>Create a new cluster network</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To simplify cluster maintenance, create one network configuration for each node or group of nodes. Without dedicated network configurations, certain maintenance tasks (for example, replacing old NICs with NICs in different slots) will require you to stop and/or migrate the affected virtual machines before updating the network configuration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the <a href="../installation-setup/requirements.html#_hardware_requirements" class="xref page">hardware requirements</a> are met.</p>
</li>
<li>
<p>Go to <strong>Networks &#8594; ClusterNetworks/Configs</strong>, and then click <strong>Create</strong>.</p>
</li>
<li>
<p>Specify a name for the cluster network.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/create-clusternetwork.png" alt="Create a cluster network">
</div>
</div>
</li>
<li>
<p>On the <strong>ClusterNetworks/Configs</strong> screen, click the <strong>Create Network Config</strong> button of the cluster network you created.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/create-network-config-button.png" alt="Create a network configuration">
</div>
</div>
</li>
<li>
<p>On the <strong>Network Config:Create</strong> screen, specify a name for the configuration.</p>
</li>
<li>
<p>On the <strong>Node Selector</strong> tab, select the method for defining the scope of this specific network configuration.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/select-nodes.png" alt="Network configuration node selector">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The method <strong>Select all nodes</strong> works only when all nodes use the exact same dedicated NICs for this specific custom cluster network. In other situations (for example, when the cluster has a <a href="../hosts/witness-node.html" class="xref page">witness node</a>), you must select either of the remaining methods.</p>
</li>
<li>
<p>If you want the configuration to apply to nodes that are not covered by the selected method, you must create another network configuration.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>On the <strong>Uplink</strong> tab, configure the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>NICs</strong>: The list contains NICs that are common to all selected nodes. NICs that cannot be selected are unavailable on one or more nodes and must be configured. Once troubleshooting is completed, refresh the screen and verify that the NICs can be selected.</p>
</li>
<li>
<p><strong>Bond Options</strong>: The default bonding mode is <code>active-backup</code>.</p>
</li>
<li>
<p><strong>Attributes</strong>: You must use the same MTU across all network configurations of a custom cluster network. If you do not specify an MTU, the default value <code>1500</code> is used. The SUSE Virtualization webhook rejects a new network configuration if its MTU does not match the MTU of existing network configurations.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/config-uplink.png" alt="Network configuration uplink settings">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Physical switches connected to bonded interfaces must be configured as trunk ports. These ports must accept tagged traffic and send traffic tagged with the VLAN ID used by the VM network.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_change_a_network_configuration"><a class="anchor" href="#_change_a_network_configuration"></a>Change a network configuration</h3>
<div class="paragraph">
<p>Changes to existing network configurations may affect SUSE Virtualization virtual machines and workloads, and external devices such as switches and routers. For more information, see <a href="deep-dive.html#_network_topology" class="xref page">Network Topology</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must stop all affected virtual machines before changing a network configuration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sections outline the steps you must perform to change the MTU of a network configuration. The sample cluster network used in these sections has <code>cn-data</code> that was built with an MTU value of <code>1500</code> and is intended to be changed to <code>9000</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/set-a-new-mtu-value.png" alt="New MTU value">
</div>
</div>
<div class="sect3">
<h4 id="_general_changes"><a class="anchor" href="#_general_changes"></a>General changes</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Locate the target cluster network and network configuration.</p>
<div class="paragraph">
<p>In the following example, the cluster network is <code>cn-data</code> and the network configuration is <code>nc-1</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/network-configuration-1.png" alt="Sample network configuration">
</div>
</div>
</li>
<li>
<p>Select <strong>⋮ &#8594; Edit Config</strong>, and then change the relevant fields.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Node Selector</strong> tab:</p>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/network-configuration-2.png" alt="Network configuration node selector">
</div>
</div>
</li>
<li>
<p><strong>Uplink</strong> tab:</p>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/network-configuration-3.png" alt="Network configuration uplink settings">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must use the same values for the <strong>Bond Options</strong> and <strong>Attributes</strong> fields in all network configurations of a custom cluster network.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_change_the_mtu_of_a_network_configuration_with_no_attached_storage_network"><a class="anchor" href="#_change_the_mtu_of_a_network_configuration_with_no_attached_storage_network"></a>Change the MTU of a network configuration with no attached storage network</h4>
<div class="paragraph">
<p>In this scenario, the <a href="storage-network.html#_storage_network_setting" class="xref page">storage network setting</a> is neither enabled nor attached to the target cluster network.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The MTU affects SUSE Virtualization nodes and networking devices such as switches and routers. Careful planning and testing are required to ensure that changing the MTU does not adversely affect the system. For more information, see <a href="deep-dive.html#_network_topology" class="xref page">Network Topology</a>.</p>
</li>
<li>
<p>You must use the same MTU across all network configurations of a custom cluster network.</p>
</li>
<li>
<p>Cluster operations are interrupted during the configuration change.</p>
</li>
<li>
<p>The information in this section does not apply to the built-in <code>mgmt</code> cluster network.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you must change the MTU, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop all virtual machines that are attached to the target cluster network.</p>
<div class="paragraph">
<p>You can check this using the <a href="vm-network.html#_create_a_vm_network" class="xref page">virtual machine network</a> and any <a href="../virtual-machines/create-vm.html#_secondary_network" class="xref page">secondary networks</a> you may have used. Do not change the MTU while any of the connected virtual machines are still running.</p>
</div>
</li>
<li>
<p>Check the network configurations of the target cluster network.</p>
<div class="paragraph">
<p>If multiple network configurations exist, record the node selector for each and remove configurations until only one remains.</p>
</div>
</li>
<li>
<p><a href="#_general_changes">Change the MTU</a> of the remaining network configuration.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must also change the MTU on the peer external switch or router.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Verify that the MTU was changed using the Linux <code>ip link</code> command.</p>
<div class="paragraph">
<p>If the network configuration selects multiple SUSE Virtualization nodes, run the command on each node.</p>
</div>
<div class="paragraph">
<p>The output must show the new MTU of the related <code>*-br</code> device and the state <code>UP</code>. In the following example, the device is <code>cn-data-br</code> and the new MTU is <code>9000</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Harvester node $ ip link show dev cn-data-br
                                              |new MTU|              |state UP|
3: cn-data-br: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9000 qdisc noqueue state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:6e:5c:2a brd ff:ff:ff:ff:ff:ff</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the state is <code>UNKNOWN</code>, it is likely that the MTU values on SUSE Virtualization and the external switch or router do not match.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Test the new MTU on SUSE Virtualization nodes using commands such as <code>ping</code>.</p>
<div class="paragraph">
<p>You must send the messages to a SUSE Virtualization node with the new MTU or a node with an external IP.</p>
</div>
<div class="paragraph">
<p>In the following example, the network is <code>cn-data</code>, the CIDR is <code>192.168.100.0/24</code>, and the gateway is <code>192.168.100.1</code>.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the IP <code>192.168.100.100</code> on the bridge device.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip addr add dev cn-data-br 192.168.100.100/24</code></pre>
</div>
</div>
</li>
<li>
<p>Add a route for the destination IP (for example, <code>8.8.8.8</code>) via the gateway.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip route add 8.8.8.8 via 192.168.100.1 dev cn-data-br</code></pre>
</div>
</div>
</li>
<li>
<p>Ping the destination IP from the new IP <code>192.168.100.100</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ping 8.8.8.8 -I 192.168.100.100
PING 8.8.8.8 (8.8.8.8) from 192.168.100.100 : 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=59 time=8.52 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=59 time=8.90 ms
...</code></pre>
</div>
</div>
</li>
<li>
<p>Ping the destination IP with a different packet size to validate the new MTU.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ping 8.8.8.8 -s 8800 -I 192.168.100.100
PING 8.8.8.8 (8.8.8.8) from 192.168.100.100 : 8800(8828) bytes of data
The param `-s` specify the ping packet size, which can test if the new MTU really works</code></pre>
</div>
</div>
</li>
<li>
<p>Remove the route that you used for testing.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip route delete 8.8.8.8 via 192.168.100.1 dev cn-data-br</code></pre>
</div>
</div>
</li>
<li>
<p>Remove the IP that you used for testing.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip addr delete 192.168.100.100/24 dev cn-data-br</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Add back the network configurations that you removed.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must change the MTU in each network configuration, and verify that the new MTU was applied. The SUSE Virtualization webhook rejects a new network configuration if its MTU does not match the MTU of existing network configurations.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>All VM networks that are attached to the target cluster network automatically inherit the new MTU value.</p>
</div>
<div class="paragraph">
<p>In the following example, the network name is <code>vm100</code>. Run the command <code>kubectl get NetworkAttachmentDefinition.k8s.cni.cncf.io vm100 -oyaml</code> to verify that the MTU value was updated:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">    apiVersion: k8s.cni.cncf.io/v1
    kind: NetworkAttachmentDefinition
    metadata:
      annotations:
        network.harvesterhci.io/route: '{"mode":"auto","serverIPAddr":"","cidr":"","gateway":""}'
      creationTimestamp: '2025-04-25T10:21:01Z'
      finalizers:
        - wrangler.cattle.io/harvester-network-nad-controller
        - wrangler.cattle.io/harvester-network-manager-nad-controller
      generation: 1
      labels:
        network.harvesterhci.io/clusternetwork: cn-data
        network.harvesterhci.io/ready: 'true'
        network.harvesterhci.io/type: L2VlanNetwork
        network.harvesterhci.io/vlan-id: '100'
      name: vm100
      namespace: default
      resourceVersion: '1525839'
      uid: 8dacf415-ce90-414a-a11b-48f041d46b42
    spec:
      config: &gt;-
        {"cniVersion":"0.3.1","name":"vm100","type":"bridge","bridge":"cn-data-br","promiscMode":true,"vlan":100,"ipam":{},"mtu":9000} // MTU has been updated</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start all virtual machines that are attached to the target cluster network.</p>
<div class="paragraph">
<p>The virtual machines should have inherited the new MTU. You can verify this in the guest operating system using the commands <code>ip link</code> and <code>ping 8.8.8.8 -s 8800</code>.</p>
</div>
</li>
<li>
<p>Verify that the virtual machine workloads are running normally.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SUSE Virtualization cannot be held responsible for any damage or loss of data that may occur when the MTU value is changed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_change_the_mtu_of_a_network_configuration_with_an_attached_storage_network"><a class="anchor" href="#_change_the_mtu_of_a_network_configuration_with_an_attached_storage_network"></a>Change the MTU of a network configuration with an attached storage network</h4>
<div class="paragraph">
<p>In this scenario, the <a href="storage-network.html#_storage_network_setting" class="xref page">storage network setting</a> is enabled and attached to the target cluster network.</p>
</div>
<div class="paragraph">
<p>The storage network is used by <code>driver.longhorn.io</code>, which is SUSE Virtualization&#8217;s default CSI driver. SUSE Storage is responsible for provisioning <a href="../virtual-machines/create-vm.html#_volumes" class="xref page">root volumes</a>, so changing the MTU affects all virtual machines.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The MTU affects SUSE Virtualization nodes and networking devices such as switches and routers. Careful planning and testing are required to ensure that changing the MTU does not adversely affect the system. For more information, see <a href="deep-dive.html#_network_topology" class="xref page">Network Topology</a>.</p>
</li>
<li>
<p>You must use the same MTU across all network configurations of a custom cluster network.</p>
</li>
<li>
<p>All cluster operations are interrupted during the configuration change.</p>
</li>
<li>
<p>The information in this section does not apply to the built-in <code>mgmt</code> cluster network.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you must change the MTU, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop all virtual machines.</p>
</li>
<li>
<p>Disable the <a href="storage-network.html#_storage_network_setting" class="xref page">storage network setting</a>.</p>
<div class="paragraph">
<p>Allow some time for the setting to be disabled, and then <a href="storage-network.html#_verify_configuration_is_completed" class="xref page">verify that the change was applied</a>.</p>
</div>
</li>
<li>
<p>Check the network configurations of the target cluster network.</p>
<div class="paragraph">
<p>If multiple network configurations exist, record the node selector for each and remove configurations until only one remains.</p>
</div>
</li>
<li>
<p><a href="#_general_changes">Change the MTU</a> of the remaining network configuration.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must also change the MTU on the peer external switch or router.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Verify that the MTU was changed using the <code>ip link</code> command.</p>
<div class="paragraph">
<p>If the network configuration selects multiple SUSE Virtualization nodes, run the command on each node.</p>
</div>
<div class="paragraph">
<p>The output must show the new MTU of the related <code>*-br</code> device and the state <code>UP</code>. In the following example, the device is <code>cn-data-br</code> and the new MTU is <code>9000</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Harvester node $ ip link show dev cn-data-br
                                              |new MTU|              |state UP|
3: cn-data-br: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9000 qdisc noqueue state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:6e:5c:2a brd ff:ff:ff:ff:ff:ff</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When the state is <code>UNKNOWN</code>, it is likely that the MTU values on SUSE Virtualization and the external switch or router do not match.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Test the new MTU on SUSE Virtualization nodes using commands such as <code>ping</code>.</p>
<div class="paragraph">
<p>You must send the messages to a SUSE Virtualization node with the new MTU or to a node with an external IP.</p>
</div>
<div class="paragraph">
<p>In the following example, the network is <code>cn-data</code>, the CIDR is <code>192.168.100.0/24</code>, and the gateway is <code>192.168.100.1</code>.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the IP <code>192.168.100.100</code> on the bridge device.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip addr add dev cn-data-br 192.168.100.100/24</code></pre>
</div>
</div>
</li>
<li>
<p>Add a route for the destination IP (for example, <code>8.8.8.8</code>) via the gateway.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip route add 8.8.8.8 via 192.168.100.1 dev cn-data-br</code></pre>
</div>
</div>
</li>
<li>
<p>Ping the destination IP from the new IP <code>192.168.100.100</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ping 8.8.8.8 -I 192.168.100.100
PING 8.8.8.8 (8.8.8.8) from 192.168.100.100 : 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=59 time=8.52 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=59 time=8.90 ms
...</code></pre>
</div>
</div>
</li>
<li>
<p>Ping the destination IP with a different packet size to validate the new MTU.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ping 8.8.8.8 -s 8800 -I 192.168.100.100
PING 8.8.8.8 (8.8.8.8) from 192.168.100.100 : 8800(8828) bytes of data
The param `-s` specify the ping packet size, which can test if the new MTU really works</code></pre>
</div>
</div>
</li>
<li>
<p>Remove the route that you used for testing.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip route delete 8.8.8.8 via 192.168.100.1 dev cn-data-br</code></pre>
</div>
</div>
</li>
<li>
<p>Remove the IP that you used for testing.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ip addr delete 192.168.100.100/24 dev cn-data-br</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Add back the network configurations that you removed.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must change the MTU in each network configuration, and verify that the new MTU was applied. The SUSE Virtualization webhook rejects a new network configuration if its MTU does not match the MTU of existing network configurations.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Enable and configure the <a href="storage-network.html#_storage_network_setting" class="xref page">storage network setting</a>, ensuring that the <a href="storage-network.html#_prerequisites" class="xref page">prerequisites</a> are met.</p>
</li>
<li>
<p>Allow some time for the setting to be enabled, and then <a href="storage-network.html#_prerequisites" class="xref page">verify that the change was applied</a>. The <code>storagenetwork</code> runs with the new MTU value.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All VM networks that are attached to the target cluster network automatically inherit the new MTU value.</p>
</div>
<div class="paragraph">
<p>+
In the following example, the network name is <code>vm100</code>. Run the command <code>kubectl get NetworkAttachmentDefinition.k8s.cni.cncf.io vm100 -oyaml</code> to verify that the MTU value was updated.</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    apiVersion: k8s.cni.cncf.io/v1
    kind: NetworkAttachmentDefinition
    metadata:
      annotations:
        network.harvesterhci.io/route: '{"mode":"auto","serverIPAddr":"","cidr":"","gateway":""}'
      creationTimestamp: '2025-04-25T10:21:01Z'
      finalizers:
        - wrangler.cattle.io/harvester-network-nad-controller
        - wrangler.cattle.io/harvester-network-manager-nad-controller
      generation: 1
      labels:
        network.harvesterhci.io/clusternetwork: cn-data
        network.harvesterhci.io/ready: 'true'
        network.harvesterhci.io/type: L2VlanNetwork
        network.harvesterhci.io/vlan-id: '100'
      name: vm100
      namespace: default
      resourceVersion: '1525839'
      uid: 8dacf415-ce90-414a-a11b-48f041d46b42
    spec:
      config: &gt;-
        {"cniVersion":"0.3.1","name":"vm100","type":"bridge","bridge":"cn-data-br","promiscMode":true,"vlan":100,"ipam":{},"mtu":9000} // MTU has been updated</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start all virtual machines that are attached to the target cluster network.</p>
<div class="paragraph">
<p>The virtual machines should have inherited the new MTU. You can verify this in the guest operating system using the Linux <code>ip link</code> command and <code>ping 8.8.8.8 -s 8800</code> command.</p>
</div>
</li>
<li>
<p>Verify that the virtual machine workloads are running normally.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SUSE Virtualization cannot be held responsible for any damage or loss of data that may occur when the MTU value is changed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../storage/storage-validator.html">Storage Validator</a></span>
  <span class="next"><a href="vm-network.html">VM Network</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
