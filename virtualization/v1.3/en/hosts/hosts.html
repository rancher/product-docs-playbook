<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Host Management :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/virtualization/v1.5/en/hosts/hosts.html">
    <link rel="prev" href="../upgrades/troubleshooting.html">
    <link rel="next" href="witness-node.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-06-17"/>
<link rel="stylesheet" href="../../../../_/css/search.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>

<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/assets");
</script>    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><!-- Canonical link -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.5/en/hosts/hosts.html" rel="canonical"/>

<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.3/en/hosts/hosts.html" hreflang="x-default" rel="alternate"/>

<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.3/en/hosts/hosts.html" hrefLang="en-US" rel="alternate" />











<shared-header language="en" languages='{
"en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
"de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
"fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
"es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
"zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
"pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="virtualization" data-version="v1.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">SUSE® Virtualization</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-ha-cluster.html">Deploy a High-Availability Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-singlenode-cluster.html">Deploy a Single-Node Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/document-conventions.html">Document Conventions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation and Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/requirements.html">Hardware and Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Media</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/net-install.html">Net Install ISO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/install-binaries-mode.html">Install Binaries Only</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Methods</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/iso-install.html">ISO Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/usb-install.html">USB Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/pxe-boot-install.html">PXE Boot Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/configuration-file.html">Configuration File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/update-configuration.html">Update the Configuration After Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/settings.html">Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/cloudinitcrd.html">CloudInit CRD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/management-address.html">Management Address</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/airgap.html">Air-Gapped Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/single-node-clusters.html">Single-Node Clusters</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Upgrades</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/upgrades.html">Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-1-2-to-v1-2-0.html">Upgrade from v1.1.2 to v1.2.0 (not recommended)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-0-to-v1-2-1.html">Upgrade from v1.1.2/v1.1.3/v1.2.0 to v1.2.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-1-to-v1-2-2.html">Upgrade from v1.2.1 to v1.2.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-2-to-v1-3-1.html">Upgrade from v1.2.2/v1.3.0 to v1.3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-1-to-v1-3-2.html">Upgrade from v1.3.1 to v1.3.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-2-to-v1-4-0.html">Upgrade from v1.3.2 to v1.4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Hosts</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="hosts.html">Host Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="witness-node.html">Witness Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vgpu-support.html">vGPU Support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/virtual-machines.html">Virtual Machines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machine Images</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/upload-image.html">Upload Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/custom-suse-images.html">Custom SUSE VM Images</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-vm.html">Create a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-windows-vm.html">Create a Windows Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/edit-vm.html">Edit a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/access-vm.html">Access to the Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/backup-restore.html">VM Backup, Snapshot &amp; Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/live-migration.html">Live Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/hotplug-volume.html">Hot-Plug Volumes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/resource-overcommit.html">Resource Overcommit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/clone-vm.html">Clone VM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Volumes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/create-volume.html">Create a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/edit-volume.html">Edit a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/clone-volume.html">Clone a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/export-volume.html">Export a Volume to Image</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-snapshots.html">Volume Snapshots</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/storageclass.html">StorageClass</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/csidriver.html">Third-Party Storage Support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Networking</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/cluster-network.html">Cluster Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/vm-network.html">VM Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/deep-dive.html">Networking Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/load-balancer.html">Load Balancer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/ip-pool.html">IP Pool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/storage-network.html">Storage Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/best-practices.html">Networking Best Practices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/calculation-resource-metrics.html">Calculation of Resource Metrics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Add-ons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/add-ons.html">Add-ons</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/harvester-seeder.html">Harvester Seeder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/nvidia-driver-toolkit.html">NVIDIA Driver Toolkit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/pcidevices-controller.html">PCI Devices Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/rancher-vcluster.html">Rancher Manager (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-dhcp-controller.html">VM DHCP Controller (Managed DHCP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-import-controller.html">VM Import Controller</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher Integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-integration.html">SUSE Rancher Prime Integration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/virtualization-management.html">Virtualization Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node Driver</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/node-driver.html">Harvester Node Driver</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/rke1-cluster.html">Creating an RKE1 Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/rke2-cluster.html">Creating an RKE2 Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/k3s-cluster.html">Creating an K3s Kubernetes Cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/cloud-provider.html">Harvester Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/csi-driver.html">Harvester CSI Driver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/resource-quota.html">Resource Quotas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-terraform-provider.html">Rancher Terraform</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/import-vm.html">Import a Cluster Built on a SUSE® Virtualization VM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/harvester-ui-extension.html">Harvester UI Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/terraform/terraform-provider.html">Terraform Provider</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/installation.html">Installation Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/operating-system.html">Operating System Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/cluster.html">Cluster Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/virtual-machines.html">Virtual Machine Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/monitoring.html">Monitoring Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/rancher.html">Rancher Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Developer Content</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developer/developer-mode-installation.html">Developer Mode</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../api.html">API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE® Virtualization</span>
    <span class="version">v1.3</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../admission-controller/1.29/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../admission-controller/1.30/en/introduction.html">1.30-next</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.27/en/introduction.html">1.27</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.26/en/introduction.html">1.26</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.25/en/introduction.html">1.25</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../cluster-api/latest/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../cluster-api/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../continuous-delivery/v0.12/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../os-manager/next/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../os-manager/next/en/index.html">Next</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">latest</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../storage/latest/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../storage/latest/en/longhorn-documentation.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.9/en/longhorn-documentation.html">1.9 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../v1.6/en/introduction/overview.html">v1.6 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../v1.4/en/introduction/overview.html">v1.4</a>
            </li>
            <li class="version is-current">
              <a href="../introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home">Documentation Home</a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/virtualization" title="SUSE Virtualization" aria-label="SUSE Documentation - SUSE Virtualization">
        SUSE Virtualization
      </a>
    </li>
      <li>
          Hosts
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v1.3</button>
  <div class="version-menu">
    <a class="version" href="../../../v1.6/en/hosts/hosts.html">v1.6 (Dev)</a>
    <a class="version" href="../../../v1.5/en/hosts/hosts.html">v1.5 (Latest)</a>
    <a class="version" href="../../../v1.4/en/hosts/hosts.html">v1.4</a>
    <a class="version is-current" href="hosts.html">v1.3</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/harvester-product-docs/edit/main/versions/v1.3/modules/en/pages/hosts/hosts.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:virtualization" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Host Management</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Users can view and manage SUSE Virtualization nodes from the host page. The first node always defaults to be a management node of the cluster. When there are three or more nodes, the two other nodes that first joined are automatically promoted to management nodes to form a HA cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Because SUSE Virtualization is built on top of Kubernetes and uses etcd as its database, the maximum node fault toleration is one when there are three management nodes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/host.png" alt="host.png">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_node_maintenance"><a class="anchor" href="#_node_maintenance"></a>Node Maintenance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Admin users can enable Maintenance Mode (select <strong>⋮ &#8594; Enable Maintenance Mode</strong>) to automatically evict all virtual machines from a node. This mode leverages the <strong>live migration</strong> feature to migrate the virtual machines to other nodes, which is useful when you need to reboot, upgrade firmware, or replace hardware components. At least two active nodes are required to use this feature.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <a href="https://github.com/harvester/harvester/issues/7128">bug</a> may cause an I/O error to occur in virtual machines while Maintenance Mode is enabled on the underlying node. To mitigate the issue, you can set a taint on the node before enabling Maintenance Mode.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the taint on the target node.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl taint node &lt;NODE&gt; --overwrite kubevirt.io/drain=draining:NoSchedule</code></pre>
</div>
</div>
</li>
<li>
<p>Wait for all virtual machines to be live-migrated out of the node.</p>
</li>
<li>
<p>On the UI <strong>Hosts</strong> screen, select the target node, and then select <strong>⋮ &#8594; Enable Maintenance Mode</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the maintenance tasks are completed, perform the following steps to allow scheduling of workloads on the node.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove the taint on the node.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl taint node &lt;NODE&gt; kubevirt.io/drain-</code></pre>
</div>
</div>
</li>
<li>
<p>On the UI <strong>Hosts</strong> screen, select the node, and then select <strong>⋮ &#8594; Disable Maintenance Mode</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information, see [Issue #7128](<a href="https://github.com/harvester/harvester/issues/7128" class="bare">https://github.com/harvester/harvester/issues/7128</a>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/node-maintenance.png" alt="node-maintenance.png">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cordoning_a_node"><a class="anchor" href="#_cordoning_a_node"></a>Cordoning a Node</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cordoned nodes are marked as unschedulable. Cordoning is useful when you want to prevent new workloads from being scheduled on a node. You can uncordon a node to make it schedulable again.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/cordon-nodes.png" alt="cordon-node.png">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deleting_a_node"><a class="anchor" href="#_deleting_a_node"></a>Deleting a Node</h2>
<div class="sectionbody">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before removing a node from a SUSE Virtualization cluster, determine if the remaining nodes have enough computing and storage resources to take on the workload from the node to be removed. Check the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Current resource usage in the cluster (on the <strong>Hosts</strong> screen of the SUSE Virtualization UI)</p>
</li>
<li>
<p>Ability of the remaining nodes to maintain enough replicas for all volumes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the remaining nodes do not have enough resources, VMs might fail to migrate and volumes might degrade when you remove a node.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_1_check_if_the_node_can_be_removed_from_the_cluster"><a class="anchor" href="#_1_check_if_the_node_can_be_removed_from_the_cluster"></a>1. Check if the node can be removed from the cluster.</h3>
<div class="paragraph">
<p>You can safely remove a control plane node depending on the quantity and availability of other nodes in the cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The cluster has three control plane nodes and one or more worker nodes.</p>
<div class="paragraph">
<p>When you remove a control plane node, a worker node will be promoted to control plane node. SUSE Virtualization allows you to assign a role to each node that joins a cluster. In earlier versions, worker nodes were randomly selected for promotion. If you prefer to promote specific nodes, see <a href="#_role_management">Role Management</a> and <a href="../installation-setup/config/configuration-file.html#_install_role" class="xref page">Configuration File</a> for more information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Automatic node promotion occurs only when a control plane node is deleted from the cluster. This does not include situations wherein a node becomes unavailable due to failed health checks. The unhealthy node retains its role.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The cluster has three control plane nodes and no worker nodes.</p>
<div class="paragraph">
<p>You must add a new node to the cluster before removing a control plane node. This ensures that the cluster always has three control plane nodes and that a quorum can be formed even if one control plane node fails.</p>
</div>
</li>
<li>
<p>The cluster has only two control plane nodes and no worker nodes.</p>
<div class="paragraph">
<p>Removing a control plane node in this situation is not recommended because etcd data is not replicated in a single-node cluster. Failure of a single node can cause etcd to lose its quorum and shut the cluster down.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_check_the_status_of_volumes"><a class="anchor" href="#_2_check_the_status_of_volumes"></a>2. Check the status of volumes.</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the <a href="../troubleshooting/cluster.html#_access_embedded_rancher_and_longhorn_dashboards" class="xref page">embedded SUSE Storage UI</a>.</p>
</li>
<li>
<p>Go to the <strong>Volume</strong> screen.</p>
</li>
<li>
<p>Verify that the state of all volumes is <strong>Healthy</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_3_evict_replicas_from_the_node_to_be_removed"><a class="anchor" href="#_3_evict_replicas_from_the_node_to_be_removed"></a>3. Evict replicas from the node to be removed.</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the <a href="../troubleshooting/cluster.html#_access_embedded_rancher_and_longhorn_dashboards" class="xref page">embedded SUSE Storage UI</a>.</p>
</li>
<li>
<p>Go to the <strong>Node</strong> screen.</p>
</li>
<li>
<p>Select the node that you want to remove, click the icon in the <strong>Operation</strong> column, and then select <strong>Edit node and disks</strong>.</p>
</li>
<li>
<p>Configure the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Node Scheduling</strong>: Select <strong>Disable</strong>.</p>
</li>
<li>
<p><strong>Evict Requested</strong>" Select <strong>True</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Go back to the <strong>Node</strong> screen and verify that <strong>Replicas</strong> value for the node to be removed is <strong>0</strong>.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Eviction cannot be completed if the remaining nodes cannot accept replicas from the node to be removed. In this case, some volumes will remain in the <strong>Degraded</strong> state until you add more nodes to the cluster.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_4_manage_non_migratable_vms"><a class="anchor" href="#_4_manage_non_migratable_vms"></a>4. Manage non-migratable VMs.</h3>
<div class="paragraph">
<p><a href="../virtual-machines/live-migration.html" class="xref page">Live migration</a> cannot be performed for VMs with certain properties.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The VM has PCI passthrough devices or vGPU devices.</p>
<div class="paragraph">
<p>A PCI device is bound to a node. You must remove the PCI device from the VM, or delete the VM and then create a new VM from a backup or snapshot.</p>
</div>
</li>
<li>
<p>The VM has a node selector or affinity rules that bind it to the node to be removed.</p>
<div class="paragraph">
<p>You must change the node selector or affinity rules.</p>
</div>
</li>
<li>
<p>The VM is on a VM network that binds it to the node to be removed.</p>
<div class="paragraph">
<p>You must select a different VM network.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Create a backup or snapshot for each non-migratable VM before modifying the settings that bind it to the node that you want to remove.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_5_evict_workloads_from_the_node_to_be_removed"><a class="anchor" href="#_5_evict_workloads_from_the_node_to_be_removed"></a>5. Evict workloads from the node to be removed.</h3>
<div class="paragraph">
<p>You can enable <a href="#_node_maintenance">Maintenance Mode</a> on the node to automatically live-migrate VMs and workloads. You can also <a href="../virtual-machines/live-migration.html#_starting_a_migration" class="xref page">manually live-migrate</a> VMs to other nodes.</p>
</div>
<div class="paragraph">
<p>All workloads have been successfully evicted if the node state is <strong>Maintenance</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/node-maintain-completed.png" alt="node-maintain-completed.png">
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a cluster has only two control plane nodes, SUSE Virtualization does not allow you to enable Maintenance Mode on any node. You can manually drain the node to be removed using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl drain &lt;node_name&gt; --force --ignore-daemonsets --delete-local-data --pod-selector='app!=csi-attacher,app!=csi-provisioner'</pre>
</div>
</div>
<div class="paragraph">
<p>Again, removing a control plane node in this situation is <strong>not recommended</strong> because etcd data is not replicated. Failure of a single node can cause etcd to lose its quorum and shut the cluster down.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_6_delete_rke2_services_and_shut_down_the_node"><a class="anchor" href="#_6_delete_rke2_services_and_shut_down_the_node"></a>6. Delete RKE2 services and shut down the node.</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the node using the root account.</p>
</li>
<li>
<p>Run the script <code>/opt/rke2/bin/rke2-uninstall.sh</code> to delete RKE2 services running on the node.</p>
</li>
<li>
<p>Shut down the node.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_7_remove_the_node"><a class="anchor" href="#_7_remove_the_node"></a>7. Remove the node.</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the UI, go to the <strong>Hosts</strong> screen.</p>
</li>
<li>
<p>Locate the node that you want to remove, and then click <strong>⋮ &#8594; Delete</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/delete-node.png" alt="delete node">
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There&#8217;s a <a href="https://github.com/harvester/harvester/issues/1497">known issue</a> about node hard delete.
Once resolved, you can skip this step.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_role_management"><a class="anchor" href="#_role_management"></a>Role Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hardware issues may force you to replace the management node. SUSE Virtualization improves the process by introducing the following roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Management</strong>: Allows a node to be prioritized when SUSE Virtualization promotes nodes to management nodes.</p>
</li>
<li>
<p><strong>Witness</strong>: Restricts a node to being a witness node (only functions as an etcd node) in a specific cluster.</p>
</li>
<li>
<p><strong>Worker</strong>: Restricts a node to being a worker node (never promoted to management node) in a specific cluster.</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SUSE Virtualization currently allows only one witness node in the cluster.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information about assigning roles to nodes, see <a href="../installation-setup/methods/iso-install.html" class="xref page">ISO Installation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multi_disk_management"><a class="anchor" href="#_multi_disk_management"></a>Multi-disk Management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_add_additional_disks"><a class="anchor" href="#_add_additional_disks"></a>Add Additional Disks</h3>
<div class="paragraph">
<p>Users can view and add multiple disks as additional data volumes from the edit host page.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Hosts</strong> page.</p>
</li>
<li>
<p>On the node you want to modify, click <strong>⋮ &#8594; Edit Config</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/edit-config.png" alt="Edit Config">
</div>
</div>
</li>
<li>
<p>Select the <strong>Storage</strong> tab and click <strong>Add Disk</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/add-disks.png" alt="Add Disks">
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SUSE Virtualization does not support adding partitions as additional disks. If you want to add it as an additional disk, be sure to delete all partitions first (e.g., using <code>fdisk</code>).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select an additional raw block device to add as an additional data volume.</p>
<div class="ulist">
<ul>
<li>
<p>The <code>Force Formatted</code> option is required if the block device has never been force-formatted.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/force-format-disks.png" alt="Force Format">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Last, you can click <strong>⋮ &gt; Edit Config</strong> again to check the newly added disk. Meanwhile, you can also add the "Host/Disk" tag (details are described in the <a href="#_storage_tags">next section</a>).</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/check-added-disks.png" alt="Check Result">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order for SUSE Virtualization to identify the disks, each disk needs to have a unique <a href="https://en.wikipedia.org/wiki/World_Wide_Name">WWN</a>. Otherwise, SUSE Virtualization will refuse to add the disk.
If your disk does not have a WWN, you can format it with the <code>EXT4</code> filesystem to help SUSE Virtualization recognize the disk.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are testing SUSE Virtualization in a QEMU environment, you&#8217;ll need to use QEMU v6.0 or later. Previous versions of QEMU will always generate the same WWN for NVMe disks emulation. This will cause SUSE Virtualization to not add the additional disks, as explained above. However, you can still add a virtual disk with the SCSI controller. The WWN information could be added manually along with the disk attach operation. For more details, please refer to the <a href="https://github.com/harvester/vagrant-rancherd/blob/2782981b6017754d016f5b72d630dff4895f7ad6/scripts/attach-disk.sh#L75">script</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_storage_tags"><a class="anchor" href="#_storage_tags"></a>Storage Tags</h3>
<div class="paragraph">
<p>The storage tag feature enables only certain nodes or disks to be used for storing SUSE Storage volume data. For example, performance-sensitive data can use only the high-performance disks which can be tagged as <code>fast</code>, <code>ssd</code> or <code>nvme</code>, or only the high-performance nodes tagged as <code>baremetal</code>.</p>
</div>
<div class="paragraph">
<p>This feature supports both disks and nodes.</p>
</div>
<div class="sect3">
<h4 id="_setup"><a class="anchor" href="#_setup"></a>Setup</h4>
<div class="paragraph">
<p>The tags can be set up through the SUSE Virtualization UI on the host page:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <code>Hosts</code> -&gt; <code>Edit Config</code> -&gt; <code>Storage</code></p>
</li>
<li>
<p>Click <code>Add Host/Disk Tags</code> to start typing and hit enter to add new tags.</p>
</li>
<li>
<p>Click <code>Save</code> to update tags.</p>
</li>
<li>
<p>On the <a href="../storage/storageclass.html" class="xref page">StorageClasses</a> page, create a new storage class and select those defined tags on the <code>Node Selector</code> and <code>Disk Selector</code> fields.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All the existing scheduled volumes on the node or disk won&#8217;t be affected by the new tags.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When multiple tags are specified for a volume, the disk and the nodes (that the disk belongs to) must have all the specified tags to become usable.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove_disks"><a class="anchor" href="#_remove_disks"></a>Remove disks</h3>
<div class="paragraph">
<p>Before removing a disk, you must first evict SUSE Storage replicas on the disk.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The replica data would be rebuilt to another disk automatically to keep the high availability.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_identify_the_disk_to_remove"><a class="anchor" href="#_identify_the_disk_to_remove"></a>Identify the disk to remove</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Hosts</strong> page.</p>
</li>
<li>
<p>On the node containing the disk, select the node name and go to the <strong>Storage</strong> tab.</p>
</li>
<li>
<p>Find the disk you want to remove. Let&#8217;s assume we want to remove <code>/dev/sdb</code>, and the disk&#8217;s mount point is <code>/var/lib/harvester/extra-disks/1b805b97eb5aa724e6be30cbdb373d04</code>.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remove-disks-harvester-find-disk.png" alt="Find disk to remove">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_evict_replicas_suse_storage_dashboard"><a class="anchor" href="#_evict_replicas_suse_storage_dashboard"></a>Evict replicas (SUSE Storage dashboard)</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Please follow <a href="../troubleshooting/cluster.html#_access_embedded_rancher_and_longhorn_dashboards" class="xref page">this session</a> to enable the embedded SUSE Storage dashboard.</p>
</li>
<li>
<p>Visit the SUSE Storage dashboard and go to the <strong>Node</strong> page.</p>
</li>
<li>
<p>Expand the node containing the disk. Confirm the mount point <code>/var/lib/harvester/extra-disks/1b805b97eb5aa724e6be30cbdb373d04</code> is in the disks list.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remove-disks-longhorn-nodes.png" alt="Check the removing disk">
</div>
</div>
</li>
<li>
<p>Select <strong>Edit node and disks</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remove-disks-longhorn-nodes-edit.png" alt="Edit node and disks">
</div>
</div>
</li>
<li>
<p>Scroll to the disk you want to remove.</p>
<div class="ulist">
<ul>
<li>
<p>Set <code>Scheduling</code> to <code>Disable</code>.</p>
</li>
<li>
<p>Set <code>Eviction Requested</code> to <code>True</code>.</p>
</li>
<li>
<p>Select <strong>Save</strong>. Do not select the delete icon.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remove-disks-longhorn-nodes-evict-disk.png" alt="Evict disk">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>The disk will be disabled. Please wait until the disk replica count becomes <code>0</code> to proceed with removing the disk.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remove-disks-longhorn-wait-replicas.png" alt="Wait replicas">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_remove_the_disk"><a class="anchor" href="#_remove_the_disk"></a>Remove the disk</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Hosts</strong> page.</p>
</li>
<li>
<p>On the node containing the disk, select <strong>⋮ &#8594; Edit Config</strong>.</p>
</li>
<li>
<p>Go to the <strong>Storage</strong> tab and select <strong>x</strong>  to remove the disk.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remove-disks-harvester-remove.png" alt="Remove disk">
</div>
</div>
</li>
<li>
<p>Select <strong>Save</strong> to remove the disk.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_topology_spread_constraints"><a class="anchor" href="#_topology_spread_constraints"></a>Topology Spread Constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#node-labels">Node labels</a> are used to identify the topology domains that each node is in. You can configure labels such as <a href="https://kubernetes.io/docs/reference/labels-annotations-taints/#topologykubernetesiozone"><code>topology.kubernetes.io/zone</code></a> on the SUSE Virtualization UI.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Hosts</strong>.</p>
</li>
<li>
<p>Select the target node, and then select <strong>⋮ &#8594; Edit Config</strong>.</p>
</li>
<li>
<p>On the <strong>Labels</strong> tab, click <strong>Add Label</strong> and then specify the label <code>topology.kubernetes.io/zone</code> and a value.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The label is automatically synchronized with the corresponding SUSE Storage node.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ksmtuned_mode"><a class="anchor" href="#_ksmtuned_mode"></a>Ksmtuned Mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ksmtuned is a KSM automation tool deployed as a DaemonSet to run Ksmtuned on each node. It will start or stop the KSM by watching the available memory percentage ratio (<strong>i.e. Threshold Coefficient</strong>). By default, you need to manually enable Ksmtuned on each node UI. You will be able to see the KSM statistics from the node UI after 1-2 minutes.(check <a href="https://www.kernel.org/doc/html/latest/admin-guide/mm/ksm.html#ksm-daemon-sysfs-interface">KSM</a> for more details).</p>
</div>
<div class="sect2">
<h3 id="_quick_run"><a class="anchor" href="#_quick_run"></a>Quick Run</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Hosts</strong> page.</p>
</li>
<li>
<p>On the node you want to modify, click <strong>⋮ &#8594; Edit Config</strong>.</p>
</li>
<li>
<p>Select the <strong>Ksmtuned</strong> tab and select <strong>Run</strong> in <strong>Run Strategy</strong>.</p>
</li>
<li>
<p>(Optional) You can modify <strong>Threshold Coefficient</strong> as needed.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/edit-ksmtuned.png" alt="Edit Ksmtuned">
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong> to update.</p>
</li>
<li>
<p>Wait for about 1-2 minutes and you can check its <strong>Statistics</strong> by clicking <strong>Your Node &#8594; Ksmtuned tab</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/view-ksmtuned-statistics.png" alt="View Ksmtuned Statistics">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_parameters"><a class="anchor" href="#_parameters"></a>Parameters</h3>
<div class="paragraph">
<p><strong>Run Strategy:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Stop:</strong> Stop Ksmtuned and KSM. VMs can still use shared memory pages.</p>
</li>
<li>
<p><strong>Run:</strong> Run Ksmtuned.</p>
</li>
<li>
<p><strong>Prune:</strong> Stop Ksmtuned and prune KSM memory pages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Threshold Coefficient</strong>: configures the available memory percentage ratio. If the available memory is less than the threshold, KSM will be started; otherwise, KSM will be stopped.</p>
</div>
<div class="paragraph">
<p><strong>Merge Across Nodes:</strong> specifies if pages from different NUMA nodes can be merged.</p>
</div>
<div class="paragraph">
<p><strong>Mode:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Standard:</strong> The default mode. The control node ksmd uses about 20% of a single CPU. It uses the following parameters:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Boost: 0
Decay: 0
Maximum Pages: 100
Minimum Pages: 100
Sleep Time: 20</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>High-performance:</strong> Node ksmd uses 20% to 100% of a single CPU and has higher scanning and merging efficiency. It uses the following parameters:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Boost: 200
Decay: 50
Maximum Pages: 10000
Minimum Pages: 100
Sleep Time: 20</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Customized:</strong> You can customize the configuration to reach the performance that you want.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ksmtuned uses the following parameters to control KSM efficiency:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of scanned pages is incremented each time if the available memory is less than the <strong>Threshold Coefficient</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of scanned pages is decremented each time if the available memory is greater than the <strong>Threshold Coefficient</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum Pages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of pages per scan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum Pages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum number of pages per scan, also the configuration for the first run.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sleep Time (ms)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval between two scans, which is calculated with the formula (<strong>Sleep Time</strong> * 16 * 1024* 1024 / Total Memory). Minimum: 10ms.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>For example, assume you have a 512GiB memory node that uses the following parameters:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Boost: 300
Decay: 100
Maximum Pages: 5000
Minimum Pages: 1000
Sleep Time: 50</code></pre>
</div>
</div>
<div class="paragraph">
<p>When Ksmtuned starts, initialize <code>pages_to_scan</code> in KSM to 1000 (<strong>Minimum Pages</strong>) and set <code>sleep_millisecs</code> to 10 (50 * 16 * 1024 * 1024 / 536870912 KiB &lt; 10).</p>
</div>
<div class="paragraph">
<p>KSM starts when the available memory falls below the <strong>Threshold Coefficient</strong>. If it detects that it is running, <code>pages_to_scan</code> increments by 300 (<strong>Boost</strong>) every minute until it reaches 5000 (<strong>Maximum Pages</strong>).</p>
</div>
<div class="paragraph">
<p>KSM will stop when the available memory is above the <strong>Threshold Coefficient</strong>. If it detects that it is stopped, <code>pages_to_scan</code> decrements by 100 (<strong>Decay</strong>) every minute until it reaches 1000 (<strong>Minimum Pages</strong>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ntp_configuration"><a class="anchor" href="#_ntp_configuration"></a>NTP Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Time synchronization is an important aspect of distributed cluster architecture. Because of this, SUSE Virtualization provides a simpler way for configuring NTP settings.</p>
</div>
<div class="paragraph">
<p>SUSE Virtualization supports NTP configuration on the SUSE Virtualization UI Settings screen (<strong>Advanced</strong> &gt; <strong>Settings</strong>). You can configure NTP settings for the entire SUSE Virtualization cluster at any time, and the settings are applied to all nodes in the cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/harvester-ntp-settings.png" alt="harvester ntp settings">
</div>
</div>
<div class="paragraph">
<p>You can set up multiple NTP servers at once.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/harvester-ntp-settings-multiple.png" alt="harvester ntp settings multiple">
</div>
</div>
<div class="paragraph">
<p>You can check the settings in the <code>node.harvesterhci.io/ntp-service</code> annotation in Kubernetes nodes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ntpSyncStatus</code>: Status of the connection to NTP servers (possible values: <code>disabled</code>, <code>synced</code> and <code>unsynced</code>)</p>
</li>
<li>
<p><code>currentNtpServers</code>: List of existing NTP servers</p>
<div class="literalblock">
<div class="content">
<pre>$ kubectl get nodes harvester-node-0 -o yaml |yq -e '.metadata.annotations.["node.harvesterhci.io/ntp-service"]'
{"ntpSyncStatus":"synced","currentNtpServers":"0.suse.pool.ntp.org 1.suse.pool.ntp.org"}</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Do not modify the NTP configuration file on each node. SUSE Virtualization will automatically sync the settings that you configured on the SUSE Virtualization UI to the nodes.</p>
</li>
<li>
<p>If you upgraded SUSE Virtualization from an earlier version, the <strong>ntp-servers</strong> list on the Settings screen will be empty (see screenshot). You must manually configure the NTP settings because SUSE Virtualization is unaware of the previous settings and is unable to detect conflicts.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/harvester-ntp-settings-empty.png" alt="harvester ntp settings empty">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cloud_native_node_configuration"><a class="anchor" href="#_cloud_native_node_configuration"></a>Cloud-Native Node Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may need to customize one or more nodes after installing SUSE Virtualization. This process usually entails updating the <a href="../installation-setup/config/update-configuration.html" class="xref page">runtime configuration</a> and modifying files in the <code>/oem</code> directory of each node to make changes persist after rebooting.</p>
</div>
<div class="paragraph">
<p>These customizations can be described in a Kubernetes manifest and then applied to the underlying cluster using kubectl or other GitOps-centric tools such as <a href="https://documentation.suse.com/cloudnative/continuous-delivery/">SUSE® Rancher Prime: Continuous Delivery</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Misconfigurations might compromise the ability of a SUSE Virtualization node to boot up, or even damage the overall stability of the cluster. You can prevent such issues by reading the Elemental toolkit documentation to learn how to <a href="https://rancher.github.io/elemental-toolkit/docs/customizing/">correctly customize Elemental</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_creating_a_cloudinit_resource"><a class="anchor" href="#_creating_a_cloudinit_resource"></a>Creating a CloudInit Resource</h3>
<div class="paragraph">
<p>SUSE Virtualization node customization is bounded only by your creativity and by what the Elemental toolkit markup can syntactically express. The documentation, therefore, cannot provide an exhaustive list of possible customizations and use cases.</p>
</div>
<div class="paragraph">
<p><strong>Example: You want to add an SSH authorized key for the default <code>rancher</code> user on all nodes.</strong></p>
</div>
<div class="paragraph">
<p>Start by creating a Kubernetes manifest for a CloudInit resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>file: ssh_access.yaml</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: node.harvesterhci.io/v1beta1
kind: CloudInit
metadata:
  name: ssh-access
spec:
  matchSelector: {}
  filename: 99_ssh.yaml
  contents: |
    stages:
      network:
        - authorized_keys:
            rancher:
              - ssh-ed25519 AAAA...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This manifest describes an Elemental cloud-init document that will be applied to <em>all nodes</em> (because the empty <code>matchSelector: {}</code> field matches everything). The YAML document in the <code>.spec.contents</code> field will be rendered to <code>/oem/99_ssh.yaml</code> (because of the <code>.spec.filename</code> field.)</p>
</div>
<div class="paragraph">
<p>Apply this example using the command <code>kubectl apply -f ssh_access.yaml</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Reboot the relevant SUSE Virtualization nodes so that the Elemental toolkit executor can apply the new configuration at boot.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_cloudinit_resource_spec"><a class="anchor" href="#_cloudinit_resource_spec"></a>CloudInit Resource Spec</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">matchSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting that allows you to specify the nodes that will receive the configuration changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the file that appears in <code>/oem</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elemental toolkit cloud-init-style file that will be rendered to a file in <code>/oem</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paused</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set to <code>true</code>, the file will not be updated on nodes as it changes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>matchSelector</code> field can be used to target specific nodes or groups of nodes based on their labels.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">matchSelector:
  kubernetes.io/hostname: "harvester-node-1"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All label key-value pairs listed in the <code>matchSelector</code> field must match the labels of the intended nodes.</p>
</div>
<div class="paragraph">
<p>In the following example, <code>matchSelector</code> will match <code>harvester-node-1</code> only if that node also has the <code>example.com/role</code> label with the value <code>role-a</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">matchSelector:
  kubernetes.io/hostname: "harvester-node-1"
  example.com/role: "role-a"</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updating_a_cloudinit_resource"><a class="anchor" href="#_updating_a_cloudinit_resource"></a>Updating a CloudInit Resource</h3>
<div class="paragraph">
<p>You can use the command <code>kubectl edit</code> to update a CloudInit resource. However, there is a caveat if the <code>matchSelector</code> field is updated to exclude one or more nodes from the customization. See the note in the <a href="#_deleting_a_cloudinit_resource">Deleting a CloudInit Resource</a> section regarding rolling back customizations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># kubectl edit cloudinit CLOUDINIT_NAME</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deleting_a_cloudinit_resource"><a class="anchor" href="#_deleting_a_cloudinit_resource"></a>Deleting a CloudInit Resource</h3>
<div class="paragraph">
<p>You can use the command <code>kubectl delete</code> to remove a CloudInit resource from the SUSE Virtualization cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># kubectl delete cloudinit CLOUDINIT_NAME</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SUSE Virtualization is unable to "roll back" previously described customizations because the CloudInit resource can describe anything that can be expressed as an Elemental toolkit customization, including arbitrary shell commands.</p>
</div>
<div class="paragraph">
<p>In the <a href="#_creating_a_cloudinit_resource">Creating a CloudInit Resource</a> example, the YAML file contains the <code>authorized_keys</code> stanza. This is an append-only action in the Elemental toolkit. When the resource is changed or deleted, the <code>authorized_keys</code> file in SUSE Rancher Prime will still contain the old public key.</p>
</div>
<div class="paragraph">
<p><strong>You are responsible for amending or creating a CloudInit resource that rolls the changes back (if necessary) before you reboot the node.</strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting_cloudinit_rollouts"><a class="anchor" href="#_troubleshooting_cloudinit_rollouts"></a>Troubleshooting CloudInit Rollouts</h3>
<div class="paragraph">
<p>If an Elemental toolkit cloud-init document does not appear in <code>/oem</code> or does not contain the expected contents, the status block of the CloudInit resource might contain useful hints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"># kubectl get cloudinit CLOUDINIT_NAME -o yaml</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">status:
  rollouts:
    harvester-dngmf:
      conditions:
      - lastTransitionTime: "2024-02-28T22:31:23Z"
        message: ""
        reason: CloudInitApplicable
        status: "True"
        type: Applicable
      - lastTransitionTime: "2024-02-28T22:31:23Z"
        message: Local file checksum is the same as the CloudInit checksum
        reason: CloudInitChecksumMatch
        status: "False"
        type: OutOfSync
      - lastTransitionTime: "2024-02-28T22:31:23Z"
        message: 99_ssh.yaml is present under /oem
        reason: CloudInitPresentOnDisk
        status: "True"
        type: Present</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>harvester-node-manager</code> pod(s) in the <code>harvester-system</code> namespace may also contain some hints as to why it is not rendering a file to a node.
This pod is part of a daemonset, so it may be worth checking the pod that is running on the node of interest.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remote_console"><a class="anchor" href="#_remote_console"></a>Remote Console</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure the URL of the console for remote server management. This console is particularly useful in environments where physical access is limited.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the SUSE Virtualization UI, go to <strong>Hosts</strong>.</p>
</li>
<li>
<p>Locate the target host, and then select <strong>⋮ &#8594; Edit Config</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remote_console_config.png" alt="remote console config">
</div>
</div>
</li>
<li>
<p>Specify the <strong>Console URL</strong>, and then click <strong>Save</strong>.</p>
<div class="paragraph">
<p>Example (with HPE iLO):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remote_console_url.png" alt="remote console url">
</div>
</div>
</li>
<li>
<p>Click <strong>Console</strong> to access the remote server.</p>
<div class="imageblock">
<div class="content">
<img src="../_images/host/remote_console_button.png" alt="remote console button">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../upgrades/troubleshooting.html">Troubleshooting</a></span>
  <span class="next"><a href="witness-node.html">Witness Node</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
