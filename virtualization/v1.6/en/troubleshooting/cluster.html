<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cluster Issues :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/virtualization/v1.5/en/troubleshooting/cluster.html">
    <link rel="prev" href="operating-system.html">
    <link rel="next" href="virtual-machines.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-06-20"/>
<link rel="stylesheet" href="../../../../_/css/search.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>

<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/assets");
</script>    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><!-- Canonical link -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.5/en/troubleshooting/cluster.html" rel="canonical"/>

<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.6/en/troubleshooting/cluster.html" hreflang="x-default" rel="alternate"/>

<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.6/en/troubleshooting/cluster.html" hrefLang="en-US" rel="alternate" />











<shared-header language="en" languages='{
"en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
"de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
"fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
"es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
"zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
"pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="virtualization" data-version="v1.6">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">SUSE® Virtualization</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-ha-cluster.html">Deploy a High-Availability Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-singlenode-cluster.html">Deploy a Single-Node Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/document-conventions.html">Document Conventions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation and Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/requirements.html">Hardware and Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Media</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/net-install.html">Net Install ISO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/install-binaries-mode.html">Install Binaries Only</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Methods</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/iso-install.html">ISO Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/usb-install.html">USB Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/pxe-boot-install.html">PXE Boot Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/configuration-file.html">Configuration File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/update-configuration.html">Update the Configuration After Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/settings.html">Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/cloudinitcrd.html">CloudInit CRD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/post-installation.html">Post-Installation Tasks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/management-address.html">Management Address</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/external-disk.html">External Disk Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/airgap.html">Air-Gapped Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/single-node-clusters.html">Single-Node Clusters</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Upgrades</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/upgrades.html">Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-1-2-to-v1-2-0.html">Upgrade from v1.1.2 to v1.2.0 (not recommended)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-0-to-v1-2-1.html">Upgrade from v1.1.2/v1.1.3/v1.2.0 to v1.2.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-1-to-v1-2-2.html">Upgrade from v1.2.1 to v1.2.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-2-to-v1-3-1.html">Upgrade from v1.2.2/v1.3.0 to v1.3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-1-to-v1-3-2.html">Upgrade from v1.3.1 to v1.3.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-2-to-v1-4-0.html">Upgrade from v1.3.2 to v1.4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-0-to-v1-4-1.html">Upgrade from v1.4.0 to v1.4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-1-to-v1-4-2.html">Upgrade from v1.4.1 to v1.4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-1-to-v1-4-3.html">Upgrade from v1.4.1 or v1.4.2 to v1.4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-0.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-1.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-5-0-to-v1-5-1.html">Upgrade from v1.5.0 to v1.5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Hosts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/hosts.html">Host Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/witness-node.html">Witness Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/vgpu-support.html">vGPU Support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/virtual-machines.html">Virtual Machines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machine Images</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/upload-image.html">Upload Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/custom-suse-images.html">Custom SUSE Virtual Machine Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/image-security.html">Image Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-vm.html">Create a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-windows-vm.html">Create a Windows Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/edit-vm.html">Edit a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/access-vm.html">Access to the Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/clone-vm.html">Clone a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/backup-restore.html">Virtual Machine Backup, Snapshot &amp; Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/live-migration.html">Live Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/hotplug-volume.html">Hot-Plug Volumes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/resource-overcommit.html">Resource Overcommit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/cpu-pinning.html">CPU Pinning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/cpu-memory-hotplug.html">CPU and Memory Hotplug</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Volumes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/create-volume.html">Create a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/edit-volume.html">Edit a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/clone-volume.html">Clone a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/export-volume.html">Export a Volume to Image</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-snapshots.html">Volume Snapshots</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-security.html">Volume Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/storageclass.html">StorageClass</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/csidriver.html">Third-Party Storage Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/longhorn-v2-data-engine.html">Longhorn V2 Data Engine</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Networking</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/cluster-network.html">Cluster Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/vm-network.html">VM Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/deep-dive.html">Networking Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/load-balancer.html">Load Balancer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/ip-pool.html">IP Pool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/storage-network.html">Storage Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/vm-migration-network.html">VM Migration Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/kubeovn-vpc.html">Virtual Private Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/vm-isolation.html">Virtual Machine Isolation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/best-practices.html">Networking Best Practices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/monitoring.html">Monitoring</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Add-ons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/add-ons.html">Add-ons</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/harvester-seeder.html">Harvester Seeder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/kubeovn-operator.html">Kube-OVN Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/lvm-local-storage.html">Local Storage Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/nvidia-driver-toolkit.html">NVIDIA Driver Toolkit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/pcidevices-controller.html">PCI Devices Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/rancher-vcluster.html">Rancher Manager (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-dhcp-controller.html">VM DHCP Controller (Managed DHCP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-import-controller.html">VM Import Controller</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher Integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-integration.html">SUSE Rancher Prime Integration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/virtualization-management.html">Virtualization Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node Driver</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/node-driver.html">Harvester Node Driver</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/rke2-cluster.html">Creating an RKE2 Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/k3s-cluster.html">Creating a K3s Kubernetes Cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/cloud-provider.html">Harvester Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/csi-driver.html">Harvester CSI Driver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/resource-quota.html">Resource Quotas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-terraform-provider.html">Rancher Terraform</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/import-vm.html">Import a Cluster Built on a SUSE® Virtualization VM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/harvester-ui-extension.html">Harvester UI Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/terraform/terraform-provider.html">Terraform Provider</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="operating-system.html">Operating System Issues</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="cluster.html">Cluster Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="virtual-machines.html">Virtual Machine Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="monitoring.html">Monitoring Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rancher.html">Rancher Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Developer Content</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developer/addon-development.html">Add-on Development Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../api.html">API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE® Virtualization</span>
    <span class="version">v1.6 (Dev)</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../admission-controller/1.29/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../admission-controller/1.30/en/introduction.html">1.30-next</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.27/en/introduction.html">1.27</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.26/en/introduction.html">1.26</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.25/en/introduction.html">1.25</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../cluster-api/latest/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../cluster-api/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../continuous-delivery/v0.12/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../os-manager/next/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../os-manager/next/en/index.html">Next</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">latest</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../storage/latest/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../storage/latest/en/longhorn-documentation.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.9/en/longhorn-documentation.html">1.9 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version is-current">
              <a href="../introduction/overview.html">v1.6 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../v1.4/en/introduction/overview.html">v1.4</a>
            </li>
            <li class="version">
              <a href="../../../v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home">Documentation Home</a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/virtualization" title="SUSE Virtualization" aria-label="SUSE Documentation - SUSE Virtualization">
        SUSE Virtualization
      </a>
    </li>
      <li>
          Troubleshooting
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v1.6 (Dev)</button>
  <div class="version-menu">
    <a class="version is-current" href="cluster.html">v1.6 (Dev)</a>
    <a class="version" href="../../../v1.5/en/troubleshooting/cluster.html">v1.5 (Latest)</a>
    <a class="version" href="../../../v1.4/en/troubleshooting/cluster.html">v1.4</a>
    <a class="version" href="../../../v1.3/en/troubleshooting/cluster.html">v1.3</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/harvester-product-docs/edit/main/versions/v1.6/modules/en/pages/troubleshooting/cluster.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:virtualization" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is unreleased documentation for SUSE® Virtualization v1.6 (Dev).</p>
</div>
</td>
</tr>
</table>
</div>
<h1 class="page">Cluster Issues</h1>
<div class="sect1">
<h2 id="_fail_to_deploy_a_multi_node_cluster_due_to_incorrect_http_proxy_setting"><a class="anchor" href="#_fail_to_deploy_a_multi_node_cluster_due_to_incorrect_http_proxy_setting"></a>Fail to Deploy a Multi-node Cluster Due to Incorrect HTTP Proxy Setting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_iso_installation_without_a_configuration_file"><a class="anchor" href="#_iso_installation_without_a_configuration_file"></a>ISO Installation Without a Configuration File</h3>
<div class="sect3">
<h4 id="_configure_http_proxy_during_installation"><a class="anchor" href="#_configure_http_proxy_during_installation"></a>Configure HTTP Proxy During Installation</h4>
<div class="paragraph">
<p>In some environments, you configure <a href="../installation-setup/airgap.html#_configure_an_http_proxy_during_installation" class="xref page">http-proxy</a> of <a href="../installation-setup/config/configuration-file.html#_os_environment" class="xref page">OS Environment</a> during installation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_http_proxy_after_first_node_is_ready"><a class="anchor" href="#_configure_http_proxy_after_first_node_is_ready"></a>Configure HTTP Proxy After First Node is Ready</h4>
<div class="paragraph">
<p>After the first node is installed successfully, you login into the UI to configure <a href="../installation-setup/airgap.html#_configure_an_http_proxy" class="xref page">http-proxy</a> of <a href="../installation-setup/config/configuration-file.html#_system_settings" class="xref page">System Settings</a>.</p>
</div>
<div class="paragraph">
<p>Then you continue to add more nodes to the cluster.</p>
</div>
</div>
<div class="sect3">
<h4 id="_one_node_becomes_unavailable"><a class="anchor" href="#_one_node_becomes_unavailable"></a>One Node Becomes Unavailable</h4>
<div class="paragraph">
<p>The issue you may encounter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The first node is installed successfully.

The second node is installed successfully.

The third node is installed successfully.

Then the second node changes to Unavialable state and cannot recover automatically.</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_solution"><a class="anchor" href="#_solution"></a>Solution</h4>
<div class="paragraph">
<p>If the nodes in the cluster do not use the HTTP Proxy to communicate with each other after the first node is installed successfully, you need to configure <a href="../installation-setup/airgap.html#_configure_an_http_proxy" class="xref page">http-proxy.noProxy</a> against the CIDR used by those nodes.</p>
</div>
<div class="paragraph">
<p>For example, your cluster assigns IPs from CIDR <code>172.26.50.128/27</code> to nodes via DHCP/static setting, please add this CIDR to <code>noProxy</code>.</p>
</div>
<div class="paragraph">
<p>After setting this, you can continue to add new nodes to the cluster.</p>
</div>
<div class="paragraph">
<p>For more details, please refer to <a href="https://github.com/harvester/harvester/issues/3091">issue 3091</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_iso_installation_with_a_configuration_file"><a class="anchor" href="#_iso_installation_with_a_configuration_file"></a>ISO Installation With a Configuration File</h3>
<div class="paragraph">
<p>When a configuration file is used in ISO installation, please configure proper <code>http-proxy</code> in <a href="../installation-setup/config/configuration-file.html#_system_settings" class="xref page">System Settings</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pxe_boot_installation"><a class="anchor" href="#_pxe_boot_installation"></a>PXE Boot Installation</h3>
<div class="paragraph">
<p>When <a href="../installation-setup/methods/pxe-boot-install.html" class="xref page">PXE Boot Installation</a> is adopted, please configure proper <code>http-proxy</code> in <a href="../installation-setup/config/configuration-file.html#_os_environment" class="xref page">OS Environment</a> and <a href="../installation-setup/config/configuration-file.html#_system_settings" class="xref page">System Settings</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_generate_a_support_bundle"><a class="anchor" href="#_generate_a_support_bundle"></a>Generate a Support Bundle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Users can generate a support bundle in the UI with the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <code>Support</code> link at the bottom-left of the UI.
<span class="image"><img src="../_images/troubleshooting/harvester-sb-support-link.png" alt="harvester sb support link"></span></p>
</li>
<li>
<p>Click <code>Generate Support Bundle</code> button.
<span class="image"><img src="../_images/troubleshooting/harvester-sb-support-button.png" alt="harvester sb support button"></span></p>
</li>
<li>
<p>Enter a useful description for the support bundle and click <code>Create</code> to generate and download a support bundle.
<span class="image"><img src="../_images/troubleshooting/harvester-sb-support-modal.png" alt="harvester sb support modal"></span></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Whenever you encounter an issue that may be related to workloads deployed in custom namespaces, configure the <a href="../installation-setup/config/settings.html#_support_bundle_namespaces" class="xref page">support-bundle-namespaces</a> setting to include those namespaces as data sources. The support bundle only collects data from the configured namespaces.</p>
</div>
<div class="paragraph">
<p>For timeout errors, you can adjust the value of the <a href="../installation-setup/config/settings.html#_support_bundle_timeout" class="xref page">support-bundle-timeout</a> setting and then restart the support bundle generation process.</p>
</div>
<div class="paragraph">
<p>If you intend to use a non-default container image, you can configure the <a href="../installation-setup/config/settings.html#_support_bundle_image" class="xref page">support-bundle-image</a> setting.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For information about collecting guest cluster logs and configuration files, see <a href="rancher.html#_guest_cluster_log_collection" class="xref page">Guest Cluster Log Collection</a>.</p>
</div>
<div class="sect2">
<h3 id="_manually_download_and_retain_a_support_bundle_file"><a class="anchor" href="#_manually_download_and_retain_a_support_bundle_file"></a>Manually Download and Retain a Support Bundle File</h3>
<div class="paragraph">
<p>By default, a support bundle file is automatically generated, downloaded, and deleted after you click <strong>Create</strong> on the UI. However, you may want to retain a file for various reasons, including the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You are unable to download the file because of network connectivity errors and other issues.</p>
</li>
<li>
<p>You must use a previously generated file to troubleshoot issues (because generating a support bundle file takes time).</p>
</li>
<li>
<p>You want to view information that only exists in a previously generated file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Even if the file remains in the cluster, the UI does not provide a download link. Use the following workaround to generate, manually download, and retain a support bundle file:</p>
</div>
<div class="sect3">
<h4 id="_generate_the_file_and_prevent_automatic_downloading"><a class="anchor" href="#_generate_the_file_and_prevent_automatic_downloading"></a>Generate the File and Prevent Automatic Downloading</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the UI, click <strong>Generate Support Bundle</strong>.</p>
</li>
<li>
<p>When the progress indicator reaches 20% to 80%, close the browser tab to prevent automatic downloading of the generated file.</p>
</li>
<li>
<p>Retrieve a list of all support bundles in all namespaces using kubectl.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> $ kubectl get supportbundle -A
 NAMESPACE          NAME           ISSUE_URL   DESCRIPTION   AGE
 harvester-system   bundle-htl5f               sp1           3h43m</pre>
</div>
</div>
</li>
<li>
<p>Retrieve the details of all existing support bundles using the command <code>kubectl get supportbundle -A -o yaml</code>.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> $ kubectl get supportbundle -A -oyaml
 apiVersion: v1
 items:
 - apiVersion: harvesterhci.io/v1beta1
   kind: SupportBundle
   metadata:
     creationTimestamp: "2024-02-02T11:18:09Z"
     generation: 5
     name: bundle-htl5f  // resource name
     namespace: harvester-system
     resourceVersion: "1218311"
     uid: a3776373-05fe-4584-8a9a-baac3fa91bbf
   spec:
     description: sp1
     issueURL: ""
   status:
     conditions:
     - lastUpdateTime: "2024-02-02T11:18:38Z"
       status: "True"
       type: Initialized
     filename: supportbundle_db25ccb6-b52a-4f9d-97dd-db2df2b004d4_2024-02-02T11-18-10Z.zip  // support bundle file name
     filesize: 8868712
     progress: 100  // 100 means successfully generated
     state: ready</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The file is ready for downloading when the value of <code>progress</code> is "100" and the value of <code>state</code> is "ready".</p>
</div>
</div>
<div class="sect3">
<h4 id="_download_the_file"><a class="anchor" href="#_download_the_file"></a>Download the File</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a download URL that includes the following information:</p>
<div class="ulist">
<ul>
<li>
<p><a href="../installation-setup/management-address.html" class="xref page">VIP</a> or DNS name</p>
</li>
<li>
<p>Resource name of the file</p>
</li>
<li>
<p>Parameter <code>?retain=true</code>: If you do not include this parameter, resources related to the support bundle are automatically deleted after the file is successfully downloaded.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>+
<code><a href="https://{vip/dns-name}/v1/harvester/supportbundles/bundle-htl5f/download?retain=true" class="bare">https://{vip/dns-name}/v1/harvester/supportbundles/bundle-htl5f/download?retain=true</a></code></p>
</div>
</li>
<li>
<p>Download the file using either a command-line tool (for example, curl and wget) or a web browser.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>curl -k <a href="https://{vip/dns-name}/v1/harvester/supportbundles/bundle-htl5f/download?retain=true" class="bare">https://{vip/dns-name}/v1/harvester/supportbundles/bundle-htl5f/download?retain=true</a> -o sb2.zip</code></p>
</div>
</li>
<li>
<p>Verify that resources related to the support bundle were not deleted.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> $ kubectl get supportbundle -A
 NAMESPACE          NAME           ISSUE_URL   DESCRIPTION   AGE
 harvester-system   bundle-htl5f               sp1           3h43m</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_optional_delete_the_related_resources"><a class="anchor" href="#_optional_delete_the_related_resources"></a>(Optional) Delete the Related Resources</h4>
<div class="paragraph">
<p>Retained support bundle files consume memory and storage resources. Each file is backed by a <code>supportbundle-manager-bundle*</code> pod in the <code>harvester-system</code> namespace, and the generated ZIP file is stored in the <code>/tmp</code> folder of the pod&#8217;s memory-based filesystem.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kubectl get pods -n harvester-system
NAME                                                    READY   STATUS    RESTARTS       AGE
supportbundle-manager-bundle-dtl2k-69dcc69b59-w64vl     1/1     Running   0              8m18s</pre>
</div>
</div>
<div class="paragraph">
<p>You can delete the related resources using the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manual: Run the command <code>kubectl delete supportbundle -n {namespace} {resource-name}</code>. Deleting a support bundle object automatically deletes the pod that backs it.</p>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  $ kubectl delete supportbundle -n harvester-system bundle-htl5f
  supportbundle.harvesterhci.io "bundle-htl5f" deleted

  $ kubectl get supportbundle -A
  No resources found</pre>
</div>
</div>
</li>
<li>
<p>Automatic: The related resources are deleted based on how the following settings are configured:</p>
<div class="ulist">
<ul>
<li>
<p><a href="../installation-setup/config/settings.html#_support_bundle_expiration" class="xref page">support-bundle-expiration</a>: Defines the time allowed for retaining a support bundle file</p>
</li>
<li>
<p><a href="../installation-setup/config/settings.html#_support_bundle_timeout" class="xref page">support-bundle-timeout</a>: Defines the time allowed for generating a support bundle file</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manually_copy_the_support_bundle_file"><a class="anchor" href="#_manually_copy_the_support_bundle_file"></a>Manually Copy the Support Bundle File</h3>
<div class="paragraph">
<p>You can run the command <code>kubectl cp</code> to copy the generated file from the backing pod.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl cp harvester-system/supportbundle-manager-bundle-dtl2k-69dcc69b59-w64vl:/tmp/support-bundle-kit/supportbundle_db25ccb6-b52a-4f9d-97dd-db2df2b004d4_2024-02-02T11-18-10Z.zip bundle.zip</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manually_collect_data_for_the_support_bundle"><a class="anchor" href="#_manually_collect_data_for_the_support_bundle"></a>Manually Collect Data for the Support Bundle</h3>
<div class="paragraph">
<p>Harvester is unable to collect data and generate a support bundle when the node is inaccessible or not ready. The workaround is to run a script and compress the generated files.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Prepare the environment.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">    mkdir -p /tmp/support-bundle # ensure /tmp/support-bundle exists
    echo 'JOURNALCTL="/usr/bin/journalctl -o short-precise"' &gt; /tmp/common
    export SUPPORT_BUNDLE_NODE_NAME=$(hostname)</code></pre>
</div>
</div>
</li>
<li>
<p>Run the following commands:</p>
<div class="ulist">
<ul>
<li>
<p>Download the script: <code>curl -o collector-harvester <a href="https://raw.githubusercontent.com/rancher/support-bundle-kit/refs/heads/master/hack/collector-harvester" class="bare">https://raw.githubusercontent.com/rancher/support-bundle-kit/refs/heads/master/hack/collector-harvester</a></code></p>
</li>
<li>
<p>Add executable permissions: <code>chmod +x collector-harvester</code></p>
</li>
<li>
<p>Run the script: <code>./collector-harvester / /tmp/support-bundle</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Compress the files in <code>/tmp/support-bundle</code>, and then attach the archive to the related issue.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_known_limitations"><a class="anchor" href="#_known_limitations"></a>Known Limitations</h3>
<div class="ulist">
<ul>
<li>
<p>Replacing the backing pod prevents the support bundle file from being downloaded.</p>
<div class="paragraph">
<p>The support bundle file is stored in the <code>/tmp</code> folder of the pod&#8217;s memory-based filesystem so it is removed when the pod is replaced during cluster and node rebooting, Kubernetes pod rescheduling, and other processes. After starting, the new pod regenerates the file but assigns a name that is different from the file name in the support bundle object.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A support bundle file is generated and retained.</p>
<div class="listingblock">
<div class="content">
<pre> $ kubectl get supportbundle -A -oyaml
 apiVersion: v1
 items:
 - apiVersion: harvesterhci.io/v1beta1
   kind: SupportBundle
   metadata:
     creationTimestamp: "2024-02-06T11:01:19Z"
     generation: 5
     name: bundle-yr2vq
     namespace: harvester-system
     resourceVersion: "1583252"
     uid: eb8538cf-886b-4791-a7b0-dbc34dcee524
   spec:
     description: sp2
     issueURL: ""
   status:
     conditions:
     - lastUpdateTime: "2024-02-06T11:01:47Z"
       status: "True"
       type: Initialized
     filename: supportbundle_db25ccb6-b52a-4f9d-97dd-db2df2b004d4_2024-02-06T11-01-20Z.zip // file is ready to download
     filesize: 7832010
     progress: 100
     state: ready
 kind: List
 metadata:
   resourceVersion: ""</pre>
</div>
</div>
</li>
<li>
<p>The backing pod restarts.</p>
<div class="listingblock">
<div class="content">
<pre> $ kubectl get pods -n harvester-system supportbundle-manager-bundle-yr2vq-c5484fbdf-9pz8d -oyaml
 apiVersion: v1
 kind: Pod
 metadata:
 ...
   labels:
     app: support-bundle-manager
     pod-template-hash: c5484fbdf
     rancher/supportbundle: bundle-yr2vq
   name: supportbundle-manager-bundle-yr2vq-c5484fbdf-9pz8d
   namespace: harvester-system

   containerStatuses:
   - containerID: containerd://ea82b63875c18a2b5b36afea6a47a99a5efd26464f94d401cde1727d175ef740
     ...
     name: manager
     ready: true
     restartCount: 1
     started: true
     state:
       running:
         startedAt: "2024-02-06T11:05:33Z" // pod's latest starting timestamp, newer than the timestamp in support bundle's file name</pre>
</div>
</div>
</li>
<li>
<p>The backing pod regenerates the file after it starts.</p>
<div class="paragraph">
<p>The name of the regenerated file is different from the file name recorded in the support bundle object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre> $ kubectl exec -i -t -n harvester-system supportbundle-manager-bundle-yr2vq-c5484fbdf-9pz8d -- ls /tmp/support-bundle-kit -alth
 total 2.2M
 drwxr-xr-x 3 root root 4.0K Feb  6 11:05 .
 -rw-r--r-- 1 root root 2.2M Feb  6 11:05 supportbundle_db25ccb6-b52a-4f9d-97dd-db2df2b004d4_2024-02-06T11-05-34Z.zip // different with above file name</pre>
</div>
</div>
</li>
<li>
<p>Attempts to download the regenerated file fail.</p>
<div class="paragraph">
<p>The following download URL cannot be used to access the regenerated file.</p>
</div>
<div class="paragraph">
<p><code><a href="https://{vip/dns-name}/v1/harvester/supportbundles/bundle-yr2vq/download?retain=true" class="bare">https://{vip/dns-name}/v1/harvester/supportbundles/bundle-yr2vq/download?retain=true</a></code>.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Retained support bundle files may affect system and node rebooting, node draining, and system upgrades.</p>
<div class="paragraph">
<p>Retained support bundle files are backed by pods in the <code>harvester-system</code> namespace. These pods are replaced during system and node rebooting, node draining, and system upgrades, consuming CPU and memory resources. Moreover, the regenerated files are very similar in content to the retained files, which means that storage resources are also unnecessarily consumed.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://github.com/harvester/harvester/issues/3383">Issue 3383</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_embedded_rancher_and_longhorn_dashboards"><a class="anchor" href="#_access_embedded_rancher_and_longhorn_dashboards"></a>Access Embedded Rancher and Longhorn Dashboards</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can now access the embedded Rancher and Longhorn dashboards directly on the <code>Support</code> page, but you must first go to the <code>Preferences</code> page and check the <code>Enable Extension developer features</code> box under <code>Advanced Features</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/troubleshooting/support-access-embedded-ui.png" alt="support access embedded ui">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We only support using the embedded Rancher and Longhorn dashboards for debugging and validation purposes.
For Rancher&#8217;s multi-cluster and multi-tenant integration, please refer to the docs <a href="../integrations/rancher/rancher-integration.html" class="xref page">here</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_i_cant_access_suse_virtualization_after_i_changed_ssltls_enabled_protocols_and_ciphers"><a class="anchor" href="#_i_cant_access_suse_virtualization_after_i_changed_ssltls_enabled_protocols_and_ciphers"></a>I can&#8217;t access SUSE® Virtualization after I changed SSL/TLS enabled protocols and ciphers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you changed
<a href="../installation-setup/config/settings.html#_ssl_parameters" class="xref page">SSL/TLS enabled protocols and ciphers settings</a>
and you no longer have access to the UI and API,
it&#8217;s highly possible that NGINX Ingress Controller has stopped working due to the misconfigured SSL/TLS protocols and ciphers.
Follow these steps to reset the setting:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Following <a href="faq.html" class="xref page">FAQ</a> to SSH into the node and switch to <code>root</code> user.</p>
<div class="literalblock">
<div class="content">
<pre>$ sudo -s</pre>
</div>
</div>
</li>
<li>
<p>Editing setting <code>ssl-parameters</code> manually using <code>kubectl</code>:</p>
<div class="listingblock">
<div class="content">
<pre># kubectl edit settings ssl-parameters</pre>
</div>
</div>
</li>
<li>
<p>Deleting the line <code>value: ...</code> so that NGINX Ingress Controller
will use the default protocols and ciphers.</p>
<div class="listingblock">
<div class="content">
<pre>apiVersion: harvesterhci.io/v1beta1
default: '{}'
kind: Setting
metadata:
  name: ssl-parameters
...
value: '{"protocols":"TLS99","ciphers":"WRONG_CIPHER"}' # &lt;- Delete this line</pre>
</div>
</div>
</li>
<li>
<p>Save the change and you should see the following response after exit from the editor:</p>
<div class="listingblock">
<div class="content">
<pre>setting.harvesterhci.io/ssl-parameters edited</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can further check the logs of Pod <code>rke2-ingress-nginx-controller</code> to see if NGINX Ingress Controller is working correctly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_network_interfaces_are_not_showing_up"><a class="anchor" href="#_network_interfaces_are_not_showing_up"></a>Network interfaces are not showing up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may need help finding the correct interface with a 10G uplink since the interface is not showing up. The uplink doesn&#8217;t show up when the ixgbe module fails to load because an unsupported SFP+ module type is detected.</p>
</div>
<div class="sect2">
<h3 id="_how_to_identify_the_issue_with_the_unsupported_sfp"><a class="anchor" href="#_how_to_identify_the_issue_with_the_unsupported_sfp"></a>How to identify the issue with the unsupported SFP?</h3>
<div class="paragraph">
<p>Execute the command <code>lspci | grep -i net</code> to see the number of NIC ports connected to the motherboard. By running the command <code>ip a</code>, you can gather information about the detected interfaces. If the number of detected interfaces is less than the number of identified NIC ports, then it&#8217;s likely that the problem arises from using an unsupported SFP+ module.</p>
</div>
<div class="sect3">
<h4 id="_testing"><a class="anchor" href="#_testing"></a>Testing</h4>
<div class="paragraph">
<p>You can perform a simple test to verify whether the unsupported SFP+ is the cause. Follow these steps on a running node:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the file <code>/etc/modprobe.d/ixgbe.conf</code> manually with the content:</p>
<div class="listingblock">
<div class="content">
<pre>options ixgbe allow_unsupported_sfp=1</pre>
</div>
</div>
</li>
<li>
<p>Then run following command:</p>
<div class="listingblock">
<div class="content">
<pre>rmmod ixgbe &amp;&amp; modprobe ixgbe</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the above steps are successful and the missing interface shows, we can confirm that the issue is an unsupported SFP+. However, the above test is not permanent and will be flushed out once rebooted.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solution_2"><a class="anchor" href="#_solution_2"></a>Solution</h3>
<div class="paragraph">
<p>Due to support issues, Intel restricts the types of SFPs used on their NICs. To make the above changes persistent, adding the following content to a <a href="../installation-setup/config/configuration-file.html" class="xref page">config.yaml</a> during installation is recommended.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-YAML hljs" data-lang="YAML">os:
  write_files:
  - content: |
     options ixgbe allow_unsupported_sfp=1
    path: /etc/modprobe.d/ixgbe.conf
  - content: |
      name: "reload ixgbe module"
      stages:
        boot:
          - commands:
            - rmmod ixgbe &amp;&amp; modprobe ixgbe
    path: /oem/99_ixgbe.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="operating-system.html">Operating System Issues</a></span>
  <span class="next"><a href="virtual-machines.html">Virtual Machine Issues</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
