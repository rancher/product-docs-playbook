<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Virtual Private Cloud :: Rancher product documentation</title>
    <link rel="prev" href="vm-migration-network.html">
    <link rel="next" href="vm-isolation.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-09-15"/>
<link rel="stylesheet" href="../../../../_/css/search.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>

<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/assets");
</script>    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><!-- Canonical link -->
<link href="" rel="canonical"/>

<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.6/en/networking/kubeovn-vpc.html" hreflang="x-default" rel="alternate"/>

<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/virtualization/v1.6/en/networking/kubeovn-vpc.html" hrefLang="en-US" rel="alternate" />











<shared-header language="en" languages='{
"en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
"de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
"fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
"es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
"zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
"pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="virtualization" data-version="v1.6">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">SUSE® Virtualization</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-ha-cluster.html">Deploy a High-Availability Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/deploy-singlenode-cluster.html">Deploy a Single-Node Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/document-conventions.html">Document Conventions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation and Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/requirements.html">Hardware and Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Media</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/net-install.html">Net Install ISO</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/media/install-binaries-mode.html">Install Binaries Only</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation Methods</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/iso-install.html">ISO Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/usb-install.html">USB Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/methods/pxe-boot-install.html">PXE Boot Installation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/configuration-file.html">Configuration File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/update-configuration.html">Update the Configuration After Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/settings.html">Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installation-setup/config/cloudinitcrd.html">CloudInit CRD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/post-installation.html">Post-Installation Tasks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/management-address.html">Management Address</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/external-disk.html">External Disk Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/airgap.html">Air-Gapped Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation-setup/single-node-clusters.html">Single-Node Clusters</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Upgrades</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/upgrades.html">Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-1-2-to-v1-2-0.html">Upgrade from v1.1.2 to v1.2.0 (not recommended)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-0-to-v1-2-1.html">Upgrade from v1.1.2/v1.1.3/v1.2.0 to v1.2.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-1-to-v1-2-2.html">Upgrade from v1.2.1 to v1.2.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-2-2-to-v1-3-1.html">Upgrade from v1.2.2/v1.3.0 to v1.3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-1-to-v1-3-2.html">Upgrade from v1.3.1 to v1.3.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-3-2-to-v1-4-0.html">Upgrade from v1.3.2 to v1.4.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-0-to-v1-4-1.html">Upgrade from v1.4.0 to v1.4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-1-to-v1-4-2.html">Upgrade from v1.4.1 to v1.4.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-1-to-v1-4-3.html">Upgrade from v1.4.1 or v1.4.2 to v1.4.3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-0.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-4-2-to-v1-5-1.html">Upgrade from v1.4.2 or v1.4.3 to v1.5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/v1-5-0-to-v1-5-1.html">Upgrade from v1.5.0 to v1.5.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Hosts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/hosts.html">Host Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/witness-node.html">Witness Node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hosts/vgpu-support.html">vGPU Support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machines</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/virtual-machines.html">Virtual Machines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Virtual Machine Images</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/upload-image.html">Upload Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/custom-suse-images.html">Custom SUSE Virtual Machine Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../virtual-machines/vm-images/image-security.html">Image Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-vm.html">Create a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/create-windows-vm.html">Create a Windows Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/edit-vm.html">Edit a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/access-vm.html">Access to the Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/clone-vm.html">Clone a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/backup-restore.html">Virtual Machine Backup, Snapshot &amp; Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/live-migration.html">Live Migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/hotplug-volume.html">Hot-Plug Volumes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/resource-overcommit.html">Resource Overcommit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/cpu-pinning.html">CPU Pinning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../virtual-machines/cpu-memory-hotplug.html">CPU and Memory Hotplug</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Storage</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Volumes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/create-volume.html">Create a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/edit-volume.html">Edit a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/clone-volume.html">Clone a Volume</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/export-volume.html">Export a Volume to Image</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-snapshots.html">Volume Snapshots</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../storage/volumes/volume-security.html">Volume Security</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/storageclass.html">StorageClass</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/csidriver.html">Third-Party Storage Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/longhorn-v2-data-engine.html">Longhorn V2 Data Engine</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Networking</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cluster-network.html">Cluster Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vm-network.html">VM Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deep-dive.html">Networking Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="load-balancer.html">Load Balancer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ip-pool.html">IP Pool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="storage-network.html">Storage Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vm-migration-network.html">VM Migration Network</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="kubeovn-vpc.html">Virtual Private Cloud</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="vm-isolation.html">Virtual Machine Isolation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices.html">Networking Best Practices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../observability/monitoring.html">Monitoring</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Add-ons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/add-ons.html">Add-ons</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/harvester-seeder.html">Harvester Seeder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/kubeovn-operator.html">Kube-OVN Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/lvm-local-storage.html">Local Storage Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/nvidia-driver-toolkit.html">NVIDIA Driver Toolkit</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/pcidevices-controller.html">PCI Devices Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/rancher-vcluster.html">Rancher Manager (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-dhcp-controller.html">VM DHCP Controller (Managed DHCP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../add-ons/vm-import-controller.html">VM Import Controller</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher Integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-integration.html">SUSE Rancher Prime Integration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/virtualization-management.html">Virtualization Management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node Driver</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/node-driver.html">Harvester Node Driver</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/rke2-cluster.html">Creating an RKE2 Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../integrations/rancher/node-driver/k3s-cluster.html">Creating a K3s Kubernetes Cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/cloud-provider.html">Harvester Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/csi-driver.html">Harvester CSI Driver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/resource-quota.html">Resource Quotas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/rancher-terraform-provider.html">Rancher Terraform</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/import-vm.html">Import a Cluster Built on a SUSE® Virtualization VM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrations/rancher/harvester-ui-extension.html">Harvester UI Extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrations/terraform/terraform-provider.html">Terraform Provider</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/installation.html">Installation Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/operating-system.html">Operating System Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/cluster.html">Cluster Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/virtual-machines.html">Virtual Machine Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/monitoring.html">Monitoring Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting/rancher.html">Rancher Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Developer Content</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developer/addon-development.html">Add-on Development Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../api.html">API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE® Virtualization</span>
    <span class="version">v1.6 (Dev)</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../admission-controller/1.29/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../admission-controller/1.30/en/introduction.html">1.30-next</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.27/en/introduction.html">1.27</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.26/en/introduction.html">1.26</a>
            </li>
            <li class="version">
              <a href="../../../../admission-controller/1.25/en/introduction.html">1.25</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../cluster-api/latest/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../cluster-api/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../continuous-delivery/v0.12/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../os-manager/next/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../os-manager/next/en/index.html">Next</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">latest</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../storage/latest/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../storage/latest/en/longhorn-documentation.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.9/en/longhorn-documentation.html">1.9 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version is-current">
              <a href="../introduction/overview.html">v1.6 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../v1.4/en/introduction/overview.html">v1.4</a>
            </li>
            <li class="version">
              <a href="../../../v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home">Documentation Home</a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/virtualization" title="SUSE Virtualization" aria-label="SUSE Documentation - SUSE Virtualization">
        SUSE Virtualization
      </a>
    </li>
      <li>
          Networking
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v1.6 (Dev)</button>
  <div class="version-menu">
    <a class="version is-current" href="kubeovn-vpc.html">v1.6 (Dev)</a>
    <a class="version is-missing" href="../../../v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
    <a class="version is-missing" href="../../../v1.4/en/introduction/overview.html">v1.4</a>
    <a class="version is-missing" href="../../../v1.3/en/introduction/overview.html">v1.3</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/harvester-product-docs/edit/main/versions/v1.6/modules/en/pages/networking/kubeovn-vpc.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:virtualization" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is unreleased documentation for SUSE® Virtualization v1.6 (Dev).</p>
</div>
</td>
</tr>
</table>
</div>
<h1 class="page">Virtual Private Cloud</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A virtual private cloud (VPC) is a logically isolated network that provides full control over IP addresses, subnets, route tables, firewalls, and gateways within a cloud infrastructure. VPCs allow the secure and scalable deployment of virtualized resources such as compute, storage, and container services.</p>
</div>
<div class="paragraph">
<p>The following table outlines the key components of a VPC:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Top-level network space with a user-defined IP CIDR range</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subdivision of the VPC IP space; can be public or private</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">route table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines traffic routing rules within and outside the VPC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">internet gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables outbound internet access for public subnets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NAT gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows private subnets to access the internet (outbound only)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">security group</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual firewall that controls inbound and outbound traffic per instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VPC peering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional peering or hybrid connections between different VPCs or on-premises networks</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_suse_virtualization_and_kube_ovn_integration_architecture"><a class="anchor" href="#_suse_virtualization_and_kube_ovn_integration_architecture"></a>SUSE Virtualization and Kube-OVN integration architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following diagram illustrates how VPCs, subnets, overlay networks, and virtual machines are logically connected in SUSE Virtualization with Kube-OVN. This architecture includes public and private subnets, allowing separation of internet-facing traffic from internal resources. Moreover, this architecture enables scalable, isolated L3 and L2 network structures across the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>                                 [ VPC: vpc-1 ]
                                        │
                  ┌─────────────────────┴─────────────────────┐
                  │                                           │
     [ Subnet: vswitch1-subnet ]                 [ Subnet: vswitch2-subnet ]
       CIDR: 172.20.10.0/24                          CIDR: 172.20.20.0/24
       Gateway: 172.20.10.1                          Gateway: 172.20.20.1
                  │                                           │
     [ Overlay Network: vswitch1 ]               [ Overlay Network: vswitch2 ]
                  │                                           │
         ┌────────┴────────┐                         ┌────────┴────────┐
         │                 │                         │                 │
[VM: vm1-vswitch1] [VM: vm2-vswitch1]                [VM: vm1-vswitch2]
IP: 172.20.10.X     IP: 172.20.10.Y                    IP: 172.20.20.Z</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Logical Responsibility</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_vpc_settings">VPC</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kube-OVN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Top-level L3 domain, manages subnet groupings</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#_subnet_settings">subnet</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kube-OVN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDR assignment, routing, gateway, firewall rules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="vm-network.html#_overlay_network_experimental" class="xref page">overlay network</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUSE Virtualization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L2 virtual switch (OVS bridge), mapped to subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../virtual-machines/virtual-machines.html" class="xref page">virtual machine</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUSE Virtualization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runs compute workloads, connected to overlay network</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This architecture has the following key characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kube-OVN creates the VPC and its subnets.</p>
<div class="paragraph">
<p>Each subnet includes a CIDR and gateway IP, and binds to an overlay network (as provider). Kube-OVN enforces a one-to-one mapping between the subnet and the overlay network to avoid ambiguous routing, traffic collisions, and isolation issues.</p>
</div>
</li>
<li>
<p>SUSE Virtualization defines the overlay networks.</p>
<div class="paragraph">
<p>Each overlay network is considered a provider in Kube-OVN. When you create a subnet on the SUSE Virtualization UI, you can select these overlay networks in the <strong>Provider</strong> list (type: <code>OverlayNetwork</code>) on the <strong>Subnet:Create</strong> screen.</p>
</div>
</li>
<li>
<p>SUSE Virtualization provisions virtual machines that are connected to an overlay network.</p>
<div class="paragraph">
<p>Each virtual machine uses the Kube-OVN IPAM to request an IP address after booting. The virtual machine receives its IP address, gateway, and routing information from the associated subnet.</p>
</div>
</li>
<li>
<p>Kube-OVN handles all L3 logic (routing, NAT, VPC peering, and isolation).</p>
<div class="paragraph">
<p>SUSE Virtualization focuses purely on compute and network attachment. Network policy enforcement, private subnets, and NAT egress are managed by Kube-OVN.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This architecture offers the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clear separation of concerns: SUSE Virtualization handles virtualization; Kube-OVN handles SDN</p>
</li>
<li>
<p>Scalability: New VPCs, subnets, and peering don&#8217;t require changes in SUSE Virtualization core</p>
</li>
<li>
<p>Kubernetes-native networking: Kube-OVN integrates tightly with Kubernetes, supporting CRDs, policies, etc.</p>
</li>
<li>
<p>Isolation and observability: Centralized control over IPs, ACLs, and routing through Kube-OVN</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vpc_and_subnet_configuration"><a class="anchor" href="#_vpc_and_subnet_configuration"></a>VPC and subnet configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_vpc_settings"><a class="anchor" href="#_vpc_settings"></a>VPC settings</h3>
<div class="paragraph">
<p>In SUSE Virtualization, a virtual private cloud (VPC) is a logical network container that helps manage and isolate subnets and traffic. It defines routing, NAT, and network segmentation.</p>
</div>
<div class="paragraph">
<p>SUSE Virtualization provides a default VPC named <code>ovn-cluster</code>, and two associated subnets named <code>ovn-default</code> and <code>join</code> for internal Kube-OVN operations. You can create additional VPCs by clicking <strong>Create</strong> on the <strong>Virtual Private Cloud</strong> screen.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/default_vpc_and_subnet.png" alt="Default VPC and subnet">
</div>
</div>
<div class="paragraph">
<p>When creating custom VPCs, you must configure settings related to the routes defined for directing traffic and connections that enable communication between the local and remote VPCs. The following table outlines the settings on the <strong>Virtual Private Cloud</strong> details screen:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Section</th>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">General information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the VPC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">General information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the VPC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Static Routes</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CIDR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destination IP address range for the route (for example, <code>192.168.1.0/24</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Static Routes</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Next Hop IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address to which traffic for the CIDR should be forwarded (for example, the gateway or router IP address)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VPC Peerings</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local Connect IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address on the local VPC to be used for the peering connection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VPC Peerings</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remote VPC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target remote VPC that is peered with the local VPC</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/create_vpc.png" alt="Creating a VPC">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_subnet_settings"><a class="anchor" href="#_subnet_settings"></a>Subnet settings</h3>
<div class="paragraph">
<p>Each subnet defines a CIDR block and gateway, and is mapped to a SUSE Virtualization <a href="vm-network.html#_overlay_network_experimental" class="xref page">overlay network</a> (virtual switch). It also includes controls for NAT and <a href="vm-isolation.html#_subnet_acls" class="xref page">access rules</a>.</p>
</div>
<div class="paragraph">
<p>When creating subnets, you must configure settings that are relevant to your use case. In most cases, you can get started by just configuring the <strong>CIDR Block</strong>, <strong>Gateway</strong>, and <strong>Provider</strong>. The following table outlines the settings on the <strong>Subnet</strong> details screen:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Section</th>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">General information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">General information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CIDR Block</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address range assigned to the subnet (for example, <code>172.20.10.0/24</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Protocol</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network protocol version used for this subnet (IPv4 or IPv6)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Provider</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overlay network (virtual switch) to which the subnet is bound</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Virtual Private Cloud</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual private cloud that the subnet belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Gateway</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address that acts as the default gateway for virtual machines in the subnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Private Subnet</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setting that restricts access to the subnet and ensures network isolation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Allow Subnets</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIDRs that are allowed to access the subnet when <strong>Private Subnet</strong> is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Basic</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Exclude IPs</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of IP addresses that should not be automatically assigned to virtual machines</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/create_subnet.png" alt="Creating a subnet">
</div>
</div>
<div class="paragraph">
<p>Each created subnet has a setting called &lt;&lt;`natOutgoing` setting,<code>natOutgoing</code>&gt;&gt;, which enables network address translation (NAT) for traffic leaving the subnet and going to destinations outside the VPC. This setting is disabled by default. To enable it, you must edit the subnet&#8217;s YAML configuration and set the value to <code>natOutgoing: true</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/customize_nat_outgoing.png" alt="natOutgoing setting enabled">
</div>
</div>
<div class="paragraph">
<p>By default, subnets in different VPCs are unable to communicate directly. To enable secure and controlled communication between them, you must establish a <a href="#_vpc_peering">VPC peering</a> connection. Without it, subnet traffic in each VPC remains completely isolated.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>VPC peering connections can only be established between custom VPCs.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/vpcpeer.png" alt="VPC peering">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_vpc"><a class="anchor" href="#_creating_a_vpc"></a>Creating a VPC</h3>
<div class="paragraph">
<p>Perform the following steps to create and configure a VPC.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable <a href="../add-ons/kubeovn-operator.html" class="xref page">kubeovn-operator</a>.</p>
<div class="paragraph">
<p>The kubeovn-operator add-on deploys Kube-OVN to the SUSE Virtualization cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/networking/kubeovn-operator.png" alt="Kube-OVN Operator add-on">
</div>
</div>
</li>
<li>
<p><a href="vm-network.html#_creating_an_overlay_network" class="xref page">Create overlay networks</a>.</p>
<div class="paragraph">
<p>You must create a separate overlay network for each subnet that you plan to create.</p>
</div>
</li>
<li>
<p>Create a VPC.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to <strong>Networks &#8594; Virtual Private Cloud</strong>, and then click <strong>Create</strong>.</p>
</li>
<li>
<p>On the <strong>Virtual Private Cloud:Create</strong> screen, specify a unique name for the VPC.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create subnets.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to <strong>Networks &#8594; Virtual Private Cloud</strong>.</p>
</li>
<li>
<p>Locate the VPC you created, and then click <strong>Create Subnet</strong>.</p>
</li>
<li>
<p>On the <strong>Subnet:Create</strong> screen, configure the <a href="#_subnet_settings">settings</a> that are relevant to your environment.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must link each subnet to a dedicated overlay network. In the <strong>Provider</strong> field, the SUSE Virtualization UI only shows overlay networks that are not linked to other subnets, automatically enforcing the one-to-one mapping.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Edit as YAML</strong>.</p>
</li>
<li>
<p>Under <code>spec</code>, add <code>enableDHCP: true</code>.</p>
<div class="paragraph">
<p>This ensures that virtual machines connected to the subnet can obtain the correct default route options.</p>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create virtual machines.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configure the settings that are relevant to each virtual machine.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On the <strong>Networks</strong> tab, you must select the correct overlay network in the <strong>Network</strong> field.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<div class="paragraph">
<p>The virtual machine obtains its IP address from the subnet that it is connected to.</p>
</div>
</li>
<li>
<p>Select <strong>⋮ &#8594; Edit YAML</strong>.</p>
</li>
<li>
<p>Change the value of <code>spec.domain.devices.interface.binding.name</code> to <code>managedtap</code>.</p>
<div class="paragraph">
<p>This ensures that the virtual machine obtains the correct DHCP options from the subnet instead of using the default DHCP server from KubeVirt.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you do not perform this step, the virtual machine will not have a default route. Until the default route is properly configured on the guest operating system, attempts to access external destinations and virtual machines on different subnets will fail.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="vm-network.html#_overlay_network_limitations" class="xref page">Overlay network limitations</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Restart each virtual machine.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_sample_vpc_configuration_and_verification"><a class="anchor" href="#_sample_vpc_configuration_and_verification"></a>Sample VPC configuration and verification</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="vm-network.html#_creating_an_overlay_network" class="xref page">Create overlay networks</a> with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <code>vswitch1</code> and <code>vswitch2</code></p>
</li>
<li>
<p><strong>Type</strong>: <code>OverlayNetwork</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a VPC named <code>vpc-1</code>.</p>
</li>
<li>
<p>Create two subnets in <code>vpc-1</code> with the following settings:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">CIDR</th>
<th class="tableblock halign-left valign-top">Provider</th>
<th class="tableblock halign-left valign-top">Gateway IP</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vswitch1-subnet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172.20.10.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default/vswitch1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172.20.10.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vswitch2-subnet</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172.20.20.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default/vswitch2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172.20.20.1</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Create three virtual machines with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <code>vm1-vswitch1</code>, <code>vm2-vswitch1</code>, and <code>vm1-vswitch2</code></p>
</li>
<li>
<p><strong>Basics</strong> tab</p>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <code>1</code></p>
</li>
<li>
<p><strong>Memory</strong>: <code>2</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Volumes</strong> tab</p>
<div class="ulist">
<ul>
<li>
<p><strong>Image Volume</strong>: A cloud image (for example, <code>noble-server-cloudimg-amd64</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Networks</strong> tab</p>
<div class="ulist">
<ul>
<li>
<p><strong>Network</strong>: <code>default/vswitch1</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Advanced Options</strong> tab</p>
<div class="listingblock">
<div class="content">
<pre>users:
`  `- name: ubuntu
`    `groups: [ sudo ]
`    `shell: /bin/bash
`    `sudo: ALL=(ALL) NOPASSWD:ALL
`    `lock\_passwd: false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Once the virtual machines start running, the node displays the NTP server <code>0.suse.pool.ntp.org</code> and the IP address.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Open the serial consoles of <code>vm1-vswitch1</code> and <code>vm1-vswitch2</code>, and then add a default route on each (if none exists) using the following commands:</p>
<div class="ulist">
<ul>
<li>
<p><code>vm1-vswitch1</code> (<code>172.20.10.6</code>):</p>
<div class="listingblock">
<div class="content">
<pre>#sudo ip route add default via 172.20.10.1 dev enp1s0</pre>
</div>
</div>
</li>
<li>
<p><code>vm1-vswitch2</code> (<code>172.20.20.3</code>):</p>
<div class="listingblock">
<div class="content">
<pre>#sudo ip route add default via 172.20.20.1 dev enp1s0</pre>
</div>
</div>
<div class="paragraph">
<p>If a virtual machine wants to send traffic to an unknown network (not in the local subnet), the traffic must be forwarded to the specified gateway IP configured for the connected subnet using the specified network interface. In this example, <code>vm1-vswitch1</code> must forward traffic via <code>172.20.10.1</code>, while <code>vm1-vswitch2</code> must forward traffic via <code>172.20.20.1</code>. Both virtual machines use the network interface <code>enp1s0</code>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Verify connectivity using the <code>ping</code> command.</p>
<div class="ulist">
<ul>
<li>
<p>Use <code>vm1-vswitch1</code> (<code>172.20.10.6</code>) to ping <code>vm1-vswitch2</code> (<code>172.20.20.3</code>).</p>
</li>
<li>
<p>Use <code>vm1-vswitch2</code> (<code>172.20.20.3</code>) to ping <code>vm1-vswitch1</code> (<code>172.20.10.6</code>).</p>
<div class="paragraph">
<p>Since <code>vm1-vswitch1</code> and <code>vm1-vswitch2</code> are on the same subnet, they can communicate with each other without any default route settings.</p>
</div>
<div class="paragraph">
<p>If no default route exists on the virtual machine before you run the ping command, the console displays the message <code>ping: connect: Network is unreachable</code>.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_private_subnet_setting"><a class="anchor" href="#_private_subnet_setting"></a>Private subnet setting</h3>
<div class="paragraph">
<p>When the <strong>Private Subnet</strong> setting is enabled on a subnet, it cannot communicate with other subnets in the same VPC by default. Cross-subnet traffic is allowed only if you add the other subnets' CIDR blocks to the private subnet&#8217;s <strong>Allow Subnets</strong> list.</p>
</div>
<div class="paragraph">
<p>The <strong>Private Subnet</strong> setting offers the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fine-grained network segmentation (micro-segmentation)</p>
</li>
<li>
<p>Stronger network isolation within the VPC and reduced potential attack surface</p>
</li>
<li>
<p>Prevention of unauthorized access to sensitive or critical resources inside the VPC</p>
</li>
<li>
<p>Controlled, selective cross-subnet communication via the <strong>Allow Subnets</strong> list</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_sample_private_subnet_verification"><a class="anchor" href="#_sample_private_subnet_verification"></a>Sample private subnet verification</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Networks &#8594; Virtual Private Cloud</strong>.</p>
</li>
<li>
<p>Locate <code>vswitch1-subnet</code>, and then select <strong>⋮ &#8594; Edit Config</strong>.</p>
</li>
<li>
<p>Enable the <strong>Private Subnet</strong> setting.</p>
</li>
<li>
<p>Open the serial console of <code>vm1-vswitch1</code> (<code>172.20.10.6</code>), and then ping <code>vm1-vswitch2</code> (<code>172.20.20.3</code>).</p>
<div class="paragraph">
<p>The ping attempt fails because <code>vm1-vswitch1</code> is isolated. Enabling the <strong>Private Subnet</strong> setting on <code>vswitch1-subnet</code> prohibits <code>vm1-vswitch1</code> from communicating with virtual machines in other subnets.</p>
</div>
</li>
<li>
<p>Return to the <strong>Virtual Private Cloud</strong> screen, locate <code>vswitch1-subnet</code>, and then select <strong>⋮ &#8594; Edit Config</strong>.</p>
</li>
<li>
<p>Add <code>172.20.20.0/24</code> to the <strong>Allow Subnets</strong> field.</p>
</li>
<li>
<p>Open the serial console of <code>vm1-vswitch1</code> (<code>172.20.10.6</code>), and then ping <code>vm1-vswitch2</code> (<code>172.20.20.3</code>).</p>
<div class="paragraph">
<p>The ping attempt is successful.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_natoutgoing_setting"><a class="anchor" href="#_natoutgoing_setting"></a><code>natOutgoing</code> setting</h3>
<div class="paragraph">
<p>The <code>natOutgoing</code> setting enables network address translation (NAT) for traffic leaving the subnet and going to destinations outside the VPC. This setting is disabled by default. To enable it, you must edit the subnet&#8217;s YAML configuration and set the value to <code>natOutgoing: true</code>.</p>
</div>
<div class="sect3">
<h4 id="_sample_natoutgoing_configuration_and_verification"><a class="anchor" href="#_sample_natoutgoing_configuration_and_verification"></a>Sample <code>natOutgoing</code> configuration and verification</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="vm-network.html#_creating_an_overlay_network" class="xref page">Create an overlay network</a> with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <code>vswitch-external</code></p>
</li>
<li>
<p><strong>Type</strong>: <code>OverlayNetwork</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <code>ovn-cluster</code> VPC, create a subnet with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <code>external-subnet</code></p>
</li>
<li>
<p><strong>CIDR Block</strong>: <code>172.20.30.0/24</code></p>
</li>
<li>
<p><strong>Provider</strong>: <code>default/vswitch-external</code></p>
</li>
<li>
<p><strong>Gateway IP</strong>: <code>172.20.30.1</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a virtual machine with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <code>vm-external</code></p>
</li>
<li>
<p><strong>Basics</strong> tab</p>
<div class="ulist">
<ul>
<li>
<p><strong>CPU</strong>: <code>1</code></p>
</li>
<li>
<p><strong>Memory</strong>: <code>2</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Volumes</strong> tab</p>
<div class="ulist">
<ul>
<li>
<p><strong>Image Volume</strong>: A cloud image (for example, <code>noble-server-cloudimg-amd64</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Networks</strong> tab</p>
<div class="ulist">
<ul>
<li>
<p><strong>Network</strong>: <code>default/vswitch-external</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Advanced Options</strong> tab</p>
<div class="listingblock">
<div class="content">
<pre>users:
`  `- name: ubuntu
`    `groups: [ sudo ]
`    `shell: /bin/bash
`    `sudo: ALL=(ALL) NOPASSWD:ALL
`    `lock\_passwd: false</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Open the serial console of <code>vm-external</code> (<code>172.20.30.2</code>), and then ping <code>8.8.8.8</code>.</p>
<div class="paragraph">
<p>The console displays the message <code>ping: connect: Network is unreachable</code>.</p>
</div>
</li>
<li>
<p>Add a default route using the following command:</p>
<div class="listingblock">
<div class="content">
<pre>#sudo ip route add default via 172.20.30.1 dev enp1s0</pre>
</div>
</div>
<div class="paragraph">
<p>Again, the ping attempt fails.</p>
</div>
</li>
<li>
<p>Go to the <strong>Virtual Private Cloud</strong> screen.</p>
</li>
<li>
<p>Locate <code>external-subnet</code>, and then select <strong>⋮ &#8594; Edit Config</strong>.</p>
</li>
<li>
<p>Click <strong>Edit as YAML</strong>.</p>
</li>
<li>
<p>Locate the <code>natOutgoing</code> field, and then change the value to <code>true</code>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Open the serial console of <code>vm-external</code> (<code>172.20.30.2</code>), and then ping <code>8.8.8.8</code>.</p>
<div class="paragraph">
<p>The ping attempt is successful.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vpc_peering"><a class="anchor" href="#_vpc_peering"></a>VPC peering</h3>
<div class="paragraph">
<p>VPC peering is a networking connection that enables virtual machines in different VPCs to communicate using <em>private IP addresses</em>.</p>
</div>
<div class="paragraph">
<p>Each VPC is a separate network namespace with its own CIDR block, routing table, and isolation boundary. Without VPC peering, virtual machines are isolated even when they are hosted within the same SUSE Virtualization cluster. Once a peering connection is established, routing rules are automatically updated to allow virtual machines to communicate privately.</p>
</div>
<div class="paragraph">
<p>VPC peering offers the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The VPCs remain logically and administratively isolated. This is ideal for multi-tenant setups that require strong network isolation with optional connectivity. You can organize workloads by team, function, or environment (for example, development vs. production).</p>
</li>
<li>
<p>Traffic between VPCs does not traverse the public internet, reducing exposure. You can also use route tables and firewall rules to tightly control network access.</p>
</li>
<li>
<p>Keeping traffic within the internal cloud network not only improves performance but also lowers costs, providing a significant advantage over using the public internet or VPNs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following diagram shows how VPCs and subnets in Kube-OVN map to overlay networks and virtual machines in SUSE Virtualization. This architecture enables you to create scalable and isolated L3 and L2 network structures across the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>                                          ┌───────────────────────────────────────────┐
                                          │                 Kube-OVN                  │
                                          │          (SDN Controller / IPAM)          │
                                          └───────────────────────────────────────────┘
                                                                │
         ┌──────────────────────────────────────────────────────┴──────────────────────────────────────────────────────────┐
         │                                                      │                                                          │
 ┌──────────────┐                                       ┌──────────────┐                                           ┌──────────────┐
 │  VPC: vpc-1  │                                       │VPC: vpcpeer-1│      ◀────────── peering ──────────▶      │VPC: vpcpeer-2│
 └──────────────┘                                       └──────────────┘                                           └──────────────┘
        │                                                       │                                                         │
        ▼                                                       ▼                                                         ▼
┌──────────────────────────────┐                 ┌──────────────────────────────┐                    ┌──────────────────────────────┐
│ Subnet: vswitch1-subnet      │                 │ Subnet: vswitch3-subnet      │                    │ Subnet: vswitch4-subnet      │
│ CIDR: 172.20.10.0/24         │                 │ CIDR: 10.0.0.0/24            │                    │ CIDR: 20.0.0.0/24            │
│ Gateway: 172.20.10.1         │                 │ Gateway: 10.0.0.1            │                    │ Gateway: 20.0.0.1            │
└──────────────────────────────┘                 └──────────────────────────────┘                    └──────────────────────────────┘
            │  (1:1 mapping - Provider binding)                 │                                                    │
            ▼                                                   ▼                                                    ▼
┌──────────────────────────────┐                 ┌──────────────────────────────┐                    ┌──────────────────────────────┐
│ Overlay: vswitch1            │                 │ Overlay: vswitch3            │                    │ Overlay: vswitch4            │
│ Type: OverlayNetwork         │                 │ Type: OverlayNetwork         │                    │ Type: OverlayNetwork         │
└──────────────────────────────┘                 └──────────────────────────────┘                    └──────────────────────────────┘
            │                                                   │                                                    │
            ▼                                                   ▼                                                    ▼
┌──────────────────────┐                            ┌──────────────────────┐                              ┌──────────────────────┐
│   VM: vm1-vswitch1   │                            │   VM: vm1-vswitch3   │                              │   VM: vm1-vswitch4   │
│   IP: 172.20.10.5    │   ◀ ──────── X ──────── ▶  │   IP: 10.0.0.2       │     ◀── Connected via ──▶    │   IP: 20.0.0.2       │
└──────────────────────┘                            └──────────────────────┘       vswitch (overlay)      └──────────────────────┘
            ▲
            │
VM launched and managed by {harvester-product-name}</pre>
</div>
</div>
<div class="sect3">
<h4 id="_vpc_peering_configuration_examples"><a class="anchor" href="#_vpc_peering_configuration_examples"></a>VPC peering configuration examples</h4>
<div class="ulist">
<ul>
<li>
<p>Example 1: Successful cross-VPC communication</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VPC Name</th>
<th class="tableblock halign-left valign-top">VPC CIDR</th>
<th class="tableblock halign-left valign-top">Subnet</th>
<th class="tableblock halign-left valign-top">Static Route</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/16 → 169.254.0.2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16 → 169.254.0.1</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Since both subnets fall within their respective VPC CIDRs, the routing works correctly and cross-VPC communication is successful.</p>
</div>
</li>
<li>
<p>Example 2: Unsuccessful cross-VPC communication due to routing configuration issue</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VPC Name</th>
<th class="tableblock halign-left valign-top">VPC CIDR</th>
<th class="tableblock halign-left valign-top">Subnet</th>
<th class="tableblock halign-left valign-top">Static Route</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.1.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/16 → 169.254.0.2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.1.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16 → 169.254.0.1</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The target subnet IP addresses (for example, <code>10.1.0.2</code> and <code>20.1.0.2</code>) are <em>not covered</em> by the routing configuration, causing cross-VPC communication to fail.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The VPC&#8217;s CIDR includes all subnets within the VPC.</p>
</li>
<li>
<p>Static routes point to the <strong>remote VPC&#8217;s main CIDR block</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a subnet uses a specific range that is not covered by the VPC CIDR, the associated static route cannot reach that subnet.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information about VPC peering prerequisites and configuration, see <a href="https://kubeovn.github.io/docs/v1.13.x/en/vpc/vpc-peering">VPC Peering</a> in the Kube-OVN documentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_vpc_peering_configuration_and_verification"><a class="anchor" href="#_sample_vpc_peering_configuration_and_verification"></a>Sample VPC peering configuration and verification</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="vm-network.html#_creating_an_overlay_network" class="xref page">Create two overlay networks</a> with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: <code>vswitch3</code> and <code>vswitch4</code></p>
</li>
<li>
<p><strong>Type</strong>: <code>OverlayNetwork</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_creating_a_vpc">Create two VPCs</a> named <code>vpcpeer-1</code> and <code>vpcpeer-2</code>.</p>
<div class="paragraph">
<p>SUSE Virtualization creates two isolated network spaces that are ready for subnet creation.</p>
</div>
</li>
<li>
<p>Create one subnet in each VPC with the following settings:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">VPC Name</th>
<th class="tableblock halign-left valign-top">Subnet Name</th>
<th class="tableblock halign-left valign-top">CIDR Block</th>
<th class="tableblock halign-left valign-top">Provider</th>
<th class="tableblock halign-left valign-top">Gateway IP</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subnet1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default/vswitch3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>subnet2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default/vswitch4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.1</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Edit the configuration of both VPCs.</p>
<div class="ulist">
<ul>
<li>
<p><code>vpcpeer-1</code></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Section</th>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VPC Peering</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local Connect IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>169.254.0.1/30</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VPC Peering</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remote VPC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Static Routes</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CIDR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20.0.0.0/16</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Static Routes</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Next Hop IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>169.254.0.2</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><code>vpcpeer-2</code></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Section</th>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VPC Peering</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Local Connect IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>169.254.0.2/30</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>VPC Peering</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Remote VPC</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vpcpeer-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Static Routes</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>CIDR</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10.0.0.0/16</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Static Routes</strong> tab</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Next Hop IP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>169.254.0.1</code></p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Create virtual machines.</p>
<div class="paragraph">
<p>An <code>Unschedulable</code> error typically indicates insufficient memory. Stop other virtual machines before attempting to create new ones.</p>
</div>
</li>
<li>
<p>Open the serial consoles of <code>vm1-vpcpeer1</code> and <code>vm1-vpcpeer2</code>, and then add a default route on each (if none exists) using the following commands:</p>
<div class="ulist">
<ul>
<li>
<p><code>vm1-vpcpeer1</code> (<code>10.0.0.2</code>)</p>
<div class="listingblock">
<div class="content">
<pre>#sudo ip route add default via 10.0.0.1 dev enp1s0</pre>
</div>
</div>
</li>
<li>
<p><code>vm1-vpcpeer2</code> (<code>20.0.0.2</code>)</p>
<div class="listingblock">
<div class="content">
<pre>#sudo ip route add default via 20.0.0.1 dev enp1s0</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Test cross-VPC communication using the <code>ping</code> command.</p>
<div class="ulist">
<ul>
<li>
<p>Use <code>vm1-vpcpeer1</code> (<code>10.0.0.2</code>) to ping <code>vm1-vpcpeer2</code> (<code>20.0.0.2</code>).</p>
</li>
<li>
<p>Use <code>vm1-vpcpeer2</code> (<code>20.0.0.2</code>) to ping <code>vm1-vpcpeer1</code> (<code>10.0.0.2</code>).</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Communication between virtual machines in different VPCs relies on static routes that define how traffic is forwarded to the remote VPC. For these routes to work correctly, the static route destination CIDR must fall within the remote VPC’s main CIDR range.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_local_connect_ip_and_cidr_configuration"><a class="anchor" href="#_local_connect_ip_and_cidr_configuration"></a>Local Connect IP and CIDR configuration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Question</th>
<th class="tableblock halign-left valign-top">Answer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the <strong>Local Connect IP</strong> value a CIDR block?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes (for example, <code>169.254.0.1/30</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">What is the recommended subnet size?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/30</code> (two usable IPs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can private addresses (RFC 1918) be used for peering links?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not recommended</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Why use <code>169.254.x.x</code>?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link-local, safe, not internet-routable, widely used</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Question: Is the <strong>Local Connect IP</strong> value a CIDR block?</p>
<div class="paragraph">
<p>Answer: Yes. You must specify a CIDR block (for example, <code>169.254.0.1/30</code>) instead of a single IP address. The CIDR defines a <strong>point-to-point network</strong> where one IP address is used by the local VPC and the other is used by the remote VPC.</p>
</div>
<div class="paragraph">
<p>Example: <code>/30</code> block (<code>169.254.0.0/30</code>)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">IP Address</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">169.254.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">169.254.0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by VPC A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">169.254.0.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by VPC B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">169.254.0.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast (optional)</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Question: What is the recommended subnet size?</p>
<div class="paragraph">
<p>Answer: <code>/30</code> provides <strong>exactly two usable IP addresses</strong>, which fulfills the requirement of point-to-point VPC peering. Using larger blocks (for example, <code>/28</code> and <code>/29</code>) is not necessary and can even be considered wasteful.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">CIDR</th>
<th class="tableblock halign-left valign-top">Usable IPs</th>
<th class="tableblock halign-left valign-top">Recommended?</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/30</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/29</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/28</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Question: Why use <code>169.254.x.x/30</code> instead of private addresses?</p>
<div class="paragraph">
<p>Answer: <code>169.254.0.0/16</code> is <strong>not part</strong> of the RFC 1918 private address space (<code>10.0.0.0/8</code>, <code>172.16.0.0/12</code>, and <code>192.168.0.0/16</code>). RFC 3927 defines <code>169.254.0.0/16</code> as the <strong>link-local address space</strong>, which is intended for internal communication, auto IP configuration, and point-to-point routing.</p>
</div>
<div class="paragraph">
<p><code>169.254.x.x/30</code> has the following advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Not routable to the public internet</p>
</li>
<li>
<p>Secure for internal use</p>
</li>
<li>
<p>Commonly used by cloud platforms (including AWS and Alibaba Cloud) for internal networking purposes such as VPC peering and metadata access</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_vpc_peering_limitation"><a class="anchor" href="#_vpc_peering_limitation"></a>VPC peering limitation</h4>
<div class="paragraph">
<p>Peering only works between custom VPCs. Any attempt to establish a peering connection between the default VPC (<code>ovn-cluster</code>) and a custom VPC will fail.</p>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="vm-migration-network.html">VM Migration Network</a></span>
  <span class="next"><a href="vm-isolation.html">Virtual Machine Isolation</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
