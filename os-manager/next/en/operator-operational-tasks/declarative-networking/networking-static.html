<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Static Network with nm-configurator :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/os-manager/next/en/operator-operational-tasks/declarative-networking/networking-static.html">
    <link rel="prev" href="networking.html">
    <link rel="next" href="../custom-images.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-09-08"/>
<link rel="stylesheet" href="../../../../../_/css/search.css">
<link rel="icon" href="../../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>

<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/assets");
</script>    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><!-- Canonical link -->
<link href="https://documentation.suse.com/cloudnative/os-manager/next/en/operator-operational-tasks/declarative-networking/networking-static.html" rel="canonical"/>

<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/os-manager/next/en/operator-operational-tasks/declarative-networking/networking-static.html" hreflang="x-default" rel="alternate"/>

<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/os-manager/next/en/operator-operational-tasks/declarative-networking/networking-static.html" hrefLang="en-US" rel="alternate" />











<shared-header language="en" languages='{
"en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
"de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
"fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
"es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
"zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
"pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="os-manager" data-version="next">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">OS Manager</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Quickstarts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../quickstarts/quickstart-ui.html">SUSE® Rancher Prime: OS Manager the visual way</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../quickstarts/quickstart-cli.html">SUSE® Rancher Prime: OS Manager the command line way</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher OS Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../rancher-os-management/architecture/architecture.html">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../rancher-os-management/architecture/architecture-components.html">SUSE® Rancher Prime: OS Manager Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../rancher-os-management/architecture/custom-resources.html">Custom Resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../rancher-os-management/architecture/services/architecture-services.html">Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../rancher-os-management/architecture/services/architecture-machineonboarding.html">Machine onboarding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../rancher-os-management/architecture/services/architecture-clusterdeployment.html">Kubernetes cluster provisioning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../rancher-os-management/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../rancher-os-management/plans.html">Plans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../rancher-os-management/upgrade-lifecycle.html">Upgrade lifecycle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../installation/customize-installation/custom-install.html">Customize installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/customize-installation/extra-rpms.html">Add third party RPMs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/customize-installation/lvm-drives-example.html">Extra LVM volume group</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/hostname.html">Customize hostname</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/ntp.html">Configure NTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/removable-device-cloudconfig.html">Include cloud-config from removable devices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/custom-certificate.html">Add custom certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/raspi-disk.html">Install on Raspberry Pi</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/reset.html">Machine reset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/behind-proxy.html">Behind a proxy configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/rancher-vmware.html">Using Elemental with Rancher and VMware</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Operator operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../airgap.html">Airgap install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../channels.html">Channels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../certificate-authority.html">Certificate Authority Verification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Declarative Networking</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="networking.html">IPAM Driven Networking</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="networking-static.html">Static Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../custom-images.html">Build Custom OS Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unmanaged-os.html">Register an Unmanaged OS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tpm.html">Trusted Platform Module (TPM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rancher-ip.html">Rancher IP Address Options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../label-templates/label-templates.html">Label Templates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-baseboard.html">BaseBoard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-bios.html">BIOS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-chassis.html">Chassis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-cpu.html">CPU</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-gpu.html">GPU</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-memory.html">Memory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-product.html">Product</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-random.html">Random</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-runtime.html">Runtime</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-storage.html">Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-deprecated.html">Deprecated Variables</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-rancher-upgrades.html">Rancher upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-reset.html">Reset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-network.html">Declarative Networking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-label-templates.html">Label Templates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/cloud-config-reference.html">Cloud-config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineregistration-reference.html">MachineRegistration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineinventory-reference.html">MachineInventory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineinventoryselector-reference.html">MachineInventorySelector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineinventoryselectortemplate-reference.html">MachineInventorySelectorTemplate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/managedosimage-reference.html">ManagedOSImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/managedosversionchannel-reference.html">ManagedOSVersionChannel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/managedosversion-reference.html">ManagedOSVersion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/seedimage-reference.html">SeedImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/cluster-reference.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/operatorchart-reference.html">SUSE® Rancher Prime: OS Manager Operator Helm chart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/kubernetesversions.html">Kubernetes versions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/inventory-management.html">Inventory management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../release-notes.html">Release notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OS Manager</span>
    <span class="version">Next</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../../admission-controller/1.29/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../admission-controller/1.30/en/introduction.html">1.30-next</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.27/en/introduction.html">1.27</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.26/en/introduction.html">1.26</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.25/en/introduction.html">1.25</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../cluster-api/latest/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../cluster-api/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../continuous-delivery/v0.12/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-current is-latest">
              <a href="../../index.html">Next</a>
            </li>
            <li class="version">
              <a href="../../../../latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">latest</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../storage/latest/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../storage/latest/en/longhorn-documentation.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.9/en/longhorn-documentation.html">1.9 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../virtualization/v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../virtualization/v1.6/en/introduction/overview.html">v1.6 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../virtualization/v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../virtualization/v1.4/en/introduction/overview.html">v1.4</a>
            </li>
            <li class="version">
              <a href="../../../../../virtualization/v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home">Documentation Home</a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/os-manager" title="OS Manager" aria-label="SUSE Documentation - OS Manager">
        OS Manager
      </a>
    </li>
      <li>
          Operator operational tasks
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">Next</button>
  <div class="version-menu">
    <a class="version is-current" href="networking-static.html">Next</a>
    <a class="version" href="../../../../latest/en/operator-operational-tasks/declarative-networking/networking-static.html">Latest</a>
    <a class="version" href="../../../../1.7/en/operator-operational-tasks/declarative-networking/networking-static.html">1.7</a>
    <a class="version is-missing" href="../../../../1.6/en/index.html">1.6</a>
    <a class="version is-missing" href="../../../../1.5/en/index.html">1.5</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/elemental-product-docs/edit/main/docs/next/modules/en/pages/operator-operational-tasks/declarative-networking/networking-static.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:os-manager" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Static Network with nm-configurator</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="title">warning</div>
<div class="paragraph">
<p>Declarative Networking is in <strong>technology preview</strong> state with limited support. As such it is not recommended for production environments.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>nm-configurator</code> <a href="https://github.com/suse-edge/nm-configurator?tab=readme-ov-file#per-node-configurations">per node configuration</a> can be used to statically assign IP addresses to individual machines, based on the NIC&#8217;s MAC addresses.</p>
</div>
<div class="paragraph">
<p>This solution does not require a remote IPAM provider, but requires the user to maintain mapping between known MAC addresses and IP Addresses.</p>
</div>
<div class="paragraph">
<p>In this example, we are going to customize an Elemental image, and include a <a href="../../references/cloud-config-reference.html#_configuration_syntax" class="xref page">yip config</a> that will apply the static network config early at boot.</p>
</div>
<div class="paragraph">
<p>The following configuration covers 2 nodes with a very basic network setup.</p>
</div>
<div class="listingblock">
<div class="title">99_static_network_config.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">name: Static nm-configurator config
stages:
  initramfs:
  - directories:
      - path: /tmp/nmc/static/desired-states
        permissions: 448
        owner: 0
        group: 0
      - path: /tmp/nmc/static/network-config
        permissions: 448
        owner: 0
        group: 0
    files:
      - path: /tmp/nmc/static/desired-states/node1.yaml
        permissions: 384
        owner: 0
        group: 0
        content: |
          dns-resolver:
            config:
              server:
              - 192.168.122.1
              search: []
          routes:
            config:
            - destination: 0.0.0.0/0
              next-hop-interface: eth0
              next-hop-address: 192.168.122.1
              metric: 150
              table-id: 254
          interfaces:
          - name: eth0
            type: ethernet
            state: up
            mac-address: 52:54:00:45:14:c5
            ipv4:
              address:
              - ip: 192.168.122.150
                prefix-length: 24
              enabled: true
            ipv6:
              enabled: false
        encoding: ""
        ownerstring: ""
      - path: /tmp/nmc/static/desired-states/node2.yaml
        permissions: 384
        owner: 0
        group: 0
        content: |
          dns-resolver:
            config:
              server:
              - 192.168.122.1
              search: []
          routes:
            config:
            - destination: 0.0.0.0/0
              next-hop-interface: eth0
              next-hop-address: 192.168.122.1
              metric: 150
              table-id: 254
          interfaces:
          - name: eth0
            type: ethernet
            state: up
            mac-address: 52:54:00:3a:ae:3b
            ipv4:
              address:
              - ip: 192.168.122.151
                prefix-length: 24
              enabled: true
            ipv6:
              enabled: false
        encoding: ""
        ownerstring: ""
    commands:
    - nmc generate --config-dir /tmp/nmc/static/desired-states --output-dir /tmp/nmc/static/network-config
    - nmc apply --config-dir /tmp/nmc/static/network-config</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_include_the_static_network_configuration_in_a_custom_os_image"><a class="anchor" href="#_include_the_static_network_configuration_in_a_custom_os_image"></a>Include the static network configuration in a custom OS image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We can extend an Elemental image to include the static network configuration in <code>/system/oem</code>. Any Elemental powered OS, where the <a href="https://github.com/rancher/elemental-toolkit">Elemental Toolkit</a> is running, will evaluate any config in this directory when executing any stage.  Additionally we are going to customize the image to install the required <code>nmc</code> binary.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"># The version of Elemental to modify
FROM registry.suse.com/suse/sl-micro/6.0/baremetal-os-container:latest

# Install the static network config
COPY 99_static_network_config.yaml /system/oem/99_static_network_config.yaml

# Install nmc
RUN curl -LO https://github.com/suse-edge/nm-configurator/releases/download/v0.3.1/nmc-linux-x86_64 &amp;&amp; \
    install -o root -g root -m 0755 nmc-linux-x86_64 /usr/sbin/nmc

# IMPORTANT: /etc/os-release is used for versioning/upgrade.
ARG IMAGE_REPO=norepo
ARG IMAGE_TAG=latest
RUN \
    sed -i -e "s|^IMAGE_REPO=.*|IMAGE_REPO=\"${IMAGE_REPO}\"|g" /etc/os-release &amp;&amp; \
    sed -i -e "s|^IMAGE_TAG=.*|IMAGE_TAG=\"${IMAGE_TAG}\"|g" /etc/os-release &amp;&amp; \
    sed -i -e "s|^IMAGE=.*|IMAGE=\"${IMAGE_REPO}:${IMAGE_TAG}\"|g" /etc/os-release

# IMPORTANT: it is good practice to recreate the initrd and re-apply `elemental-init`
RUN elemental init --force elemental-rootfs,grub-config,dracut-config,cloud-config-essentials,elemental-setup</code></pre>
</div>
</div>
<div class="paragraph">
<p>The OS container can now be built and pushed to your registry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker build --build-arg IMAGE_REPO=myrepo/static-network-os \
             --build-arg IMAGE_TAG=v1.1.1 \
             -t myrepo/static-network-os:v1.1.1 .
docker push myrepo/static-network-os:v1.1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that since the static network config is included in the image, this requires you to build and maintain different images with different configurations, most likely one per nodepool or one per cluster for example. Custom OS images need to be maintained to create the initial ISO bootable image (via a <a href="../../references/seedimage-reference.html" class="xref page">SeedImage</a>), but also when <a href="../../node-operational-tasks/upgrade.html" class="xref page">upgrading</a> the machines. The desired static network config <strong>must</strong> be present on the OS images used with the <a href="../../references/managedosimage-reference.html" class="xref page">ManagedOSImage</a>, otherwise the config will be missing when booting from the upgraded system.</p>
</div>
<div class="paragraph">
<p>The custom OS image can also be used as it is to build a bootable raw disk image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: SeedImage
metadata:
  name: my-raw-image
  namespace: fleet-default
spec:
  type: raw
  baseImage: myrepo/static-network-os:v1.1.1
  registrationRef:
    apiVersion: elemental.cattle.io/v1beta1
    kind: MachineRegistration
    name: my-registration
    namespace: fleet-default</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_bootable_iso"><a class="anchor" href="#_create_a_bootable_iso"></a>Create a bootable ISO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can now <a href="../custom-images.html#_create_a_custom_bootable_installation_iso" class="xref page">build an ISO container</a> from this OS container image. For more information on how to customize Elemental images, please refer to the <a href="../custom-images.html" class="xref page">documentation</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-dockerfile hljs" data-lang="dockerfile">FROM myrepo/static-network-os:v1.1.1 AS os
FROM myrepo/static-network-os:v1.1.1 AS builder

WORKDIR /iso
COPY --from=os / rootfs

# work around buildah issue: https://github.com/containers/buildah/issues/4242
RUN rm -f rootfs/etc/resolv.conf

RUN elemental build-iso \
        dir:rootfs \
        --bootloader-in-rootfs \
        --squash-no-compression \
        -o /output -n "elemental"

FROM busybox
COPY --from=builder /output /elemental-iso

ENTRYPOINT ["busybox", "sh", "-c"]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker build -t myrepo/static-network-iso:v1.1.1 .
docker push myrepo/static-network-iso:v1.1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the ISO container is published on your registry, you can refer to it in the <a href="../../references/seedimage-reference.html" class="xref page">SeedImage</a> like any other Elemental distributed ISO image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: SeedImage
metadata:
  name: my-iso
  namespace: fleet-default
spec:
  type: iso
  baseImage: myrepo/static-network-iso:v1.1.1
  registrationRef:
    apiVersion: elemental.cattle.io/v1beta1
    kind: MachineRegistration
    name: my-registration
    namespace: fleet-default</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the static network config will now be evaluated when the installation media boots, then it will be installed on the system as part of the base image.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="networking.html">IPAM Driven Networking</a></span>
  <span class="next"><a href="../custom-images.html">Build Custom OS Images</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
<script src="../../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
