<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SUSE® Rancher Prime: OS Manager the command line way :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/os-manager/1.6/en/quickstart-cli.html">
    <link rel="prev" href="quickstart-ui.html">
    <link rel="next" href="architecture.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-07-03"/>
<link rel="stylesheet" href="../../../_/css/search.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>

<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/assets");
</script>    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><!-- Canonical link -->
<link href="https://documentation.suse.com/cloudnative/os-manager/1.6/en/quickstart-cli.html" rel="canonical"/>

<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/os-manager/1.5/en/quickstart-cli.html" hreflang="x-default" rel="alternate"/>

<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/os-manager/1.5/en/quickstart-cli.html" hrefLang="en-US" rel="alternate" />











<shared-header language="en" languages='{
"en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
"de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
"fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
"es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
"zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
"pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="os-manager" data-version="1.5">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">OS Manager</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Quickstarts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart-ui.html">SUSE® Rancher Prime: OS Manager the visual way</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="quickstart-cli.html">SUSE® Rancher Prime: OS Manager the command line way</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher OS Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="architecture.html">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="architecture-components.html">SUSE® Rancher Prime: OS Manager Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom-resources.html">Custom Resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="architecture-services.html">Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="architecture-machineonboarding.html">Machine onboarding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="architecture-clusterdeployment.html">Kubernetes cluster provisioning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plans.html">Plans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade-lifecycle.html">Upgrade lifecycle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-install.html">Customize installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hostname.html">Customize hostname</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking-vlans.html">Configure VLANs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="wifi.html">Configure WiFi</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ntp.html">Configure NTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="removable-device-cloudconfig.html">Include cloud-config from removable devices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-certificate.html">Add custom certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reset.html">Machine reset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="behind-proxy.html">Behind a proxy configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rancher-vmware.html">Using Elemental with Rancher and VMware</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Operator operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="airgap.html">Airgap install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="networking.html">Networking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="networking-vlans.html">Configure a VLAN</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="wifi.html">Configure Wi-Fi</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-images.html">Build Custom OS Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="unmanaged-os.html">Register an Unmanaged OS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tpm.html"> Trusted Platform Module (TPM)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-rancher-upgrades.html">Rancher upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-reset.html">Reset</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cloud-config-reference.html">Cloud-config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineregistration-reference.html">MachineRegistration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineinventory-reference.html">MachineInventory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineinventoryselector-reference.html">MachineInventorySelector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineinventoryselectortemplate-reference.html">MachineInventorySelectorTemplate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managedosimage-reference.html">ManagedOSImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managedosversionchannel-reference.html">ManagedOSVersionChannel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managedosversion-reference.html">ManagedOSVersion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="seedimage-reference.html">SeedImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cluster-reference.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="operatorchart-reference.html">SUSE® Rancher Prime: OS Manager Operator Helm chart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetesversions.html">Kubernetes versions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="smbios.html">Smbios</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hardwarelabels.html">Hardware labels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="inventory-management.html">Inventory management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-notes.html">Release notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OS Manager</span>
    <span class="version">1.5</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../admission-controller/1.29/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../admission-controller/1.30/en/introduction.html">1.30-next</a>
            </li>
            <li class="version is-latest">
              <a href="../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.27/en/introduction.html">1.27</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.26/en/introduction.html">1.26</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.25/en/introduction.html">1.25</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../cluster-api/latest/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../cluster-api/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../continuous-delivery/v0.12/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../next/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../next/en/index.html">Next</a>
            </li>
            <li class="version">
              <a href="../../latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../1.6/en/index.html">1.6</a>
            </li>
            <li class="version is-current">
              <a href="index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">latest</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../storage/latest/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../storage/latest/en/longhorn-documentation.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.10/en/longhorn-documentation.html">1.10 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.9/en/longhorn-documentation.html">1.9 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../virtualization/v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../virtualization/v1.6/en/introduction/overview.html">v1.6 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../virtualization/v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.4/en/introduction/overview.html">v1.4</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home">Documentation Home</a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/os-manager" title="OS Manager" aria-label="SUSE Documentation - OS Manager">
        OS Manager
      </a>
    </li>
      <li>
          Quickstarts
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.5</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../next/en/index.html">Next</a>
    <a class="version is-missing" href="../../latest/en/index.html">Latest</a>
    <a class="version is-missing" href="../../1.7/en/index.html">1.7</a>
    <a class="version" href="../../1.6/en/quickstart-cli.html">1.6</a>
    <a class="version is-current" href="quickstart-cli.html">1.5</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/elemental-product-docs/edit/main/docs/1.5/modules/en/pages/quickstart-cli.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:os-manager" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">SUSE® Rancher Prime: OS Manager the command line way</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Follow this guide to have an auto-deployed cluster via rke2/k3s and managed by Rancher
with the only help of an SUSE® Rancher Prime: OS Manager ISO.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>A Rancher server (v2.7.0 or later) configured (server-url set)</p>
<div class="ulist">
<ul>
<li>
<p>To configure the Rancher <code>server-url</code> please check the <a href="https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration#first-log-in">Rancher docs</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>A machine (bare metal or virtualized) with TPM 2.0</p>
<div class="ulist">
<ul>
<li>
<p>Hint 1: Libvirt allows setting virtual TPMs for virtual machines <a href="tpm.html#_add_tpm_module_to_virtual_machine" class="xref page">example here</a></p>
</li>
<li>
<p>Hint 2: You can enable TPM emulation on bare metal machines missing the TPM 2.0 module <a href="tpm.html#_add_tpm_emulation_to_bare_metal_machine" class="xref page">example here</a></p>
</li>
<li>
<p>Hint 3: Make sure you&#8217;re using UEFI (not BIOS) on x86-64, or the ISO won&#8217;t boot</p>
</li>
<li>
<p>Hint 4: A minimum volume size of 25 GB is recommended. See the <a href="installation.html#_deployed_partition_table" class="xref page">SUSE® Rancher Prime: OS Manager partition table</a> for more details</p>
</li>
<li>
<p>Hint 5: CPU and RAM requirements depend on the Kubernetes version installed, for example <a href="https://docs.k3s.io/installation/requirements#hardware">K3s</a> or <a href="https://docs.rke2.io/install/requirements#hardware">RKE2</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Helm Package Manager (<a href="https://helm.sh/" class="bare">https://helm.sh/</a>)</p>
</li>
<li>
<p>For ARM (aarch64) - One SD-card (32 GB or more, must be <strong>fast</strong> - 40MB/s write speed is acceptable) and a USB-stick for installation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_suse_rancher_prime_os_manager_operator"><a class="anchor" href="#_install_suse_rancher_prime_os_manager_operator"></a>Install SUSE® Rancher Prime: OS Manager Operator</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>elemental-operator</code> is the management endpoint, running the management cluster and taking care of creating inventories, registrations for machines and much more.</p>
</div>
<div class="paragraph">
<p>We will use the Helm package manager to install the elemental-operator chart into our cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator-crds oci://registry.suse.com/rancher/elemental-operator-crds-chart

helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator oci://registry.suse.com/rancher/elemental-operator-chart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now after a few seconds you should see the operator pod appear on the <code>cattle-elemental-system</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">kubectl get pods -n cattle-elemental-system

NAME                                  READY   STATUS    RESTARTS   AGE
elemental-operator-64f88fc695-b8qhn   1/1     Running   0          16s</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Helm v3.8.0+ required</div>
<div class="content">
<pre>The {elemental-product-name} Operator chart is distributed via an OCI registry: Helm correctly supports OCI based registries starting from the v3.8.0 release.</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Swap charts installation order when upgrading from elemental-operator release &lt; 1.2.4</div>
<div class="content">
<pre>When upgrading from an elemental-operator release embedding the {elemental-product-name} CRDs (version &lt; 1.2.4) the elemental-operator-crds chart installation will fail.
You will need to upgrade the elemental-operator chart first, and only then install the elemental-operator-crds chart.</pre>
</div>
</div>
<div class="sect2">
<h3 id="_non_stable_installations"><a class="anchor" href="#_non_stable_installations"></a>Non-stable installations</h3>
<div class="paragraph">
<p>Besides the Helm charts listed above, there are two other <code>non-stable</code>
versions available.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Staging:</strong> refers to the latest tagged release from Github. This is documented in the <a href="quickstart-ui.html" class="xref page">Next</a> pages.</p>
</li>
<li>
<p><strong>Development:</strong> refers to the 'tip of HEAD' from Github. This is the ongoing development version and changes constantly.</p>
</li>
</ul>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_staging_version_x86_64_arm64_raspberry_pi_4" class="tab">
<p>Staging version (x86-64, ARM64 (Raspberry Pi 4))</p>
</li>
<li id="_tabs_1_development_version_x86_64_arm64_raspberry_pi_4" class="tab">
<p>Development version (x86-64, ARM64 (Raspberry Pi 4))</p>
</li>
</ul>
</div>
<div id="_tabs_1_staging_version_x86_64_arm64_raspberry_pi_4--panel" class="tabpanel" aria-labelledby="_tabs_1_staging_version_x86_64_arm64_raspberry_pi_4">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator-crds oci://registry.opensuse.org/isv/rancher/elemental/staging/charts/rancher/elemental-operator-crds-chart
helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator oci://registry.opensuse.org/isv/rancher/elemental/staging/charts/rancher/elemental-operator-chart</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_development_version_x86_64_arm64_raspberry_pi_4--panel" class="tabpanel" aria-labelledby="_tabs_1_development_version_x86_64_arm64_raspberry_pi_4">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Reminder</div>
<div class="paragraph">
<p>The development version is not recommended for production environments. We welcome feedback via Slack or Github issues, but it could be unstable and contain experimental features that can be dropped without notice.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator-crds oci://registry.opensuse.org/isv/rancher/elemental/dev/charts/rancher/elemental-operator-crds-chart
helm upgrade --create-namespace -n cattle-elemental-system --install --set image.imagePullPolicy=Always elemental-operator oci://registry.opensuse.org/isv/rancher/elemental/dev/charts/rancher/elemental-operator-chart</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installation_options"><a class="anchor" href="#_installation_options"></a>Installation options</h3>
<div class="paragraph">
<p>There are a few options that can be set in the chart install but that is out of scope for this document. You can see all the values on the chart <a href="https://github.com/rancher/elemental-operator/blob/main/.obs/chartfile/operator/values.yaml">values.yaml</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prepare_your_kubernetes_resources"><a class="anchor" href="#_prepare_your_kubernetes_resources"></a>Prepare your kubernetes resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Node deployment starts with a <code>MachineRegistration</code>, identifying a set of machines sharing the same configuration (disk drives, network, etc.).</p>
</div>
<div class="paragraph">
<p>The <code>MachineRegistration</code> is needed to perform the deployment of the SUSE® Rancher Prime: OS Manager OS on the target hosts. When booting up, each host registers to the SUSE® Rancher Prime: OS Manager Operator which tracks the new host with a <code>MachineInventory</code> resource.</p>
</div>
<div class="paragraph">
<p>Then it continues with having a Cluster resource that uses a <code>MachineInventorySelectorTemplate</code> to know which machines are for that cluster.</p>
</div>
<div class="paragraph">
<p>This selector is a simple matcher based on labels set in the <code>MachineInventory</code>, so if your selector is matching on the label <code>cluster-id</code> with a value <code>cluster-id-val</code>
and your <code>MachineInventory</code> has that same <code>cluster-id</code>:<code>cluster-id-val</code> label, it will match and be bootstrapped as part of the cluster.</p>
</div>
<div class="paragraph">
<p>In this quickstart we are going to deploy the resources to provision a cluster named <em>volcano</em> that will match on <code>MachineInventory</code>s with the label <em>element</em>:<em>fire</em>.</p>
</div>
<div id="_tabs_2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_manually_creating_the_resource_yamls" class="tab">
<p>Manually creating the resource yamls</p>
</li>
<li id="_tabs_2_using_quickstart_files_from_suse_rancher_prime_os_manager_docs_repo_directly" class="tab">
<p>Using quickstart files from SUSE® Rancher Prime: OS Manager docs repo directly</p>
</li>
</ul>
</div>
<div id="_tabs_2_manually_creating_the_resource_yamls--panel" class="tabpanel" aria-labelledby="_tabs_2_manually_creating_the_resource_yamls">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>You will need to create the following files:</p>
</div>
<div class="listingblock">
<div class="title">selector.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: MachineInventorySelectorTemplate
metadata:
  name: fire-machine-selector
  namespace: fleet-default
spec:
  template:
    spec:
      selector:
        matchExpressions:
          - key: element
            operator: In
            values: [ 'fire' ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see this is a very simple selector that looks for <code>MachineInventory`s having a label with the key `element</code> and the value <code>fire</code>.</p>
</div>
<div class="listingblock">
<div class="title">cluster.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: Cluster
apiVersion: provisioning.cattle.io/v1
metadata:
  name: volcano
  namespace: fleet-default
spec:
  rkeConfig:
    machineGlobalConfig:
      etcd-expose-metrics: false
      profile: null
    machinePools:
      - controlPlaneRole: true
        etcdRole: true
        machineConfigRef:
          apiVersion: elemental.cattle.io/v1beta1
          kind: MachineInventorySelectorTemplate
          name: fire-machine-selector
        name: fire-pool
        quantity: 1
        unhealthyNodeTimeout: 0s
        workerRole: true
    machineSelectorConfig:
      - config:
          protect-kernel-defaults: false
    registries: {}
  kubernetesVersion: v1.24.8+k3s1</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see the <code>machineConfigRef</code> is of kind <code>MachineInventorySelectorTemplate</code> with the name <code>fire-machine-selector</code>: it matches the selector we created. You can get more information about cluster options like [<code>machineGlobalConfig</code>](<a href="https://ranchermanager.docs.rancher.com/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration#machineglobalconfig" class="bare">https://ranchermanager.docs.rancher.com/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration#machineglobalconfig</a>) or [<code>machineSelectorConfig</code>](<a href="https://ranchermanager.docs.rancher.com/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration#machineselectorconfig" class="bare">https://ranchermanager.docs.rancher.com/reference-guides/cluster-configuration/rancher-server-configuration/rke2-cluster-configuration#machineselectorconfig</a>) directly in the [Rancher Manager documentation](<a href="https://ranchermanager.docs.rancher.com" class="bare">https://ranchermanager.docs.rancher.com</a>).</p>
</div>
<div id="_tabs_3" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_3_registration" class="tab">
<p>Registration</p>
</li>
<li id="_tabs_3_registration_for_raspberry_pi" class="tab">
<p>Registration for Raspberry Pi</p>
</li>
</ul>
</div>
<div id="_tabs_3_registration--panel" class="tabpanel" aria-labelledby="_tabs_3_registration">
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">register.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: fire-nodes
  namespace: fleet-default
spec:
  config:
    cloud-config:
      users:
        - name: root
          passwd: root
    elemental:
      install:
        reboot: true
        device: /dev/sda
        debug: true
  machineInventoryLabels:
    element: fire
    manufacturer: "${System Information/Manufacturer}"
    productName: "${System Information/Product Name}"
    serialNumber: "${System Information/Serial Number}"
    machineUUID: "${System Information/UUID}"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="_tabs_3_registration_for_raspberry_pi--panel" class="tabpanel" aria-labelledby="_tabs_3_registration_for_raspberry_pi">
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">rpi-registration.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: fire-nodes
  namespace: fleet-default
spec:
  config:
    cloud-config:
      users:
        - name: root
          passwd: root
    elemental:
      install:
        reboot: true
        device: /dev/mmcblk0
        debug: true
        disable-boot-entry: true
      registration:
        emulate-tpm: true
  machineInventoryLabels:
    element: fire
    manufacturer: "${System Information/Manufacturer}"
    productName: "${System Information/Product Name}"
    serialNumber: "${System Information/Serial Number}"
    machineUUID: "${System Information/UUID}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>For deployment on Raspberry Pi, you need to enable emulated TPM (except you have [a hardware TPM for Raspberry Pi](<a href="https://thepihut.com/products/letstrust-tpm-for-raspberry-pi" class="bare">https://thepihut.com/products/letstrust-tpm-for-raspberry-pi</a>)). You also need to disable writing to the EFI store (since Raspberry Pi doesn&#8217;t have one) via <code>disable-boot-entry: true</code>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>MachineRegistration</code> defines the registration and installation configuration. Once created, the SUSE® Rancher Prime: OS Manager operator exposes a unique URL to be used with the <code>elemental-register</code> binary to reach out to the management cluster and register the machine during installation: if the registration is successful, the operator creates a <code>MachineInventory</code> tracking the machine, which can be used to provision the machine as a node of our cluster. We define the label matching our selector here, although it can also be added later to the created `MachineInventory`s.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure to modify the registration.yaml above to set the proper install device to point to a valid device based on your node configuration (i.e. /dev/sda, /dev/vda, /dev/nvme0, etc...).</p>
</div>
<div class="paragraph">
<p>The SD-card on a Raspberry Pi is usually <code>/dev/mmcblk0</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="_tabs_4" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_4_seed_image_x86_64" class="tab">
<p>Seed Image (x86_64)</p>
</li>
<li id="_tabs_4_seed_image_for_raspberry_pi" class="tab">
<p>Seed Image for Raspberry Pi</p>
</li>
</ul>
</div>
<div id="_tabs_4_seed_image_x86_64--panel" class="tabpanel" aria-labelledby="_tabs_4_seed_image_x86_64">
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">seedimage.yaml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: SeedImage
metadata:
  name: fire-img
  namespace: fleet-default
spec:
  baseImage: registry.suse.com/suse/sle-micro-iso/5.5:2.0.2
  registrationRef:
    apiVersion: elemental.cattle.io/v1beta1
    kind: MachineRegistration
    name: fire-nodes
    namespace: fleet-default</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>SeedImage</code> is required to generate the <strong>seed image</strong> (like a bootable ISO) that will boot and start the SUSE® Rancher Prime: OS Manager provisioning on the target machines.</p>
</div>
<div class="paragraph">
<p>Now that we have defined all the configuration files let&#8217;s apply them to create the proper resources in Kubernetes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">kubectl apply -f selector.yaml
kubectl apply -f cluster.yaml
kubectl apply -f registration.yaml
kubectl apply -f seedimage.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="_tabs_4_seed_image_for_raspberry_pi--panel" class="tabpanel" aria-labelledby="_tabs_4_seed_image_for_raspberry_pi">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The <code>SeedImage</code> resource, which automates the creation of an SUSE® Rancher Prime: OS Manager bootable image (the <strong>seed image</strong>), does not support Raspberry Pi ISOs yet (click [here](raspi-disk.md) for a guide to build a raw disk image).</p>
</div>
<div class="paragraph">
<p>We will generate a <strong>seed image</strong> manually in the [next section](quickstart-cli.md#preparing-the-installation-seed-image).</p>
</div>
<div class="paragraph">
<p>Now that we have defined all the configuration files let&#8217;s apply them to create the proper resources in Kubernetes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">kubectl apply -f selector.yaml
kubectl apply -f cluster.yaml
kubectl apply -f registration.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="_tabs_2_using_quickstart_files_from_suse_rancher_prime_os_manager_docs_repo_directly--panel" class="tabpanel" aria-labelledby="_tabs_2_using_quickstart_files_from_suse_rancher_prime_os_manager_docs_repo_directly">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>You can directly apply the quickstart example resource files from the [SUSE® Rancher Prime: OS Manager docs repository](<a href="https://github.com/rancher/elemental-docs" class="bare">https://github.com/rancher/elemental-docs</a>).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The quickstart example resource files assume the default storage of the target host to be mapped to the <code>/dev/sda</code>. If your host storage device file is different, you have to change the registration.yaml file before applying it, changing the <code>config.elemental.install.device</code> accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">kubectl apply -f https://raw.githubusercontent.com/rancher/elemental-docs/main/examples/quickstart/selector.yaml
kubectl apply -f https://raw.githubusercontent.com/rancher/elemental-docs/main/examples/quickstart/cluster.yaml
kubectl apply -f https://raw.githubusercontent.com/rancher/elemental-docs/main/examples/quickstart/registration.yaml
kubectl apply -f https://raw.githubusercontent.com/rancher/elemental-docs/main/examples/quickstart/seedimage.yaml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>seedimage.yaml</code> does not support aarch64 currently.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preparing_the_installation_seed_image"><a class="anchor" href="#_preparing_the_installation_seed_image"></a>Preparing the installation (seed) image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the last step: you need an SUSE® Rancher Prime: OS Manager seed image that includes the initial registration config, so it can be auto registered, installed and fully deployed as part of your cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">note</div>
<div class="paragraph">
<p>The initial registration config file is generated when you create a <code>Machine Registration</code>.</p>
</div>
<div class="paragraph">
<p>You can download it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">wget --no-check-certificate `kubectl get machineregistration -n fleet-default fire-nodes -o jsonpath="{.status.registrationURL}"` -O initial-registration.yaml</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The contents of the registration config file are nothing more than the registration URL that the node needs to register, the proper server certificate and few options for the registration process.</p>
</div>
<div class="paragraph">
<p>Once generated, a seed image can be used to provision any number of machines.</p>
</div>
<div id="_tabs_5" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_5_downloading_the_quickstart_iso" class="tab">
<p>Downloading the quickstart ISO</p>
</li>
<li id="_tabs_5_preparing_the_seed_image_aarch64_manually" class="tab">
<p>Preparing the seed image (aarch64) manually</p>
</li>
</ul>
</div>
<div id="_tabs_5_downloading_the_quickstart_iso--panel" class="tabpanel" aria-labelledby="_tabs_5_downloading_the_quickstart_iso">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The seed image created by the <code>SeedImage</code> resource above can be downloaded as an ISO via the following script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl wait --for=condition=ready pod -n fleet-default fire-img
wget --no-check-certificate `kubectl get seedimage -n fleet-default fire-img -o jsonpath="{.status.downloadURL}"` -O elemental.x86_64.iso</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first command waits for the ISO to be built and ready, the second one downloads it in the current directory with the name <code>elemental-x86_64.iso</code>.</p>
</div>
</div>
</div>
</div>
<div id="_tabs_5_preparing_the_seed_image_aarch64_manually--panel" class="tabpanel" aria-labelledby="_tabs_5_preparing_the_seed_image_aarch64_manually">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>SUSE® Rancher Prime: OS Manager&#8217;s support for Raspberry Pi is primarily for demonstration purposes at this point. Therefore the installation process is modelled similar to x86-64. You boot from a seed image (an USB stick in this case) and install to a storage medium (SD-card for Raspberry Pi).</p>
</div>
<div class="paragraph">
<p><strong>Retrieving the prebuilt seed image</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">wget -q https://download.opensuse.org/repositories/isv:/Rancher:/SUSE® Rancher Prime OS Manager:/Stable/containers/rpi.raw</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Verifying the download</em></p>
</div>
<div class="paragraph">
<p>In order to verify the integrity of the downloaded artifacts, you should do a checksum verification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">wget -q https://download.opensuse.org/repositories/isv:/Rancher:/SUSE® Rancher Prime OS Manager:/Stable/containers/rpi.raw.sha256 sha256sum -c rpi.raw.sha256</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should print <code>rpi.raw: OK</code> as output.</p>
</div>
<div class="paragraph">
<p><strong>Injecting the registration information</strong></p>
</div>
<div class="paragraph">
<p>Adding the <code>initial-registration.yaml</code> isn&#8217;t scripted yet. This is still a manual process:</p>
</div>
<div class="paragraph">
<p>The written USB stick will have two partitions. <code>RPI_BOOT</code> contains the boot loader files and <code>COS_LIVE</code> the SUSE® Rancher Prime: OS Manager files. Mount the <code>COS_LIVE</code> partition and write <code>initial-registration.yaml</code> as <code>livecd-cloud-config.yaml</code> to this partition.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve mounted the USB stick with a file manager, this command should work to copy the registration information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">sudo cp initial-registration.yaml /run/media/$USER/COS_LIVE/livecd-cloud-config.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer using some CLI tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">IMAGE=rpi.raw
DEST=$(mktemp -d)

SECTORSIZE=$(sfdisk -J $\{IMAGE} | jq '.partitiontable.sectorsize')
DATAPARTITIONSTART=$(sfdisk -J $\{IMAGE} | jq '.partitiontable.partitions[1].start')
sudo mount -o rw,loop,offset=$(($\{SECTORSIZE}*$\{DATAPARTITIONSTART})) $\{IMAGE} $\{DEST}
sudo cp initial-registration.yaml $\{DEST}/livecd-cloud-config.yaml
sudo umount $\{DEST}
rmdir $\{DEST}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Writing the seed image to a USB stick</strong></p>
</div>
<div class="paragraph">
<p>The <code>.raw</code> image needs to be written to a USB stick to boot from. This can be done with <code>dd</code> on the Linux command line if you&#8217;re comfortable with this command. [openSUSE](<a href="https://www.opensuse.org" class="bare">https://www.opensuse.org</a>) has nice instructions on how to write an image to a storage medium for [Linux](<a href="https://en.opensuse.org/SDB:Live_USB_stick" class="bare">https://en.opensuse.org/SDB:Live_USB_stick</a>), [Windows](<a href="https://en.opensuse.org/SDB:Create_a_Live_USB_stick_using_Windows" class="bare">https://en.opensuse.org/SDB:Create_a_Live_USB_stick_using_Windows</a>), and [OS X](<a href="https://en.opensuse.org/SDB:Create_a_Live_USB_stick_using_macOS" class="bare">https://en.opensuse.org/SDB:Create_a_Live_USB_stick_using_macOS</a>).</p>
</div>
<div class="paragraph">
<p><strong>Booting the Raspberry Pi</strong></p>
</div>
<div class="paragraph">
<p>Now unmount the USB stick and plug it into your Raspberry Pi.</p>
</div>
<div class="paragraph">
<p>Plug a large (32 GB or more) and <strong>fast</strong> (!!) micro SD-card into the respective slot.</p>
</div>
<div class="paragraph">
<p>Connect the system to ethernet.</p>
</div>
<div class="paragraph">
<p>A powercycle will reboot the Pi. Everything else is identical to x86-64.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure the micro SD-card is unpartitioned. Otherwise the Pi bootloader will try to boot from it and fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now boot your nodes with this image and they will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register with the registrationURL given and create a per-machine <code>MachineInventory</code></p>
</li>
<li>
<p>Install SLE Micro to the given device</p>
</li>
<li>
<p>Reboot</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selecting_the_right_machines_to_join_a_cluster"><a class="anchor" href="#_selecting_the_right_machines_to_join_a_cluster"></a>Selecting the right machines to join a cluster</h3>
<div class="paragraph">
<p>The <code>MachineInventorySelectorTemplate</code> selects the machines needed to provision the cluster from the <code>MachineInventory</code>s having the <em>element:fire</em> label.
We have added the <em>element</em>:<em>fire</em> label in the <code>MachineRegistration</code> <code>machineInventoryLabels</code> map, so all the <code>MachineInventory</code>s originated from it already have the label.
One could anyway skip the label from the <code>MachineRegistration</code> and add it later:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl -n fleet-default label machineinventory $(kubectl get machineinventory -n fleet-default --no-headers -o custom-columns=":metadata.name") element=fire</code></pre>
</div>
</div>
<div class="paragraph">
<p>As soon as <code>MachineInventory</code>s with the <em>element</em>:<em>fire</em> are present, the corresponding machines auto-deploy the cluster via the chosen provider (k3s/rke).</p>
</div>
<div class="paragraph">
<p>After a few minutes your new cluster will be fully provisioned!!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_can_i_choose_the_kubernetes_version_and_deployer_for_the_cluster"><a class="anchor" href="#_how_can_i_choose_the_kubernetes_version_and_deployer_for_the_cluster"></a>How can I choose the kubernetes version and deployer for the cluster?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In your cluster.yaml file there is a key in the <code>Spec</code> called <code>kubernetesVersion</code>. That sets the version and deployer that will be used for the cluster,
for example Kubernetes<code>v1.24.8</code> for rke2 would be <code>v1.24.8+rke2r1</code> and for k3s <code>v1.24.8+k3s1</code>.</p>
</div>
<div class="paragraph">
<p>To see all compatible versions check the <a href="https://www.suse.com/suse-rancher/support-matrix/all-supported-versions/">Rancher Support Matrix</a> PDF for rke/rke2/k3s versions and their components.</p>
</div>
<div class="paragraph">
<p>You can also check our <a href="kubernetesversions.html" class="xref page">Version doc</a> to know how to obtain those versions.</p>
</div>
<div class="paragraph">
<p>Check our <a href="cluster-reference.html" class="xref page">Cluster Spec</a> page for more info about the <code>Cluster</code> resource.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_can_i_follow_what_is_going_on_behind_the_scenes"><a class="anchor" href="#_how_can_i_follow_what_is_going_on_behind_the_scenes"></a>How can I follow what is going on behind the scenes?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You should be able to follow along what the machine is doing via:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>During ISO boot:</p>
<div class="ulist">
<ul>
<li>
<p>ssh into the machine (user/pass: root/ros):</p>
<div class="ulist">
<ul>
<li>
<p>running <code>journalctl -f -t elemental</code> shows you the progress of the registration (<em>elemental-register</em>) and the installation of SUSE® Rancher Prime: OS Manager (<em>elemental install</em>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Once the system is installed:</p>
<div class="ulist">
<ul>
<li>
<p>On the Rancher UI -&gt; <code>Cluster Management</code> allows you to see your new cluster and the <code>Provisioning Log</code> in the cluster details</p>
</li>
<li>
<p>ssh into the machine (user/pass: Whatever your configured on the registration.yaml under <code>Spec.config.cloud-config.users</code>):</p>
<div class="ulist">
<ul>
<li>
<p>running <code>journalctl -f -u elemental-system-agent</code> shows the output of the initial elemental config and the installation of the <code>rancher-system-agent</code></p>
</li>
<li>
<p>running <code>journalctl -f -u rancher-system-agent</code> shows the output of the bootstrap of cluster components like k3s</p>
</li>
<li>
<p>running <code>journalctl -f -u k3s</code> shows the logs of the k3s deployment</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="quickstart-ui.html">SUSE® Rancher Prime: OS Manager the visual way</a></span>
  <span class="next"><a href="architecture.html">Architecture</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
<script src="../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>


<script src="../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
