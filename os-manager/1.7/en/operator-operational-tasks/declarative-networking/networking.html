<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>Network configuration with SUSE® Rancher Prime: OS Manager | OS Manager  1.7</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/os-manager/1.8/en/operator-operational-tasks/declarative-networking/networking.html">
    <link rel="prev" href="../certificate-authority.html">
    <link rel="next" href="networking-static.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-09-08"/>
<link rel="stylesheet" href="../../../../../_/css/search.css">
<link rel="icon" href="../../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<link rel="stylesheet" href="../../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>
<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/assets");
</script>
<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/os-manager/1.7/en/operator-operational-tasks/declarative-networking/networking.html" hreflang="x-default" rel="alternate"/>
<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/os-manager/1.7/en/operator-operational-tasks/declarative-networking/networking.html" hrefLang="en-US" rel="alternate" />

<!-- JSON-LD for doc metadata -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "name": "Network configuration with SUSE® Rancher Prime: OS Manager | SUSE Rancher Prime: OS Manager 1.7",
  "headline": "Network configuration with SUSE® Rancher Prime: OS Manager",
  "description": "Network configuration with SUSE® Rancher Prime: OS Manager",
  "inLanguage": "en",
  "dateModified": "2025-09-08T00:00:00Z",
  "author": {
    "@type": "Organization",
    "name": "SUSE Product & Solution Documentation Team",
    "url": "https://documentation.suse.com"
  },
  "mentions": [
    {
      "@type": "SoftwareApplication",
      "name": "SUSE Rancher Prime: OS Manager",
      "softwareVersion": "1.7",
      "applicationCategory": "Cloud Infrastructure",
      "operatingSystem": "Linux"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "SUSE",
    "url": "https://documentation.suse.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
    }
  }
}
</script>
<!-- end JSON-LD for doc metadata -->
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><shared-header
language="en"
languages='{
    "en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
    "de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
    "fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
    "es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
    "zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
    "pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'
enable-search='false'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="os-manager" data-version="1.7">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">OS Manager</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Quickstarts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../quickstarts/quickstart-ui.html">SUSE® Rancher Prime: OS Manager the visual way</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../quickstarts/quickstart-cli.html">SUSE® Rancher Prime: OS Manager the command line way</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher OS Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../rancher-os-management/architecture/architecture.html">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../rancher-os-management/architecture/architecture-components.html">SUSE® Rancher Prime: OS Manager Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../rancher-os-management/architecture/custom-resources.html">Custom Resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../rancher-os-management/architecture/services/architecture-services.html">Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../rancher-os-management/architecture/services/architecture-machineonboarding.html">Machine onboarding</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../rancher-os-management/architecture/services/architecture-clusterdeployment.html">Kubernetes cluster provisioning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../rancher-os-management/authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../rancher-os-management/plans.html">Plans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../rancher-os-management/upgrade-lifecycle.html">Upgrade lifecycle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../installation/customize-installation/custom-install.html">Customize installation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/customize-installation/extra-rpms.html">Add third party RPMs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../installation/customize-installation/lvm-drives-example.html">Extra LVM volume group</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/hostname.html">Customize hostname</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/ntp.html">Configure NTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/removable-device-cloudconfig.html">Include cloud-config from removable devices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/custom-certificate.html">Add custom certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/raspi-disk.html">Install on Raspberry Pi</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/reset.html">Machine reset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/behind-proxy.html">Behind a proxy configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../node-operational-tasks/rancher-vmware.html">Using Elemental with Rancher and VMware</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Operator operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../airgap.html">Airgap install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../channels.html">Channels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../certificate-authority.html">Certificate Authority Verification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Declarative Networking</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="networking.html">IPAM Driven Networking</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="networking-static.html">Static Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../custom-images.html">Build Custom OS Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../unmanaged-os.html">Register an Unmanaged OS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tpm.html">Trusted Platform Module (TPM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rancher-ip.html">Rancher IP Address Options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../label-templates/label-templates.html">Label Templates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-baseboard.html">BaseBoard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-bios.html">BIOS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-chassis.html">Chassis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-cpu.html">CPU</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-gpu.html">GPU</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-memory.html">Memory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-product.html">Product</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-random.html">Random</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-runtime.html">Runtime</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-storage.html">Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../label-templates/label-templates-deprecated.html">Deprecated Variables</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-rancher-upgrades.html">Rancher upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-reset.html">Reset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-network.html">Declarative Networking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting/troubleshooting-label-templates.html">Label Templates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/cloud-config-reference.html">Cloud-config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineregistration-reference.html">MachineRegistration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineinventory-reference.html">MachineInventory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineinventoryselector-reference.html">MachineInventorySelector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/machineinventoryselectortemplate-reference.html">MachineInventorySelectorTemplate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/managedosimage-reference.html">ManagedOSImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/managedosversionchannel-reference.html">ManagedOSVersionChannel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/managedosversion-reference.html">ManagedOSVersion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/seedimage-reference.html">SeedImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/cluster-reference.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/operatorchart-reference.html">SUSE® Rancher Prime: OS Manager Operator Helm chart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/kubernetesversions.html">Kubernetes versions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/inventory-management.html">Inventory management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../release-notes.html">Release notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OS Manager</span>
    <span class="version">1.7</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../../admission-controller/1.31/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../admission-controller/1.32/en/introduction.html">1.32-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../admission-controller/1.31/en/introduction.html">1.31-latest</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.30/en/introduction.html">1.30</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../cluster-api/v0.25/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../cluster-api/v0.25/en/index.html">0.25</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../continuous-delivery/v0.14/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../continuous-delivery/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../../1.8/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../1.9/en/index.html">1.9-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../1.8/en/index.html">1.8</a>
            </li>
            <li class="version is-current">
              <a href="../../index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher for AWS</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">v2.13</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../storage/1.10/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.9/en/longhorn-documentation.html">1.9</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../suse-virtual-clusters/v1.0.1/en/introduction.html">SUSE® Virtual Clusters</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../suse-virtual-clusters/1.0.2/en/introduction.html">1.0.2-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../suse-virtual-clusters/v1.0.1/en/introduction.html">v1.0.1-latest</a>
            </li>
            <li class="version">
              <a href="../../../../../suse-virtual-clusters/v1.0.0/en/introduction.html">v1.0.0</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../virtualization/v1.6/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../virtualization/v1.7/en/introduction/overview.html">v1.7 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../virtualization/v1.6/en/introduction/overview.html">v1.6 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../virtualization/v1.5/en/introduction/overview.html">v1.5</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a class="home-link-dsc" href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home"></a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/os-manager" title="OS Manager" aria-label="SUSE Documentation - OS Manager">
        OS Manager
      </a>
    </li>
      <li>
          Operator operational tasks
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.7</button>
  <div class="version-menu">
    <a class="version" href="../../../../1.9/en/operator-operational-tasks/declarative-networking/networking.html">1.9-dev</a>
    <a class="version" href="../../../../1.8/en/operator-operational-tasks/declarative-networking/networking.html">1.8</a>
    <a class="version is-current" href="networking.html">1.7</a>
    <a class="version is-missing" href="../../../../1.6/en/index.html">1.6</a>
    <a class="version is-missing" href="../../../../1.5/en/index.html">1.5</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/elemental-product-docs/edit/main/docs/1.7/modules/en/pages/operator-operational-tasks/declarative-networking/networking.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:os-manager" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Network configuration with SUSE® Rancher Prime: OS Manager</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="title">warning</div>
<div class="paragraph">
<p>Declarative Networking is in <strong>technology preview</strong> state with limited support.
As such it is not recommended for production environments.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <a href="../../references/machineregistration-reference.html" class="xref page">MachineRegistration</a> supports Declarative Networking and integration with <a href="https://github.com/kubernetes-sigs/cluster-api/blob/main/docs/proposals/20220125-ipam-integration.md#ipam-provider">CAPI IPAM Providers</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>A DHCP server is still required for the first boot registration and reset of machines. For this reason Lease Time can be kept minimal, as for the entire lifecycle of the machine, the IPAM driven IP Addresses will be used.</p>
</li>
<li>
<p>An IPAM Provider of your choice is installed on the Rancher management cluster.
For example the <a href="https://github.com/kubernetes-sigs/cluster-api-ipam-provider-in-cluster">InCluster IPAM Provider</a>.</p>
</li>
<li>
<p><a href="https://networkmanager.dev">NetworkManager</a> needs to be installed on OS images and it can be directly configured using the <code>nmconnections</code> network <a href="#_configurators">configurator</a>.
Already included in Elemental provided images.</p>
</li>
<li>
<p>(optionally) <a href="https://github.com/suse-edge/nm-configurator/releases">nmc</a> can be used with <code>nmc</code> network <a href="#_configurators">configurator</a>.</p>
</li>
<li>
<p>(optionally) <a href="https://github.com/nmstate/nmstate/releases">nmstatectl</a> can be used with <code>nmstate</code> network <a href="#_configurators">configurator</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_installing_nmc_or_nmstatectl_on_os_images"><a class="anchor" href="#_installing_nmc_or_nmstatectl_on_os_images"></a>Installing nmc or nmstatectl on OS images</h3>
<div class="paragraph">
<p>When using the <code>nmc</code> or <code>nmstate</code> configurators, the <a href="https://github.com/suse-edge/nm-configurator/releases">nmc</a> or <a href="https://github.com/nmstate/nmstate/releases">nmstatectl</a> tools need to be installed on the machine.</p>
</div>
<div class="paragraph">
<p>Currently this can be achieved by <a href="../custom-images.html#_remastering_an_os_image_with_a_custom_dockerfile" class="xref page">customizing an Elemental OS image</a> with a custom command:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_nmc" class="tab">
<p>nmc</p>
</li>
<li id="_tabs_1_nmstatectl" class="tab">
<p>nmstatectl</p>
</li>
</ul>
</div>
<div id="_tabs_1_nmc--panel" class="tabpanel" aria-labelledby="_tabs_1_nmc">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Install nmc
RUN curl -LO https://github.com/suse-edge/nm-configurator/releases/download/v0.3.3/nmc-linux-x86_64 &amp;&amp; \ install -o root -g root -m 0755 nmc-linux-x86_64 /usr/sbin/nmc</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_nmstatectl--panel" class="tabpanel" aria-labelledby="_tabs_1_nmstatectl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Install nmstatectl
RUN curl -LO https://github.com/nmstate/nmstate/releases/download/v2.2.40/nmstatectl-linux-x64.zip &amp;&amp; \ unzip nmstatectl-linux-x64.zip &amp;&amp; \ chmod +x nmstatectl &amp;&amp; \ mv ./nmstatectl /usr/sbin/nmstatectl &amp;&amp; \ rm nmstatectl-linux-x64.zip</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_install_the_capi_ipam_provider"><a class="anchor" href="#_how_to_install_the_capi_ipam_provider"></a>How to install the CAPI IPAM Provider</h3>
<div class="paragraph">
<p>The recommended way to install any CAPI Provider into Rancher is to use <a href="https://documentation.suse.com/cloudnative/cluster-api/v0.22/en/index.html">Rancher Turtles</a>.</p>
</div>
<div class="paragraph">
<p>Rancher Turtles will allow the user to install and manage the lifecycle of any CAPI Provider. To install it on your system please follow the <a href="https://documentation.suse.com/cloudnative/cluster-api/v0.22/en/tutorials/quickstart.html">Rancher Turtles installation documentation</a>.</p>
</div>
<div class="paragraph">
<p>Once Rancher Turtles is installed, installing an IPAM CAPI Provider, for example the <a href="https://github.com/kubernetes-sigs/cluster-api-ipam-provider-in-cluster">InCluster IPAM Provider</a>, can be accomplished applying the following resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: CAPIProvider
metadata:
  name: in-cluster
  namespace: default
spec:
  name: in-cluster
  type: ipam
  fetchConfig:
    url: "https://github.com/kubernetes-sigs/cluster-api-ipam-provider-in-cluster/releases"
  version: v0.1.0</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_without_rancher_turtles"><a class="anchor" href="#_without_rancher_turtles"></a>Without Rancher Turtles</h4>
<div class="paragraph">
<p>An alternative option to install a CAPI IPAM Provider is to directly apply the manifest in the Rancher cluster.</p>
</div>
<div class="paragraph">
<p>Note that this solution may eventually lead to conflicts with the applied CRDs and resources, as they need to be applied and maintained manually.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>ipaddresses.ipam.cluster.x-k8s.io</code> and <code>ipaddressclaims.ipam.cluster.x-k8s.io</code> CRDs must be installed on the Rancher management cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"> kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/cluster-api/main/config/crd/bases/ipam.cluster.x-k8s.io_ipaddressclaims.yaml
 kubectl apply -f https://raw.githubusercontent.com/kubernetes-sigs/cluster-api/main/config/crd/bases/ipam.cluster.x-k8s.io_ipaddresses.yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">info</div>
<div class="paragraph">
<p>These CRDs are expected to eventually be part of Rancher, not requiring manual installation. See: <a href="https://github.com/rancher/rancher/issues/46385" class="bare">https://github.com/rancher/rancher/issues/46385</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the <a href="https://github.com/kubernetes-sigs/cluster-api-ipam-provider-in-cluster">InCluster IPAM Provider</a> from the released manifest:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"> kubectl apply -f https://github.com/kubernetes-sigs/cluster-api-ipam-provider-in-cluster/releases/download/v0.1.0/ipam-components.yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_network"><a class="anchor" href="#_configuring_network"></a>Configuring Network</h3>
<div class="paragraph">
<p>The <code>network</code> section of the <code>MachineRegistration</code> allows users to define:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A map of IPPool references.</p>
</li>
<li>
<p>A network config template (in this case <code>nmc</code> configurator is in use).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">example MachineRegistration using Declarative Networking</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-inventory-pool
  namespace: fleet-default
spec:
  addresses:
    - 192.168.122.150-192.168.122.200
  prefix: 24
  gateway: 192.168.122.1
---
apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: fire-nodes
  namespace: fleet-default
spec:
  machineName: m-${Product/UUID}
  config:
    network:
      configurator: nmc
      ipAddresses:
        inventory-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-inventory-pool
      config:
        dns-resolver:
          config:
            server:
            - 192.168.122.1
            search: []
        routes:
          config:
          - destination: 0.0.0.0/0
            next-hop-interface: eth0
            next-hop-address: 192.168.122.1
            metric: 150
            table-id: 254
        interfaces:
          - name: eth0
            type: ethernet
            description: Main-NIC
            state: up
            ipv4:
              enabled: true
              dhcp: false
              address:
              - ip: "{inventory-ip}"
                prefix-length: 24
            ipv6:
              enabled: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we can observe that one <code>InClusterIPPool</code> has been defined, since we are using the <a href="https://github.com/kubernetes-sigs/cluster-api-ipam-provider-in-cluster">InCluster IPAM Provider</a> for this example.</p>
</div>
<div class="paragraph">
<p>Next we are going to reference this IPPool in the <code>MachineRegistration</code>. The key for this reference is <code>inventory-ip</code>, and we are only going to need one IP per registered Machine. If your machine has more than one NIC, you can define more references, and use different IPPools as well, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">ipAddresses:
  main-nic-ip:
    apiGroup: ipam.cluster.x-k8s.io
    kind: InClusterIPPool
    name: elemental-inventory-pool
  secondary-nic-ip:
    apiGroup: ipam.cluster.x-k8s.io
    kind: InClusterIPPool
    name: elemental-inventory-pool
  private-nic-ip:
    apiGroup: ipam.cluster.x-k8s.io
    kind: InClusterIPPool
    name: elemental-private-pool</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each defined IPPool reference key can be used for the network config template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">config:
  dns-resolver:
    config:
      server:
      - 192.168.122.1
      search: []
  routes:
    config:
    - destination: 0.0.0.0/0
      next-hop-interface: eth0
      next-hop-address: 192.168.122.1
      metric: 150
      table-id: 254
  interfaces:
    - name: eth0
      type: ethernet
      description: Main-NIC
      state: up
      ipv4:
        enabled: true
        dhcp: false
        address:
        - ip: "{inventory-ip}"
          prefix-length: 24
      ipv6:
        enabled: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>The snippet above is almost 1:1 <a href="https://github.com/suse-edge/nm-configurator?tab=readme-ov-file#unified-configurations">nm-configurator syntax</a>, with the only exception of the <code>{inventory-ip}</code> placeholder. During the installation or reset phases of Elemental machines, the <code>elemental-operator</code> will claim one IP Address from the referenced IP Pool, and substitute the <code>{inventory-ip}</code> placeholder with a real IP Address.</p>
</div>
</div>
<div class="sect2">
<h3 id="_claimed_ipaddresses"><a class="anchor" href="#_claimed_ipaddresses"></a>Claimed IPAddresses</h3>
<div class="paragraph">
<p>The <code>IPAddressClaim</code> will follow the entire lifecycle of the <code>MachineInventory</code>, ensuring that each registered machine will be assigned unique IPs. Each claim is named after the <code>MachineInventory</code> that uses it, as <code>$MachineInventoryName-$IPPoolRefKey</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: ipam.cluster.x-k8s.io/v1beta1
kind: IPAddressClaim
metadata:
  finalizers:
    - ipam.cluster.x-k8s.io/ReleaseAddress
  name: m-e5331e3b-1e1b-4ce7-b080-235ed9a6d07c-inventory-ip
  namespace: fleet-default
  ownerReferences:
    - apiVersion: elemental.cattle.io/v1beta1
      kind: MachineInventory
      name: m-e5331e3b-1e1b-4ce7-b080-235ed9a6d07c
spec:
  poolRef:
    apiGroup: ipam.cluster.x-k8s.io
    kind: InClusterIPPool
    name: elemental-inventory-pool
status:
  addressRef:
    name: m-e5331e3b-1e1b-4ce7-b080-235ed9a6d07c-inventory-ip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Whenever a <code>MachineInventory</code> is deleted, the default (DHCP) network configuration will be restored, deleting any network profile on the machine and restarting the network stack. Finally the assigned IPs will be released.</p>
</div>
<div class="paragraph">
<p>For more information and details on how troubleshoot issues, please consult the <a href="../../troubleshooting/troubleshooting-network.html" class="xref page">Troubleshooting Declarative Networking documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configurators"><a class="anchor" href="#_configurators"></a>Configurators</h3>
<div class="paragraph">
<p>On the Elemental machine, <code>elemental-register</code> can configure the <code>NetworkManager</code> in different ways. The configurator in use is defined in the <a href="../../references/machineregistration-reference.html#_config_network" class="xref page">MachineRegistration.spec.network</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/suse-edge/nm-configurator">nmc</a></p>
</li>
<li>
<p><a href="https://nmstate.io/">nmstate</a></p>
</li>
<li>
<p><a href="https://networkmanager.pages.freedesktop.org/NetworkManager/NetworkManager/nm-settings-keyfile.html">nmconnections</a></p>
</li>
</ul>
</div>
<div id="_tabs_2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_nmc" class="tab">
<p>nmc</p>
</li>
<li id="_tabs_2_nmstate" class="tab">
<p>nmstate</p>
</li>
<li id="_tabs_2_nmconnections" class="tab">
<p>nmconnections</p>
</li>
</ul>
</div>
<div id="_tabs_2_nmc--panel" class="tabpanel" aria-labelledby="_tabs_2_nmc">
<div class="paragraph">
<p>The <code>nmc</code> configurator uses the <a href="https://github.com/suse-edge/nm-configurator?tab=readme-ov-file#unified-configurations">nm-configurator unified syntax</a> to generate NetworkManager&#8217;s connection files.</p>
</div>
<div class="listingblock">
<div class="title">example MachineRegistration using nmc configurator</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-inventory-pool
  namespace: fleet-default
spec:
  addresses:
    - 192.168.122.150-192.168.122.200
  prefix: 24
  gateway: 192.168.122.1
---
apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-secondary-pool
  namespace: fleet-default
spec:
  addresses:
    - 172.16.0.150-172.16.0.200
  prefix: 24
  gateway: 172.16.0.1
---
apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: fire-nodes
  namespace: fleet-default
spec:
  machineName: m-${System Information/UUID}
  config:
    network:
      configurator: nmc
      ipAddresses:
        inventory-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-inventory-pool
        secondary-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-secondary-pool
      config:
        dns-resolver:
          config:
            server:
            - 192.168.122.1
            search: []
        routes:
          config:
          - destination: 0.0.0.0/0
            next-hop-interface: eth0
            next-hop-address: 192.168.122.1
            metric: 150
            table-id: 254
          - destination: 172.16.0.1/24
            next-hop-interface: eth1
            next-hop-address: 172.16.0.1
            metric: 150
            table-id: 254
        interfaces:
          - name: eth0
            type: ethernet
            description: Main-NIC
            state: up
            ipv4:
              enabled: true
              dhcp: false
              address:
              - ip: "{inventory-ip}"
                prefix-length: 24
            ipv6:
              enabled: false
          - name: eth1
            type: ethernet
            description: Secondary-NIC
            state: up
            ipv4:
              enabled: true
              dhcp: false
              address:
              - ip: "{secondary-ip}"
                prefix-length: 24
            ipv6:
              enabled: false</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_nmstate--panel" class="tabpanel" aria-labelledby="_tabs_2_nmstate">
<div class="paragraph">
<p>The <code>nmstate</code> configurator uses <a href="https://nmstate.io/examples.html">nmstate syntax</a> to generate NetworkManager&#8217;s connection files. Note that <a href="https://github.com/nmstate/nmstate/releases">nmstatectl</a> needs to be installed on the Elemental system to use this configurator. This is not included by default in Elemental images, but can be installed when building a <a href="../custom-images.html" class="xref page">custom image</a>.</p>
</div>
<div class="listingblock">
<div class="title">example MachineRegistration using nmstate configurator</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-inventory-pool
  namespace: fleet-default
spec:
  addresses:
    - 192.168.122.150-192.168.122.200
  prefix: 24
  gateway: 192.168.122.1
---
apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-secondary-pool
  namespace: fleet-default
spec:
  addresses:
    - 172.16.0.150-172.16.0.200
  prefix: 24
  gateway: 172.16.0.1
---
apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: fire-nodes
  namespace: fleet-default
spec:
  machineName: m-${System Information/UUID}
  config:
    network:
      configurator: nmstate
      ipAddresses:
        inventory-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-inventory-pool
        secondary-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-secondary-pool
      config:
        dns-resolver:
          config:
            server:
            - 192.168.122.1
            search: []
        routes:
          config:
          - destination: 0.0.0.0/0
            next-hop-interface: eth0
            next-hop-address: 192.168.122.1
            metric: 150
            table-id: 254
          - destination: 172.16.0.1/24
            next-hop-interface: eth1
            next-hop-address: 172.16.0.1
            metric: 150
            table-id: 254
        interfaces:
          - name: eth0
            type: ethernet
            description: Main-NIC
            state: up
            ipv4:
              enabled: true
              dhcp: false
              address:
              - ip: "{inventory-ip}"
                prefix-length: 24
            ipv6:
              enabled: false
          - name: eth1
            type: ethernet
            description: Secondary-NIC
            state: up
            ipv4:
              enabled: true
              dhcp: false
              address:
              - ip: "{secondary-ip}"
                prefix-length: 24
            ipv6:
              enabled: false</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_nmconnections--panel" class="tabpanel" aria-labelledby="_tabs_2_nmconnections">
<div class="paragraph">
<p>The <code>nmconnections</code> configurator is the simplest option available and allows the user to directly write <code>nmconnection</code> files. Defining these files for complex network setups may be challenging, but it&#8217;s always possible to use <a href="https://networkmanager.dev/docs/api/latest/nmcli.html">nmcli</a>, or even <a href="https://nmstate.io">nmstate</a>, or [nm-configurator](<a href="https://github.com/suse-edge/nm-configurator" class="bare">https://github.com/suse-edge/nm-configurator</a>), and use the generated <code>nmconnection</code> files as a template. This configurator only needs <code>NetworkManager</code>, without any extra dependency. .example MachineRegistration using nmconnections configurator.</p>
</div>
<details>
<summary class="title">Click here for example MachineRegistration using nmstate configurator</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-inventory-pool
  namespace: fleet-default
spec:
  addresses:
    - 192.168.122.150-192.168.122.200
  prefix: 24
  gateway: 192.168.122.1
---
apiVersion: ipam.cluster.x-k8s.io/v1alpha2
kind: InClusterIPPool
metadata:
  name: elemental-secondary-pool
  namespace: fleet-default
spec:
  addresses:
    - 172.16.0.150-172.16.0.200
  prefix: 24
  gateway: 172.16.0.1
---
apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: fire-nodes
  namespace: fleet-default
spec:
  machineName: test-${System Information/UUID}
  config:
    network:
      configurator: "nmconnections"
      ipAddresses:
        inventory-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-inventory-pool
        secondary-ip:
          apiGroup: ipam.cluster.x-k8s.io
          kind: InClusterIPPool
          name: elemental-secondary-pool
      config:
        eth0: |
          [connection]
          id=Wired connection 1
          type=ethernet
          interface-name=eth0
          [ipv4]
          address1={inventory-ip}/24,192.168.1.1
          dns=192.168.122.1;
          method=manual
          route1=0.0.0.0/0,192.168.122.1
          [ipv6]
          method=disabled
        eth1: |
          [connection]
          id=Wired connection 2
          type=ethernet
          interface-name=eth1
          [ipv4]
          address1={secondary-ip}/24,172.16.0.1
          method=manual
          route1=172.16.0.0/24,172.16.0.1,150
          [ipv6]
          method=disabled</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../certificate-authority.html">Certificate Authority Verification</a></span>
  <span class="next"><a href="networking-static.html">Static Configuration</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
<script src="../../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
