<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cluster Autoscaler with AWS EC2 Auto Scaling Groups :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/rancher-manager/latest/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html">
    <link rel="prev" href="install-cluster-autoscaler.html">
    <link rel="next" href="../cluster-templates.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2024-12-13"/>
<link rel="stylesheet" href="../../../../../../_/css/search.css">
<link rel="icon" href="../../../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>

<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.5/assets");
</script>    <script>var uiRootPath = '../../../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><!-- Canonical link -->
<link href="https://documentation.suse.com/cloudnative/rancher-manager/latest/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html" rel="canonical"/>

<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/rancher-manager/v2.10/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html" hreflang="x-default" rel="alternate"/>

<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/rancher-manager/v2.10/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html" hrefLang="en-US" rel="alternate" />





<!-- Link for the Chinese page -->
<link href="https://documentation.suse.com/cloudnative/rancher-manager/v2.10/zh/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html" hreflang="zh-CN" rel="alternate" />






<shared-header language="en" languages='{
"en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
"de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
"fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
"es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
"zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
"pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="rancher-manager" data-version="v2.10">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">SUSE® Rancher Manager</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../release-notes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">About Rancher</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../about-rancher/what-is-rancher.html">What is SUSE Rancher Prime?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../about-rancher/prime.html">Cloud Native</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../about-rancher/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../about-rancher/architecture/architecture.html">SUSE Rancher Prime Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../about-rancher/architecture/recommendations.html">Architecture Recommendations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../about-rancher/architecture/communicating-with-downstream-clusters.html">Communicating with Downstream User Clusters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../about-rancher/architecture/rancher-server-and-components.html">SUSE Rancher Prime Server and Components</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../about-rancher/concepts.html">Kubernetes Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../about-rancher/glossary.html">Glossary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/installation-and-upgrade.html">Installation and Upgrades</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/quick-start.html">SUSE Rancher Prime Deployment Quick Start Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-rancher/deploy-rancher.html">Deploying SUSE Rancher Prime Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-rancher/helm-cli.html">Helm CLI Quick Start</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-rancher/aws-marketplace.html">Cloud Native AWS Marketplace Quick Start</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-rancher/equinix-metal.html">SUSE Rancher Prime Equinix Metal Quick Start</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-workloads/deploy-workloads.html">Deploying Workloads</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-workloads/workload-ingress.html">Workload with Ingress Quick Start</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/quick-start/deploy-workloads/nodeports.html">Workload with NodePort Quick Start</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/requirements/requirements.html">Installation Requirements</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/requirements/install-docker.html">Installing Docker</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/requirements/dockershim.html">Dockershim</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/requirements/port-requirements.html">Port Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/requirements/helm-version-requirements.html">Helm Version Requirements</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/best-practices.html">Best Practices for the SUSE Rancher Prime Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/deployment-strategy.html">SUSE Rancher Prime Deployment Strategy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/tips-for-running-rancher.html">Tips for Running SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/tuning-rancher-at-scale.html">Tuning and Best Practices for SUSE Rancher Prime at Scale</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/tuning-etcd-for-large-installs.html">Tuning etcd for Large Installations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/high-availability-installs.html">About High-availability Installations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/rancher-on-vsphere.html">Installing SUSE Rancher Prime in a VMware vSphere Environment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/best-practices/resources.html">Other Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/references/references.html">Installation References</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/references/helm-chart-options.html">SUSE Rancher Prime Helm Chart Options</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/references/tls-settings.html">TLS Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/references/feature-flags.html">Feature Flags</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/resources/resources.html">Resources</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/resources/bootstrap-password.html">Setting up the Bootstrap Password</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/resources/tls-secrets.html">Adding TLS Secrets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/resources/custom-ca-root-certificates.html">About Custom CA Root Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/resources/update-rancher-certificate.html">Updating the SUSE Rancher Prime Certificate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/resources/upgrade-cert-manager.html">Upgrading Cert-Manager</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/infrastructure-setup.html">Infrastructure Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/ha-k3s-kubernetes-cluster.html">Setting up Infrastructure for a High Availability SUSE® Rancher Prime: K3s Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/ha-rke2-kubernetes-cluster.html">Setting up Infrastructure for a High Availability SUSE® Rancher Prime: RKE2 Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/ha-rke1-kubernetes-cluster.html">Setting up Infrastructure for a High Availability RKE Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/nodes-in-amazon-ec2.html">Setting up Nodes in Amazon EC2</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/mysql-database-in-amazon-rds.html">Setting up a MySQL Database in Amazon RDS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/amazon-elb-load-balancer.html">Setting up Amazon ELB Network Load Balancer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/configure-layer-7-nginx-load-balancer.html">Docker Install with TLS Termination at Layer-7 NGINX Load Balancer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/infrastructure-setup/nginx-load-balancer.html">Setting up an NGINX Load Balancer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/install-kubernetes/install-kubernetes.html">Setting up a Kubernetes Cluster for SUSE Rancher Prime Server</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/install-kubernetes/k3s-for-rancher.html">Setting up a High-availability SUSE® Rancher Prime: K3s Kubernetes Cluster for SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/install-kubernetes/rke2-for-rancher.html">Setting up a High-availability SUSE® Rancher Prime: RKE2 Kubernetes Cluster for SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/install-kubernetes/rke1-for-rancher.html">Setting up a High-availability RKE Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/rancher-on-aks.html">Installing SUSE Rancher Prime on Azure Kubernetes Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/rancher-on-amazon-eks.html">Installing SUSE Rancher Prime on Amazon EKS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/rancher-on-gke.html">Installing SUSE Rancher Prime on a Google Kubernetes Engine Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/cloud-marketplace.html">Cloud Marketplace Integration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/aws/aws.html">AWS Marketplace Integration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/aws/adapter-requirements.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/aws/install-adapter.html">Installing the Adapter</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/aws/uninstall-adapter.html">Uninstalling The Adapter</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/aws/common-issues.html">Common Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/hosted-kubernetes/cloud-marketplace/supportconfig.html">Supportconfig Bundle</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/other-installation-methods.html">Other Installation Methods</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/air-gapped.html">Air-Gapped Helm CLI Install</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/infrastructure-private-registry.html">1. Set up Infrastructure and Private Registry</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/publish-images.html">2. Collect and Publish Images to your Private Registry</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/install-kubernetes.html">3. Install Kubernetes (Skip for Docker Installs)</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/install-rancher-ha.html">4. Install SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/local-system-charts.html">Setting up Local System Charts for Air Gapped Installations</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/air-gapped/upgrades.html">Upgrading in an Air-Gapped Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/http-proxy/http-proxy.html">Installing SUSE Rancher Prime behind an HTTP Proxy</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/http-proxy/set-up-infrastructure.html">1. Set up Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/http-proxy/install-kubernetes.html">2. Install Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../installation-and-upgrade/other-installation-methods/http-proxy/install-rancher.html">3. Install SUSE Rancher Prime</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../installation-and-upgrade/install-rancher.html">Install/Upgrade SUSE Rancher Prime on a Kubernetes Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../installation-and-upgrade/upgrades.html">Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../installation-and-upgrade/rollbacks.html">Rollbacks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../installation-and-upgrade/troubleshooting/troubleshooting.html">Troubleshooting the SUSE Rancher Prime Server Kubernetes Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/troubleshooting/certificate-troubleshooting.html">Troubleshooting Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../installation-and-upgrade/troubleshooting/rancher-ha.html">SUSE Rancher Prime HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/rancher-admin.html">Rancher Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">User Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/authn-and-authz.html">Configuring Authentication</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/manage-users-and-groups.html">Users and Groups</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/create-local-users.html">Local Authentication</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">External Authentication</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/jwt-authentication.html">JSON Web Token (JWT) Authentication</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-generic-oidc.html">Configure Generic OIDC</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-active-directory.html">Configure Active Directory (AD)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-azure-ad.html">Configure Azure AD</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-freeipa.html">Configure FreeIPA</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-github.html">Configure GitHub</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-google-oauth.html">Configure Google OAuth</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-keycloak-oidc.html">Configure Keycloak (OIDC)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-keycloak-saml.html">Configure Keycloak (SAML)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-okta-saml.html">Configure Okta (SAML)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/configure-pingidentity.html">Configure PingIdentity (SAML)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/microsoft-ad-federation-service-saml/microsoft-ad-federation-service-saml.html">Configuring Microsoft Active Directory Federation Service (SAML)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/microsoft-ad-federation-service-saml/ms-adfs-for-rancher.html">1. Configuring Microsoft AD FS for SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/microsoft-ad-federation-service-saml/rancher-for-ms-adfs.html">2. Configuring SUSE Rancher Prime for Microsoft AD FS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/openldap/openldap.html">Configuring OpenLDAP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/openldap/reference.html">OpenLDAP Configuration Reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/shibboleth-saml/shibboleth-saml.html">Configuring Shibboleth (SAML)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/shibboleth-saml/group-permissions.html">Group Permissions with Shibboleth and OpenLDAP</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/manage-role-based-access-control-rbac/manage-role-based-access-control-rbac.html">Managing Role-Based Access Control (RBAC)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/manage-role-based-access-control-rbac/global-permissions.html">Global Permissions</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/manage-role-based-access-control-rbac/cluster-and-project-roles.html">Cluster and Project Roles</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/manage-role-based-access-control-rbac/custom-roles.html">Custom Roles</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/manage-role-based-access-control-rbac/locked-roles.html">Locked Roles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/authn-and-authz/enable-user-retention.html">Enabling User Retention</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/users/settings/settings.html">User Settings</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/settings/api-keys.html">API Keys</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/settings/manage-node-templates.html">Managing Node Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/settings/user-preferences.html">User Preferences</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/users/settings/manage-cloud-credentials.html">Managing Cloud Credentials</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Global Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/custom-branding.html">Custom Branding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/global-default-private-registry.html">Configuring a Global Default Private Registry</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/global-configuration/provisioning-drivers/provisioning-drivers.html">About Provisioning Drivers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/provisioning-drivers/manage-cluster-drivers.html">Cluster Drivers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/provisioning-drivers/manage-node-drivers.html">Node Drivers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/rke1-templates.html">About RKE1 Templates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/access-or-share-templates.html">Access and Sharing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/apply-templates.html">Applying Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/creator-permissions.html">Template Creator Permissions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/enforce-templates.html">Enforcing Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/example-use-cases.html">Example Scenarios</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/infrastructure.html">RKE Templates and Infrastructure</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/manage-templates.html">Creating and Revising RKE Templates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/override-template-settings.html">Overriding Template Settings</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/global-configuration/rke1-templates/template-example-yaml.html">RKE1 Example YAML</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/back-up-restore-and-disaster-recovery.html">Backup, Restore, and Disaster Recovery</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/usage-guide.html">Backup Restore Usage Guide</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/back-up.html">Backing up SUSE Rancher Prime</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/configuration/backup.html">Backup Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/configuration/storage.html">Backup Storage Location Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/restore.html">Restoring SUSE Rancher Prime</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/configuration/restore.html">Restore Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/migrate-to-a-new-cluster.html">Migrating SUSE Rancher Prime to a New Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/back-up-restore-and-disaster-recovery/configuration/examples.html">Backup and Restore Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">CLI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/cli/kubectl.html">kubectl Utility</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/cli/rancher-cli.html">SUSE Rancher Prime CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../rancher-admin/experimental-features/experimental-features.html">Enabling Experimental Features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/experimental-features/ui-server-side-pagination.html">UI Server-Side Pagination</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/experimental-features/continuous-delivery.html">Continuous Delivery</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/experimental-features/istio-traffic-management-features.html">UI for Istio Virtual Services and Destination Rules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/experimental-features/rancher-on-arm64.html">Running on ARM64 (Experimental)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../rancher-admin/experimental-features/unsupported-storage-drivers.html">Allowing Unsupported Storage Drivers</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/cluster-deployment.html">Cluster Deployment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cluster-deployment/node-requirements.html">Node Requirements for SUSE Rancher Prime Managed Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/production-checklist/production-checklist.html">Checklist for Production-Ready Clusters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/production-checklist/recommended-cluster-architecture.html">Recommended Cluster Architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/production-checklist/roles-for-nodes-in-kubernetes.html">Roles for Nodes in Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/production-checklist/tips-to-set-up-containers.html">Tips for Setting Up Containers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/hosted-kubernetes.html">Setting up Clusters from Hosted Kubernetes Providers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/aks/aks.html">Creating an AKS Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/aks/configuration.html">AKS Cluster Configuration Reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/eks/eks.html">Creating an EKS Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/eks/configuration.html">EKS Cluster Configuration Reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/gke/gke.html">Creating a GKE Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/gke/configuration.html">GKE Cluster Configuration Reference</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/gke/private-clusters.html">Private Clusters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/hosted-kubernetes/sync-clusters.html">Syncing Hosted Clusters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/set-up-cloud-providers/set-up-cloud-providers.html">Setting up Cloud Providers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/set-up-cloud-providers/amazon.html">Setting up the Amazon Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/set-up-cloud-providers/azure.html">Setting up the Azure Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/set-up-cloud-providers/configure-in-tree-vsphere.html">Setting Up an In-tree VMware vSphere Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/set-up-cloud-providers/configure-out-of-tree-vsphere.html">Setting Up an Out-of-tree VMware vSphere Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/set-up-cloud-providers/google-compute-engine.html">Setting up the Google Compute Engine Cloud Provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/migrate-to-an-out-of-tree-cloud-provider/amazon.html">Migrating Amazon In-tree to Out-of-tree</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/migrate-to-an-out-of-tree-cloud-provider/azure.html">Migrating Azure In-tree to Out-of-tree</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/migrate-to-an-out-of-tree-cloud-provider/vsphere.html">Migrating VMware vSphere In-tree to Out-of-tree</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cluster-deployment/launch-kubernetes-with-rancher.html">Launching Kubernetes with SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cluster-deployment/about-rancher-agents.html">SUSE Rancher Prime Agents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cluster-deployment/rke1-vs-rke2.html">Behavior Differences Between RKE1 and SUSE® Rancher Prime: RKE2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/infra-providers.html">Launching Kubernetes on New Nodes in an Infrastructure Provider</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/digitalocean/digitalocean.html">Creating a DigitalOcean Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/digitalocean/machine-configuration.html">DigitalOcean Machine Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/digitalocean/node-template-configuration.html">DigitalOcean Node Template Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/aws/aws.html">Creating an Amazon EC2 Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/aws/machine-configuration.html">EC2 Machine Configuration Reference</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/aws/node-template-configuration.html">EC2 Node Template Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/azure/azure.html">Creating an Azure Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/azure/machine-configuration.html">Azure Machine Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/azure/node-template-configuration.html">Azure Node Template Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/nutanix/nutanix.html">Creating a Nutanix AOS Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/nutanix/provision-kubernetes-clusters-in-aos.html">Provisioning Kubernetes Clusters in Nutanix AOS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/nutanix/node-template-configuration.html">Nutanix Node Template Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/vsphere.html">Creating a VMware vSphere Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/best-practices.html">Best Practices for SUSE Rancher Prime Managed VMware vSphere Clusters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/create-credentials.html">Creating Credentials in the VMware vSphere Console</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/create-a-vm-template.html">Creating a VMware vSphere Virtual Machine Template</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/provision-kubernetes-clusters-in-vsphere.html">Provisioning Kubernetes Clusters in VMware vSphere</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/node-template-configuration.html">VMware vSphere Node Template Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/infra-providers/vsphere/shutdown-vm.html">Graceful Shutdown for VMware vSphere Virtual Machines</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/custom-clusters.html">Launching Kubernetes on Existing Custom Nodes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/rancher-agent-options.html">SUSE Rancher Prime Agent Options</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/windows/azure-storageclass-configuration.html">Configuring Storage Classes in Azure</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/windows/network-requirements-for-host-gateway.html">Networking Requirements for Host Gateway (L2bridge)</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/windows/use-windows-clusters.html">Launching Kubernetes on Windows Clusters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/windows/windows-linux-cluster-feature-parity.html">Windows and Linux Cluster Feature Parity</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../cluster-deployment/custom-clusters/windows/workload-migration-guidance.html">RKE1 to SUSE® Rancher Prime: RKE2 Windows Migration Guidance</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/configuration/k3s.html">SUSE® Rancher Prime: K3s Cluster Configuration Reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/configuration/rke2.html">SUSE® Rancher Prime: RKE2 Cluster Configuration Reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../cluster-deployment/configuration/rke1.html">RKE Cluster Configuration Reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cluster-deployment/register-existing-clusters.html">Registering Existing Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cluster-deployment/register-existing-clusters-troubleshooting.html">Registered Clusters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../manage-clusters.html">Cluster Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Manage Clusters</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../best-practices/disconnected-clusters.html">Best Practices for Disconnected Clusters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../access-clusters/access-clusters.html">Access Clusters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../access-clusters/add-users-to-clusters.html">Adding Users to Clusters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../access-clusters/authorized-cluster-endpoint.html">How the Authorized Cluster Endpoint Works</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../access-clusters/use-kubectl-and-kubeconfig.html">Access a Cluster with Kubectl and kubeconfig</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../clean-cluster-nodes.html">Removing Kubernetes Components from Nodes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../persistent-storage/manage-persistent-storage.html">Create Kubernetes Persistent Volumes and Storage Classes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistent-storage/about-glusterfs-volumes.html">GlusterFS Volumes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistent-storage/about-persistent-storage.html">How Persistent Storage Works</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistent-storage/dynamically-provision-new-storage.html">Dynamically Provisioning New Storage in SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistent-storage/install-iscsi-volumes.html">iSCSI Volumes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../persistent-storage/set-up-existing-storage.html">Setting up Existing Storage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../persistent-storage/use-external-ceph-driver.html">Using an External Ceph Driver</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../persistent-storage/examples/nfs-storage.html">NFS Storage</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../persistent-storage/examples/persistent-storage-in-amazon-ebs.html">Creating Persistent Storage in Amazon&#8217;s EBS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../persistent-storage/examples/examples.html">Provisioning Storage Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../persistent-storage/examples/vsphere-storage.html">VMware vSphere Storage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="install-cluster-autoscaler.html">Cluster Autoscaler</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="use-aws-ec2-auto-scaling-groups.html">Cluster Autoscaler with AWS EC2 Auto Scaling Groups</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cluster-templates.html">Cluster Templates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nodes-and-node-pools.html">Nodes and Node Pools</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../projects-and-namespaces.html">Projects and Kubernetes Namespaces with SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rotate-certificates.html">Certificate Rotation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../rotate-encryption-key.html">Encryption Key Rotation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../kubernetes-resources/kubernetes-resources-setup.html">Kubernetes Resources Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../kubernetes-resources/workloads-and-pods/workloads-and-pods.html">Kubernetes Workloads and Pods</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/workloads-and-pods/deploy-workloads.html">Deploying Workloads</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/workloads-and-pods/add-a-sidecar.html">Adding a Sidecar</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/workloads-and-pods/upgrade-workloads.html">Upgrading Workloads</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/workloads-and-pods/roll-back-workloads.html">Rolling Back Workloads</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../kubernetes-resources/horizontal-pod-autoscaler/horizontal-pod-autoscaler.html">Horizontal Pod Autoscaler</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/horizontal-pod-autoscaler/about-hpas.html">Background Information on HPAs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/horizontal-pod-autoscaler/manage-hpas-with-ui.html">Managing HPAs with the SUSE Rancher Prime UI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/horizontal-pod-autoscaler/manage-hpas-with-kubectl.html">Managing HPAs with kubectl</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/horizontal-pod-autoscaler/test-hpas-with-kubectl.html">Testing HPAs with kubectl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../kubernetes-resources/load-balancer-and-ingress-controller/load-balancer-and-ingress-controller.html">Load Balancer and Ingress Controller Setup within SUSE Rancher Prime</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/load-balancer-and-ingress-controller/layer-4-and-layer-7-load-balancing.html">Layer 4 and Layer 7 Load Balancing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/load-balancer-and-ingress-controller/add-ingresses.html">Adding Ingresses</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../kubernetes-resources/load-balancer-and-ingress-controller/ingress-configuration.html">Configuring an Ingress</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../kubernetes-resources/create-services.html">Services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../kubernetes-resources/configmaps.html">ConfigMaps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../kubernetes-resources/kubernetes-and-docker-registries.html">Kubernetes Registry and Container Image Registry</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../backups-and-restore/backups-and-restore.html">Upgrading and Rolling Back Kubernetes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../backups-and-restore/backups-without-uprading-rancher.html">Upgrading Kubernetes without Upgrading SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../backups-and-restore/backups.html">Backing up a Cluster</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../backups-and-restore/restore.html">Restoring a Cluster from Backup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../namespaces.html">Namespaces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../project-admin/project-admin.html">Project Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../project-admin/add-users-to-projects.html">Adding Users to Projects</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../project-admin/project-resource-quotas/project-resource-quotas.html">Project Resource Quotas</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../project-admin/project-resource-quotas/resource-quotas-in-projects.html">How Resource Quotas Work in SUSE Rancher Prime Projects</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../project-admin/project-resource-quotas/override-default-limit-in-namespaces.html">Overriding the Default Limit for a Namespace</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../project-admin/project-resource-quotas/resource-quota-types.html">Resource Quota Type Reference</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../project-admin/project-resource-quotas/set-container-default-resource-limits.html">Setting Container Default Resource Limits</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../helm-charts-in-rancher/helm-charts-in-rancher.html">Helm Charts and Apps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../helm-charts-in-rancher/create-apps.html">Creating Apps</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../helm-charts-in-rancher/oci-repositories.html">Using OCI-Based Helm Chart Repositories</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/security-overview.html">SUSE Rancher Prime Security Guides</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/cves.html">Security Advisories and CVEs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/kubernetes-security-best-practices.html">Kubernetes Security Best Practices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/rancher-security-best-practices.html">SUSE Rancher Prime Security Best Practices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/rancher-webhook/rancher-webhook.html">SUSE Rancher Prime Webhook</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/rancher-webhook/expired-webhook-certificate-rotation.html">Rotation of Expired Webhook Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/rancher-webhook/hardening.html">Hardening the SUSE Rancher Prime Webhook</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/selinux-rpm/about-rancher-selinux.html">About rancher-selinux</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/selinux-rpm/selinux-rpm.html">SELinux RPM</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/selinux-rpm/about-rke2-selinux.html">About rke2-selinux</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/hardening-guides/hardening-guides.html">Self-Assessment and Hardening Guides for SUSE Rancher Prime</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/hardening-guides/k3s/k3s.html">SUSE® Rancher Prime: K3s Hardening Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/k3s/self-assessment-guide-with-cis-v1.23-k8s-v1.23.html">SUSE® Rancher Prime: K3s Self-Assessment Guide - CIS Benchmark v1.23 - K8s v1.23</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/k3s/self-assessment-guide-with-cis-v1.24-k8s-v1.24.html">SUSE® Rancher Prime: K3s Self-Assessment Guide - CIS Benchmark v1.24 - K8s v1.24</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/k3s/self-assessment-guide-with-cis-v1.7-k8s-v1.25-v1.26-v1.27.html">SUSE® Rancher Prime: K3s Self-Assessment Guide - CIS Benchmark v1.7 - K8s v1.25/v1.26/v1.27</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/hardening-guides/rke1/rke1.html">RKE Hardening Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/rke1/self-assessment-guide-with-cis-v1.23-k8s-v1.23.html">RKE Self-Assessment Guide - CIS Benchmark v1.23 - K8s v1.23</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/rke1/self-assessment-guide-with-cis-v1.24-k8s-v1.24.html">RKE Self-Assessment Guide - CIS Benchmark v1.24 - K8s v1.24</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/rke1/self-assessment-guide-with-cis-v1.7-k8s-v1.25-v1.26-v1.27.html">RKE Self-Assessment Guide - CIS Benchmark v1.7 - K8s v1.25/v1.26/v1.27</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/hardening-guides/rke2/rke2.html">SUSE® Rancher Prime: RKE2 Hardening Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/rke2/self-assessment-guide-with-cis-v1.23-k8s-v1.23.html">SUSE® Rancher Prime: RKE2 Self-Assessment Guide - CIS Benchmark v1.23 - K8s v1.23</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/rke2/self-assessment-guide-with-cis-v1.24-k8s-v1.24.html">SUSE® Rancher Prime: RKE2 Self-Assessment Guide - CIS Benchmark v1.24 - K8s v1.24</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/hardening-guides/rke2/self-assessment-guide-with-cis-v1.7-k8s-v1.25-v1.26-v1.27.html">SUSE® Rancher Prime: RKE2 Self-Assessment Guide - CIS Benchmark v1.7 - K8s v1.25/v1.26/v1.27</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/hardening-guides/upgrade-a-hardened-cluster-to-k8s-v1-25.html">Upgrading a Hardened Custom/Imported Cluster to Kubernetes v1.25</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/cis-scans/cis-scans.html">CIS Scans</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/rbac-for-cis-scans.html">Roles-based Access Control</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/how-to.html">CIS Scan Guides</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/install-rancher-cis-benchmark.html">Install SUSE Rancher Prime CIS Benchmark</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/uninstall-rancher-cis-benchmark.html">Uninstall SUSE Rancher Prime CIS Benchmark</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/configuration-reference.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/custom-benchmark.html">Creating a Custom Benchmark Version for Running a Cluster Scan</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/skipped-and-not-applicable-tests.html">Skipped and Not Applicable Tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/run-a-scan.html">Run a Scan</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/run-a-scan-periodically-on-a-schedule.html">Run a Scan Periodically on a Schedule</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/skip-tests.html">Skip Tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/view-reports.html">View Reports</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/enable-alerting-for-rancher-cis-benchmark.html">Enable Alerting for SUSE Rancher Prime CIS Benchmark</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/configure-alerts-for-periodic-scan-on-a-schedule.html">Configure Alerts for Periodic Scan on a Schedule</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/cis-scans/create-a-custom-benchmark-version-to-run.html">Create a Custom Benchmark Version for Running a Cluster Scan</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/psa-pss.html">Pod Security Standards (PSS) &amp; Pod Security Admission (PSA)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/psact.html">Pod Security Admission (PSA) Configuration Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/sample-psact.html">Sample PodSecurityConfiguration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/secrets-hub.html">Secrets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/open-ports-with-firewalld.html">Opening Ports with firewalld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../security/encrypting-http.html">Encrypting HTTP Communication</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../integrations/integrations.html">Integrations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrations/kubernetes-distributions.html">Kubernetes Distributions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrations/rancher-extensions.html">Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../integrations/harvester/harvester.html">SUSE Virtualization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/harvester/overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../integrations/longhorn/longhorn.html">SUSE Storage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/longhorn/overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../integrations/neuvector/neuvector.html">SUSE® Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/neuvector/overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrations/kubewarden.html">SUSE Security Admission Controller</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrations/elemental.html">SUSE® Rancher Prime: OS Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../integrations/fleet/fleet.html">SUSE® Rancher Prime: Continuous Delivery</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/fleet/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/fleet/architecture.html">SUSE® Rancher Prime: Continuous Delivery Architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/fleet/use-fleet-behind-a-proxy.html">Using SUSE® Rancher Prime: Continuous Delivery Behind a Proxy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/fleet/windows-support.html">Windows Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrations/suse-observability.html">SUSE® Observability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../integrations/rancher-desktop.html">Kubernetes on the Desktop with Rancher Desktop</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../integrations/cluster-api/cluster-api.html">SUSE® Rancher Prime: Cluster API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../integrations/cluster-api/overview.html">Overview</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../observability/rancher-cluster-tools.html">Cluster Tools for Logging, Monitoring, and Visibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../observability/rancher-project-tools.html">Project Tools for Logging, Monitoring, and Visibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/logging/logging.html">SUSE Rancher Prime Integration with Logging Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/logging-architecture.html">Logging Architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/best-practices.html">Logging Best Practices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/rbac-for-logging.html">Role-based Access Control for Logging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/logging-helm-chart-options.html">rancher-logging Helm Chart Options</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/enable-api-audit-log.html">Enabling the API Audit Log to Record System Events</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/enable-api-audit-log-in-downstream-clusters.html">Enabling the API Audit Log in Downstream Clusters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/taints-and-tolerations.html">Working with Taints and Tolerations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Custom Resource Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/logging/custom-resource-configuration/flows-and-clusterflows.html">Flows and ClusterFlows</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/logging/custom-resource-configuration/outputs-and-clusteroutputs.html">Outputs and ClusterOutputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/logging/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/monitoring-and-dashboards.html">Monitoring and Dashboards</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/best-practices.html">Monitoring Best Practices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/built-in-dashboards.html">Built-in Dashboards</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/how-monitoring-works.html">How Monitoring Works</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/promql-expressions.html">PromQL Expression Reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/rbac-for-monitoring.html">Role-based Access Control</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/windows-support.html">Windows Cluster Support for Monitoring V2</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/enable-monitoring.html">Enable Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/uninstall-monitoring.html">Uninstall Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/set-up-monitoring-for-workloads.html">Setting up Monitoring for a Workload</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/examples.html">Monitoring Configuration Examples</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/helm-chart-options.html">Helm Chart Options</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/receivers.html">Receiver Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/routes.html">Route Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/servicemonitors-and-podmonitors.html">ServiceMonitor and PodMonitor Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/advanced/advanced.html">Advanced Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/advanced/alertmanager.html">Alertmanager Configuration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/advanced/prometheus.html">Prometheus Configuration</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/advanced/prometheusrules.html">Configuring PrometheusRules</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/configuration.html">Monitoring Configuration Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/configuration/debug-high-memory-usage.html">Debugging High Memory Usage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/customizing-dashboard/create-persistent-grafana-dashboard.html">Persistent Grafana Dashboards</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/customizing-dashboard/customize-grafana-dashboard.html">Customizing Grafana Dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/prometheus-federator.html">Prometheus Federator</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/rbac.html">Role-Based Access Control</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/enable-prometheus-federator.html">Enable Prometheus Federator</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/uninstall-prometheus-federator.html">Uninstall Prometheus Federator</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/set-up-workloads.html">Setting up Prometheus Federator for a Workload</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/customize-grafana-dashboards.html">Customizing Grafana Dashboards</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/monitoring-and-dashboards/prometheus-federator/install-project-monitors.html">Installing Project Monitors</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/istio/istio.html">Istio</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/istio/rbac.html">Role-based Access Control</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/istio/cpu-and-memory-allocations.html">CPU and Memory Allocations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../observability/istio/disable-istio.html">Disabling Istio</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/istio/configuration/configuration.html">Configuration Options</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/configuration/selectors-and-scrape-configurations.html">Selectors and Scrape Configs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/configuration/project-network-isolation.html">Additional Steps for Project Network Isolation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/configuration/install-istio-on-rke2-cluster.html">Additional Steps for Installing Istio on SUSE® Rancher Prime: RKE2 and SUSE® Rancher Prime: K3s Clusters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/guides/enable-istio-in-cluster.html">Enable Istio in the Cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/guides/enable-istio-in-namespace.html">Enable Istio in a Namespace</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/guides/set-up-traffic-management.html">Set up Istio&#8217;s Components for Traffic Management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../observability/istio/guides/guides.html">Istio Setup Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/guides/generate-and-view-traffic.html">Generate and View Traffic from Istio</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/guides/set-up-istio-gateway.html">Set up the Istio Gateway</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../observability/istio/guides/use-istio-sidecar.html">Add Deployments and Services with the Istio Sidecar</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../api/quickstart.html">RK-API Quick Start Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../api/workflows/projects.html">Projects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../api/reference.html">API Reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../api/api-tokens.html">Using API Tokens</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../api/v3-rancher-api-guide.html">Previous v3 SUSE Rancher Prime API Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../troubleshooting/general-troubleshooting.html">General Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../troubleshooting/kubernetes-components/kubernetes-components.html">Kubernetes Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/kubernetes-components/troubleshooting-controlplane-nodes.html">Troubleshooting Controlplane Nodes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/kubernetes-components/troubleshooting-etcd-nodes.html">Troubleshooting etcd Nodes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/kubernetes-components/troubleshooting-nginx-proxy.html">Troubleshooting nginx-proxy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/kubernetes-components/troubleshooting-worker-nodes-and-generic-components.html">Troubleshooting Worker Nodes and Generic Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/other-troubleshooting-tips/user-id-tracking-in-audit-logs.html">User ID Tracking in Audit Logs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/other-troubleshooting-tips/networking.html">Networking</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/other-troubleshooting-tips/kubernetes-resources.html">Kubernetes Resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../troubleshooting/other-troubleshooting-tips/dns.html">DNS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">FAQ</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/general-faq.html">General FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/deprecated-features.html">Deprecated Features in SUSE Rancher Prime</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/install-and-configure-kubectl.html">Installing and Configuring kubectl</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/dockershim.html">Dockershim FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/technical-items.html">Technical FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/security.html">Security FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/telemetry.html">Telemetry FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/container-network-interface-providers.html">Container Network Interface (CNI) Providers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../faq/rancher-is-no-longer-needed.html">SUSE Rancher Prime is No Longer Needed</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../contribute-to-rancher.html">Contributing to SUSE Rancher Prime</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE® Rancher Manager</span>
    <span class="version">v2.10</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../../../admission-controller/1.29/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../../admission-controller/1.30/en/introduction.html">1.30-next</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
            <li class="version">
              <a href="../../../../../../admission-controller/1.27/en/introduction.html">1.27</a>
            </li>
            <li class="version">
              <a href="../../../../../../admission-controller/1.26/en/introduction.html">1.26</a>
            </li>
            <li class="version">
              <a href="../../../../../../admission-controller/1.25/en/introduction.html">1.25</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../cluster-api/latest/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../cluster-api/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../continuous-delivery/v0.12/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../os-manager/next/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../os-manager/next/en/index.html">Next</a>
            </li>
            <li class="version">
              <a href="../../../../../../os-manager/latest/en/index.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../../../latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../latest/en/about-rancher/what-is-rancher.html">latest</a>
            </li>
            <li class="version">
              <a href="../../../../../v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../../v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version is-current">
              <a href="../../../about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../../v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../../v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../storage/latest/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../../storage/latest/en/longhorn-documentation.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../../../storage/1.9/en/longhorn-documentation.html">1.9 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../../virtualization/v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../../virtualization/v1.6/en/introduction/overview.html">v1.6 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../../virtualization/v1.5/en/introduction/overview.html">v1.5 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../../virtualization/v1.4/en/introduction/overview.html">v1.4</a>
            </li>
            <li class="version">
              <a href="../../../../../../virtualization/v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home">Documentation Home</a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/rancher-manager" title="SUSE Rancher Manager" aria-label="SUSE Documentation - SUSE Rancher Manager">
        SUSE Rancher Manager
      </a>
    </li>
      <li>
          <a href="../manage-clusters.html" title="Cluster Administration" aria-label="Cluster Administration">Cluster Administration</a>
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">v2.10</button>
  <div class="version-menu">
    <a class="version" href="../../../../../latest/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html">latest</a>
    <a class="version" href="../../../../../v2.12/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html">v2.12</a>
    <a class="version" href="../../../../../v2.11/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html">v2.11</a>
    <a class="version is-current" href="use-aws-ec2-auto-scaling-groups.html">v2.10</a>
    <a class="version" href="../../../../../v2.9/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html">v2.9</a>
    <a class="version" href="../../../../../v2.8/en/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.html">v2.8</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/rancher-product-docs/edit/main/versions/v2.10/modules/en/pages/cluster-admin/manage-clusters/install-cluster-autoscaler/use-aws-ec2-auto-scaling-groups.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:rancher-manager" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Cluster Autoscaler with AWS EC2 Auto Scaling Groups</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide will show you how to install and use <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/">Kubernetes cluster-autoscaler</a> on Rancher custom clusters using AWS EC2 Auto Scaling Groups.</p>
</div>
<div class="paragraph">
<p>We are going to install a Rancher RKE custom cluster with a fixed number of nodes with the etcd and controlplane roles, and a variable nodes with the worker role, managed by <code>cluster-autoscaler</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These elements are required to follow this guide:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Rancher server is up and running</p>
</li>
<li>
<p>You have an AWS EC2 user with proper permissions to create virtual machines, auto scaling groups, and IAM profiles and roles</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_1_create_a_custom_cluster"><a class="anchor" href="#_1_create_a_custom_cluster"></a>1. Create a Custom Cluster</h3>
<div class="paragraph">
<p>On Rancher server, we should create a custom k8s cluster. Refer <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/">here</a> to check for version compatibility.</p>
</div>
<div class="paragraph">
<p>Be sure that cloud_provider name is set to <code>amazonec2</code>. Once cluster is created we need to get:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>clusterID: <code>c-xxxxx</code> will be used on EC2 <code>kubernetes.io/cluster/&lt;clusterID&gt;</code> instance tag</p>
</li>
<li>
<p>clusterName: will be used on EC2 <code>k8s.io/cluster-autoscaler/&lt;clusterName&gt;</code> instance tag</p>
</li>
<li>
<p>nodeCommand: will be added on EC2 instance user_data to include new nodes on cluster</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">  sudo docker run -d --privileged --restart=unless-stopped --net=host -v /etc/kubernetes:/etc/kubernetes -v /var/run:/var/run rancher/rancher-agent:&lt;RANCHER_VERSION&gt; --server https://&lt;RANCHER_URL&gt; --token &lt;RANCHER_TOKEN&gt; --ca-checksum &lt;RANCHER_CHECKSUM&gt; &lt;roles&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_2_configure_the_cloud_provider"><a class="anchor" href="#_2_configure_the_cloud_provider"></a>2. Configure the Cloud Provider</h3>
<div class="paragraph">
<p>On AWS EC2, we should create a few objects to configure our system. We&#8217;ve defined three distinct groups and IAM profiles to configure on AWS.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Autoscaling group: Nodes that will be part of the EC2 Auto Scaling Group (ASG). The ASG will be used by <code>cluster-autoscaler</code> to scale up and down.</p>
<div class="ulist">
<ul>
<li>
<p>IAM profile: Required by k8s nodes where cluster-autoscaler will be running. It is recommended for Kubernetes master nodes. This profile is called <code>K8sAutoscalerProfile</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">   {
       "Version": "2012-10-17",
       "Statement": [
           {
               "Effect": "Allow",
               "Action": [
                   "autoscaling:DescribeAutoScalingGroups",
                   "autoscaling:DescribeAutoScalingInstances",
                   "autoscaling:DescribeLaunchConfigurations",
                   "autoscaling:SetDesiredCapacity",
                   "autoscaling:TerminateInstanceInAutoScalingGroup",
                   "autoscaling:DescribeTags",
                   "autoscaling:DescribeLaunchConfigurations",
                   "ec2:DescribeLaunchTemplateVersions"
               ],
               "Resource": [
                   "*"
               ]
           }
       ]
   }</code></pre>
</div>
</div>
</li>
<li>
<p>Master group: Nodes that will be part of the Kubernetes etcd and/or control planes. This will be out of the ASG.</p>
<div class="ulist">
<ul>
<li>
<p>IAM profile: Required by the Kubernetes cloud_provider integration. Optionally, <code>AWS_ACCESS_KEY</code> and <code>AWS_SECRET_KEY</code> can be used instead <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md#using-aws-credentials">using-aws-credentials.</a> This profile is called <code>K8sMasterProfile</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">   {
       "Version": "2012-10-17",
       "Statement": [
           {
               "Effect": "Allow",
               "Action": [
                   "autoscaling:DescribeAutoScalingGroups",
                   "autoscaling:DescribeLaunchConfigurations",
                   "autoscaling:DescribeTags",
                   "ec2:DescribeInstances",
                   "ec2:DescribeRegions",
                   "ec2:DescribeRouteTables",
                   "ec2:DescribeSecurityGroups",
                   "ec2:DescribeSubnets",
                   "ec2:DescribeVolumes",
                   "ec2:CreateSecurityGroup",
                   "ec2:CreateTags",
                   "ec2:CreateVolume",
                   "ec2:ModifyInstanceAttribute",
                   "ec2:ModifyVolume",
                   "ec2:AttachVolume",
                   "ec2:AuthorizeSecurityGroupIngress",
                   "ec2:CreateRoute",
                   "ec2:DeleteRoute",
                   "ec2:DeleteSecurityGroup",
                   "ec2:DeleteVolume",
                   "ec2:DetachVolume",
                   "ec2:RevokeSecurityGroupIngress",
                   "ec2:DescribeVpcs",
                   "elasticloadbalancing:AddTags",
                   "elasticloadbalancing:AttachLoadBalancerToSubnets",
                   "elasticloadbalancing:ApplySecurityGroupsToLoadBalancer",
                   "elasticloadbalancing:CreateLoadBalancer",
                   "elasticloadbalancing:CreateLoadBalancerPolicy",
                   "elasticloadbalancing:CreateLoadBalancerListeners",
                   "elasticloadbalancing:ConfigureHealthCheck",
                   "elasticloadbalancing:DeleteLoadBalancer",
                   "elasticloadbalancing:DeleteLoadBalancerListeners",
                   "elasticloadbalancing:DescribeLoadBalancers",
                   "elasticloadbalancing:DescribeLoadBalancerAttributes",
                   "elasticloadbalancing:DetachLoadBalancerFromSubnets",
                   "elasticloadbalancing:DeregisterInstancesFromLoadBalancer",
                   "elasticloadbalancing:ModifyLoadBalancerAttributes",
                   "elasticloadbalancing:RegisterInstancesWithLoadBalancer",
                   "elasticloadbalancing:SetLoadBalancerPoliciesForBackendServer",
                   "elasticloadbalancing:AddTags",
                   "elasticloadbalancing:CreateListener",
                   "elasticloadbalancing:CreateTargetGroup",
                   "elasticloadbalancing:DeleteListener",
                   "elasticloadbalancing:DeleteTargetGroup",
                   "elasticloadbalancing:DescribeListeners",
                   "elasticloadbalancing:DescribeLoadBalancerPolicies",
                   "elasticloadbalancing:DescribeTargetGroups",
                   "elasticloadbalancing:DescribeTargetHealth",
                   "elasticloadbalancing:ModifyListener",
                   "elasticloadbalancing:ModifyTargetGroup",
                   "elasticloadbalancing:RegisterTargets",
                   "elasticloadbalancing:SetLoadBalancerPoliciesOfListener",
                   "iam:CreateServiceLinkedRole",
                   "ecr:GetAuthorizationToken",
                   "ecr:BatchCheckLayerAvailability",
                   "ecr:GetDownloadUrlForLayer",
                   "ecr:GetRepositoryPolicy",
                   "ecr:DescribeRepositories",
                   "ecr:ListImages",
                   "ecr:BatchGetImage",
                   "kms:DescribeKey"
               ],
               "Resource": [
                   "*"
               ]
           }
       ]
   }</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>IAM role: <code>K8sMasterRole: [K8sMasterProfile,K8sAutoscalerProfile]</code></p>
</li>
<li>
<p>Security group: <code>K8sMasterSg</code> More info at <a href="../../../installation-and-upgrade/requirements/port-requirements.html#_downstream_kubernetes_cluster_nodes" class="xref page">RKE ports (custom nodes tab)</a></p>
</li>
<li>
<p>Tags:
<code>kubernetes.io/cluster/&lt;clusterID&gt;: owned</code></p>
</li>
<li>
<p>User data: <code>K8sMasterUserData</code> Ubuntu 18.04(ami-0e11cbb34015ff725), installs docker and add etcd+controlplane node to the k8s cluster</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">#!/bin/bash -x

cat &lt;&lt;EOF &gt; /etc/sysctl.d/90-kubelet.conf
vm.overcommit_memory = 1
vm.panic_on_oom = 0
kernel.panic = 10
kernel.panic_on_oops = 1
kernel.keys.root_maxkeys = 1000000
kernel.keys.root_maxbytes = 25000000
EOF
sysctl -p /etc/sysctl.d/90-kubelet.conf

curl -sL https://releases.rancher.com/install-docker/19.03.sh | sh
sudo usermod -aG docker ubuntu

TOKEN=$(curl -s -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")
PRIVATE_IP=$(curl -H "X-aws-ec2-metadata-token: ${TOKEN}" -s http://169.254.169.254/latest/meta-data/local-ipv4)
PUBLIC_IP=$(curl -H "X-aws-ec2-metadata-token: ${TOKEN}" -s http://169.254.169.254/latest/meta-data/public-ipv4)
K8S_ROLES="--etcd --controlplane"

sudo docker run -d --privileged --restart=unless-stopped --net=host -v /etc/kubernetes:/etc/kubernetes -v /var/run:/var/run rancher/rancher-agent:&lt;RANCHER_VERSION&gt; --server https://&lt;RANCHER_URL&gt; --token &lt;RANCHER_TOKEN&gt; --ca-checksum &lt;RANCHER_CA_CHECKSUM&gt; --address ${PUBLIC_IP} --internal-address ${PRIVATE_IP} ${K8S_ROLES}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Worker group: Nodes that will be part of the k8s worker plane. Worker nodes will be scaled by cluster-autoscaler using the ASG.</p>
<div class="ulist">
<ul>
<li>
<p>IAM profile: Provides cloud_provider worker integration.
This profile is called <code>K8sWorkerProfile</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">   {
       "Version": "2012-10-17",
       "Statement": [
           {
               "Effect": "Allow",
               "Action": [
                   "ec2:DescribeInstances",
                   "ec2:DescribeRegions",
                   "ecr:GetAuthorizationToken",
                   "ecr:BatchCheckLayerAvailability",
                   "ecr:GetDownloadUrlForLayer",
                   "ecr:GetRepositoryPolicy",
                   "ecr:DescribeRepositories",
                   "ecr:ListImages",
                   "ecr:BatchGetImage"
               ],
               "Resource": "*"
           }
       ]
   }</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>IAM role: <code>K8sWorkerRole: [K8sWorkerProfile]</code></p>
</li>
<li>
<p>Security group: <code>K8sWorkerSg</code> More info at <a href="../../../installation-and-upgrade/requirements/port-requirements.html#_downstream_kubernetes_cluster_nodes" class="xref page">RKE ports (custom nodes tab)</a></p>
</li>
<li>
<p>Tags:</p>
<div class="ulist">
<ul>
<li>
<p><code>kubernetes.io/cluster/&lt;clusterID&gt;: owned</code></p>
</li>
<li>
<p><code>k8s.io/cluster-autoscaler/&lt;clusterName&gt;: true</code></p>
</li>
<li>
<p><code>k8s.io/cluster-autoscaler/enabled: true</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>User data: <code>K8sWorkerUserData</code> Ubuntu 18.04(ami-0e11cbb34015ff725), installs docker and add worker node to the k8s cluster</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">  #!/bin/bash -x

  cat &lt;&lt;EOF &gt; /etc/sysctl.d/90-kubelet.conf
  vm.overcommit_memory = 1
  vm.panic_on_oom = 0
  kernel.panic = 10
  kernel.panic_on_oops = 1
  kernel.keys.root_maxkeys = 1000000
  kernel.keys.root_maxbytes = 25000000
  EOF
  sysctl -p /etc/sysctl.d/90-kubelet.conf

  curl -sL https://releases.rancher.com/install-docker/19.03.sh | sh
  sudo usermod -aG docker ubuntu

  TOKEN=$(curl -s -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600")
  PRIVATE_IP=$(curl -H "X-aws-ec2-metadata-token: ${TOKEN}" -s http://169.254.169.254/latest/meta-data/local-ipv4)
  PUBLIC_IP=$(curl -H "X-aws-ec2-metadata-token: ${TOKEN}" -s http://169.254.169.254/latest/meta-data/public-ipv4)
  K8S_ROLES="--worker"

  sudo docker run -d --privileged --restart=unless-stopped --net=host -v /etc/kubernetes:/etc/kubernetes -v /var/run:/var/run rancher/rancher-agent:&lt;RANCHER_VERSION&gt; --server https://&lt;RANCHER_URL&gt; --token &lt;RANCHER_TOKEN&gt; --ca-checksum &lt;RANCHER_CA_CHECKCSUM&gt; --address ${PUBLIC_IP} --internal-address ${PRIVATE_IP} ${K8S_ROLES}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>More info is at <a href="../../../cluster-deployment/set-up-cloud-providers/amazon.html" class="xref page">RKE clusters on AWS</a> and <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md">Cluster Autoscaler on AWS.</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_3_deploy_nodes"><a class="anchor" href="#_3_deploy_nodes"></a>3. Deploy Nodes</h3>
<div class="paragraph">
<p>Once we&#8217;ve configured AWS, let&#8217;s create VMs to bootstrap our cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>master (etcd+controlplane): Depending your needs, deploy three master instances with proper size. More info is at <a href="../../../cluster-deployment/production-checklist/production-checklist.html" class="xref page">the recommendations for production-ready clusters.</a></p>
<div class="ulist">
<ul>
<li>
<p>IAM role: <code>K8sMasterRole</code></p>
</li>
<li>
<p>Security group: <code>K8sMasterSg</code></p>
</li>
<li>
<p>Tags:</p>
<div class="ulist">
<ul>
<li>
<p><code>kubernetes.io/cluster/&lt;clusterID&gt;: owned</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>User data: <code>K8sMasterUserData</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>worker: Define an ASG on EC2 with the following settings:</p>
<div class="ulist">
<ul>
<li>
<p>Name: <code>K8sWorkerAsg</code></p>
</li>
<li>
<p>IAM role: <code>K8sWorkerRole</code></p>
</li>
<li>
<p>Security group: <code>K8sWorkerSg</code></p>
</li>
<li>
<p>Tags:</p>
<div class="ulist">
<ul>
<li>
<p><code>kubernetes.io/cluster/&lt;clusterID&gt;: owned</code></p>
</li>
<li>
<p><code>k8s.io/cluster-autoscaler/&lt;clusterName&gt;: true</code></p>
</li>
<li>
<p><code>k8s.io/cluster-autoscaler/enabled: true</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>User data: <code>K8sWorkerUserData</code></p>
</li>
<li>
<p>Instances:</p>
<div class="ulist">
<ul>
<li>
<p>minimum: 2</p>
</li>
<li>
<p>desired: 2</p>
</li>
<li>
<p>maximum: 10</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the VMs are deployed, you should have a Rancher custom cluster up and running with three master and two worker nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_4_install_cluster_autoscaler"><a class="anchor" href="#_4_install_cluster_autoscaler"></a>4. Install Cluster-autoscaler</h3>
<div class="paragraph">
<p>At this point, we should have rancher cluster up and running. We are going to install cluster-autoscaler on master nodes and <code>kube-system</code> namespace, following cluster-autoscaler recommendation.</p>
</div>
<div class="sect3">
<h4 id="_parameters"><a class="anchor" href="#_parameters"></a>Parameters</h4>
<div class="paragraph">
<p>This table shows cluster-autoscaler parameters for fine tuning:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster-name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoscaled cluster name, if available</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">:8085</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The address to expose Prometheus metrics</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes master location. Leave blank for default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubeconfig</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to kubeconfig file with authorization and master location information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cloud-config</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to the cloud provider configuration file.  Empty string for no configuration file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"kube-system"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace in which cluster-autoscaler run</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA scale down the cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-delay-after-add</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"10m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long after scale up that scale down evaluation resumes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-delay-after-delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long after node deletion that scale down evaluation resumes, defaults to scanInterval</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-delay-after-failure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"3m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long after scale down failure that scale down evaluation resumes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-unneeded-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"10m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long a node should be unneeded before it is eligible for scale down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-unready-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"20m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long an unready node should be unneeded before it is eligible for scale down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-utilization-threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sum of cpu or memory of all pods running on the node divided by node&#8217;s corresponding allocatable resource, below which a node can be considered for scale down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-gpu-utilization-threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sum of gpu requests of all pods running on the node divided by node&#8217;s allocatable resource, below which a node can be considered for scale down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-non-empty-candidates-count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of non empty nodes considered in one iteration as candidates for scale down with drain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-candidates-pool-ratio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A ratio of nodes that are considered as additional non empty candidates for scale down when some candidates from previous iteration are no longer valid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-down-candidates-pool-min-count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of nodes that are considered as additional non empty candidates for scale down when some candidates from previous iteration are no longer valid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node-deletion-delay-timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"2m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum time CA waits for removing delay-deletion.cluster-autoscaler.kubernetes.io/ annotations before deleting the node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scan-interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"10s"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How often cluster is reevaluated for scale up or down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-nodes-total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of nodes in all node groups. Cluster autoscaler will not grow the cluster beyond this number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cores-total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"0:320000"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum and maximum number of cores in cluster, in the format <code>&lt;min&gt;:&lt;max&gt;.</code> Cluster autoscaler will not scale the cluster beyond these numbers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory-total</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"0:6400000"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum and maximum number of gigabytes of memory in cluster, in the format <code>&lt;min&gt;:&lt;max&gt;.</code> Cluster autoscaler will not scale the cluster beyond these numbers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cloud-provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloud provider type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-bulk-soft-taint-count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of nodes that can be tainted/untainted PreferNoSchedule at the same time. Set to 0 to turn off such tainting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-bulk-soft-taint-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"3s"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum duration of tainting/untainting nodes as PreferNoSchedule at the same time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-empty-bulk-delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of empty nodes that can be deleted at the same time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-graceful-termination-sec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">600</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of seconds CA waits for pod termination when trying to scale down a node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-total-unready-percentage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum percentage of unready nodes in the cluster.  After this is exceeded, CA halts operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ok-total-unready-count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of allowed unready nodes, irrespective of max-total-unready-percentage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scale-up-from-zero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA scale up when there 0 ready nodes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-node-provision-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"15m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum time CA waits for node to be provisioned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nodes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sets min,max size and other configuration data for a node group in a format accepted by cloud provider. Can be used multiple times. Format: <code>&lt;min&gt;:&lt;max&gt;:&lt;other...&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node-group-auto-discovery</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more definition(s) of node group auto-discovery. A definition is expressed <code>&lt;name of discoverer&gt;:[&lt;key&gt;[=&lt;value&gt;]]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">estimator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"binpacking"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of resource estimator to be used in scale up. Available values: ["binpacking"]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expander</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"random"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of node group expander to be used in scale up. Available values: <code>["random","most-pods","least-waste","price","priority"]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ignore-daemonsets-utilization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA ignore DaemonSet pods when calculating resource utilization for scaling down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ignore-mirror-pods-utilization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA ignore Mirror pods when calculating resource utilization for scaling down</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-status-configmap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA write status information to a configmap</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-inactivity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"10m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum time from last recorded autoscaler activity before automatic restart</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-failing-time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"15m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum time from last recorded successful autoscaler run before automatic restart</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">balance-similar-node-groups</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Detect similar node groups and balance the number of nodes between them</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">node-autoprovisioning-enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA autoprovision node groups when needed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max-autoprovisioned-node-group-count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of autoprovisioned groups in the cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unremovable-node-recheck-timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"5m"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timeout before we check again a node that couldn&#8217;t be removed before</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expendable-pods-priority-cutoff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pods with priority below cutoff will be expendable. They can be killed without any consideration during scale down and they don&#8217;t cause scale up. Pods with null priority (PodPriority disabled) are non expendable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">regional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster is regional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">new-pod-scale-up-delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"0s"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pods less than this old will not be considered for scale-up</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ignore-taint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a taint to ignore in node templates when considering to scale a node group</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">balancing-ignore-label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a label to ignore in addition to the basic and cloud-provider set of labels when comparing if two node groups are similar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">aws-use-static-instance-list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should CA fetch instance types in runtime or use a static list. AWS only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">profiling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is debug/pprof endpoint enabled</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_deployment"><a class="anchor" href="#_deployment"></a>Deployment</h4>
<div class="paragraph">
<p>Based on the <a href="https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/examples/cluster-autoscaler-run-on-control-plane.yaml">cluster-autoscaler-run-on-control-plane.yaml</a> example, we&#8217;ve created our own <code>cluster-autoscaler-deployment.yaml</code> to use preferred <a href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler/cloudprovider/aws#auto-discovery-setup">auto-discovery setup</a>, updating tolerations, nodeSelector, image version and command config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
  name: cluster-autoscaler
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-autoscaler
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
rules:
  - apiGroups: [""]
    resources: ["events", "endpoints"]
    verbs: ["create", "patch"]
  - apiGroups: [""]
    resources: ["pods/eviction"]
    verbs: ["create"]
  - apiGroups: [""]
    resources: ["pods/status"]
    verbs: ["update"]
  - apiGroups: [""]
    resources: ["endpoints"]
    resourceNames: ["cluster-autoscaler"]
    verbs: ["get", "update"]
  - apiGroups: [""]
    resources: ["nodes"]
    verbs: ["watch", "list", "get", "update"]
  - apiGroups: [""]
    resources:
      - "pods"
      - "services"
      - "replicationcontrollers"
      - "persistentvolumeclaims"
      - "persistentvolumes"
    verbs: ["watch", "list", "get"]
  - apiGroups: ["extensions"]
    resources: ["replicasets", "daemonsets"]
    verbs: ["watch", "list", "get"]
  - apiGroups: ["policy"]
    resources: ["poddisruptionbudgets"]
    verbs: ["watch", "list"]
  - apiGroups: ["apps"]
    resources: ["statefulsets", "replicasets", "daemonsets"]
    verbs: ["watch", "list", "get"]
  - apiGroups: ["storage.k8s.io"]
    resources: ["storageclasses", "csinodes"]
    verbs: ["watch", "list", "get"]
  - apiGroups: ["batch", "extensions"]
    resources: ["jobs"]
    verbs: ["get", "list", "watch", "patch"]
  - apiGroups: ["coordination.k8s.io"]
    resources: ["leases"]
    verbs: ["create"]
  - apiGroups: ["coordination.k8s.io"]
    resourceNames: ["cluster-autoscaler"]
    resources: ["leases"]
    verbs: ["get", "update"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: cluster-autoscaler
  namespace: kube-system
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
rules:
  - apiGroups: [""]
    resources: ["configmaps"]
    verbs: ["create","list","watch"]
  - apiGroups: [""]
    resources: ["configmaps"]
    resourceNames: ["cluster-autoscaler-status", "cluster-autoscaler-priority-expander"]
    verbs: ["delete", "get", "update", "watch"]

---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cluster-autoscaler
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-autoscaler
subjects:
  - kind: ServiceAccount
    name: cluster-autoscaler
    namespace: kube-system

---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: cluster-autoscaler
  namespace: kube-system
  labels:
    k8s-addon: cluster-autoscaler.addons.k8s.io
    k8s-app: cluster-autoscaler
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: cluster-autoscaler
subjects:
  - kind: ServiceAccount
    name: cluster-autoscaler
    namespace: kube-system

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: cluster-autoscaler
  namespace: kube-system
  labels:
    app: cluster-autoscaler
spec:
  replicas: 1
  selector:
    matchLabels:
      app: cluster-autoscaler
  template:
    metadata:
      labels:
        app: cluster-autoscaler
      annotations:
        prometheus.io/scrape: 'true'
        prometheus.io/port: '8085'
    spec:
      serviceAccountName: cluster-autoscaler
      tolerations:
        - effect: NoSchedule
          operator: "Equal"
          value: "true"
          key: node-role.kubernetes.io/controlplane
      nodeSelector:
        node-role.kubernetes.io/controlplane: "true"
      containers:
        - image: eu.gcr.io/k8s-artifacts-prod/autoscaling/cluster-autoscaler:&lt;VERSION&gt;
          name: cluster-autoscaler
          resources:
            limits:
              cpu: 100m
              memory: 300Mi
            requests:
              cpu: 100m
              memory: 300Mi
          command:
            - ./cluster-autoscaler
            - --v=4
            - --stderrthreshold=info
            - --cloud-provider=aws
            - --skip-nodes-with-local-storage=false
            - --expander=least-waste
            - --node-group-auto-discovery=asg:tag=k8s.io/cluster-autoscaler/enabled,k8s.io/cluster-autoscaler/&lt;clusterName&gt;
          volumeMounts:
            - name: ssl-certs
              mountPath: /etc/ssl/certs/ca-certificates.crt
              readOnly: true
          imagePullPolicy: "Always"
      volumes:
        - name: ssl-certs
          hostPath:
            path: "/etc/ssl/certs/ca-certificates.crt"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the manifest file is prepared, deploy it in the Kubernetes cluster (Rancher UI can be used instead):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl -n kube-system apply -f cluster-autoscaler-deployment.yaml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cluster-autoscaler deployment can also be set up using <a href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler/cloudprovider/aws#manual-configuration">manual configuration</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a>Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point, we should have a cluster-scaler up and running in our Rancher custom cluster. Cluster-scale should manage <code>K8sWorkerAsg</code> ASG to scale up and down between 2 and 10 nodes, when one of the following conditions is true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are pods that failed to run in the cluster due to insufficient resources. In this case, the cluster is scaled up.</p>
</li>
<li>
<p>There are nodes in the cluster that have been underutilized for an extended period of time and their pods can be placed on other existing nodes. In this case, the cluster is scaled down.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_generating_load"><a class="anchor" href="#_generating_load"></a>Generating Load</h3>
<div class="paragraph">
<p>We&#8217;ve prepared a <code>test-deployment.yaml</code> just to generate load on the Kubernetes cluster and see if cluster-autoscaler is working properly. The test deployment is requesting 1000m CPU and 1024Mi memory by three replicas. Adjust the requested resources and/or replica to be sure you exhaust the Kubernetes cluster resources:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: hello-world
  name: hello-world
spec:
  replicas: 3
  selector:
    matchLabels:
      app: hello-world
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: hello-world
    spec:
      containers:
      - image: rancher/hello-world
        imagePullPolicy: Always
        name: hello-world
        ports:
        - containerPort: 80
          protocol: TCP
        resources:
          limits:
            cpu: 1000m
            memory: 1024Mi
          requests:
            cpu: 1000m
            memory: 1024Mi</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the test deployment is prepared, deploy it in the Kubernetes cluster default namespace (Rancher UI can be used instead):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl -n default apply -f test-deployment.yaml</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_checking_scale"><a class="anchor" href="#_checking_scale"></a>Checking Scale</h3>
<div class="paragraph">
<p>Once the Kubernetes resources got exhausted, cluster-autoscaler should scale up worker nodes where pods failed to be scheduled. It should scale up until up until all pods became scheduled. You should see the new nodes on the ASG and on the Kubernetes cluster. Check the logs on the <code>kube-system</code> cluster-autoscaler pod.</p>
</div>
<div class="paragraph">
<p>Once scale up is checked, let check for scale down. To do it, reduce the replica number on the test deployment until you release enough Kubernetes cluster resources to scale down. You should see nodes disappear on the ASG and on the Kubernetes cluster. Check the logs on the <code>kube-system</code> cluster-autoscaler pod.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="install-cluster-autoscaler.html">Cluster Autoscaler</a></span>
  <span class="next"><a href="../cluster-templates.html">Cluster Templates</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../_/css/search.css"></script>
<script async src="../../../../../../search-index.js"></script>
<script src="../../../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
