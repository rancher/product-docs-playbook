<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>Create &amp; import your first cluster using Fleet | Cluster API  0.11</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/cluster-api/v0.16/en/getting-started/create-first-cluster/using_fleet.html">
    <link rel="prev" href="intro.html">
    <link rel="next" href="using_kubectl.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-11-14"/>
<link rel="stylesheet" href="../../../../../_/css/search.css">
<link rel="icon" href="../../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<link rel="stylesheet" href="../../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>
<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/assets");
</script>
<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/cluster-api/v0.11/en/getting-started/create-first-cluster/using_fleet.html" hreflang="x-default" rel="alternate"/>
<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/cluster-api/v0.11/en/getting-started/create-first-cluster/using_fleet.html" hrefLang="en-US" rel="alternate" />

<!-- JSON-LD for doc metadata -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "name": "Create &amp;amp; import your first cluster using Fleet | SUSE Rancher Prime Cluster API v0.11",
  "headline": "Create &amp;amp; import your first cluster using Fleet",
  "description": "Create &amp;amp; import your first cluster using Fleet",
  "inLanguage": "en",
  "dateModified": "2025-11-14T00:00:00Z",
  "author": {
    "@type": "Organization",
    "name": "SUSE Product & Solution Documentation Team",
    "url": "https://documentation.suse.com"
  },
  "mentions": [
    {
      "@type": "SoftwareApplication",
      "name": "SUSE Rancher Prime Cluster API",
      "softwareVersion": "v0.11",
      "applicationCategory": "Cloud Infrastructure",
      "operatingSystem": "Linux"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "SUSE",
    "url": "https://documentation.suse.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
    }
  }
}
</script>
<!-- end JSON-LD for doc metadata -->
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><shared-header
language="en"
languages='{
    "en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
    "de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
    "fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
    "es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
    "zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
    "pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'
enable-search='false'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="cluster-api" data-version="v0.11">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">Cluster API</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rancher.html">Rancher Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Install SUSE® Rancher Prime Cluster API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../install-rancher-turtles/using_rancher_dashboard.html">Via Rancher Dashboard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../install-rancher-turtles/using_helm.html">Via Helm Install</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Your first cluster</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="intro.html">Introduction</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="using_fleet.html">Create &amp; import your first cluster using Fleet</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="using_kubectl.html">Create &amp; Import Your First Cluster Using kubectl</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Using ClusterClass</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cluster-class/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../cluster-class/create_cluster.html">Create a cluster using Fleet</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../air-gapped-environment.html">Air-gapped environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../uninstall_turtles.html">Uninstall SUSE® Rancher Prime Cluster API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Reference Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Architecture</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/architecture/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/architecture/components.html">Components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/architecture/deployment.html">Deployment Scenarios</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../reference-guides/rancher-turtles-chart/values.html">Chart configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">CAPI Providers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/providers/certified.html">Certified CAPI Providers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/providers/howto.html">Create &amp; import a cluster using CAPI providers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/providers/addon-provider-fleet.html">Cluster API Addon Provider Fleet</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Test suite</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/test-suite/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../reference-guides/test-suite/usage.html">Test suite guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tasks/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Cluster API Operator</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/capi-operator/basic_cluster_api_provider_installation.html">Basic Cluster API Provider Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/capi-operator/installing_core_provider.html">Installing the CoreProvider using CAPIProvider resource</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/capi-operator/capiprovider_resource.html">CAPIProvider Resource</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/capi-operator/add_infrastructure_provider.html">Installing AWS Infrastructure Provider using CAPIProvider resource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/maintenance/early_adopter_upgrade.html">Upgrade Instructions for Early Adopters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/maintenance/import_controller_upgrade.html">Upgrade Turtles import controller</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/maintenance/automigrate_to_v3_import.html">Auto-migration to v3 cluster import</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Provider Certification</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/provider-certification/intro.html">What is a Certified Provider?</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tasks/provider-certification/process.html">Provider Certification Guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Developer Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developer-guide/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developer-guide/install_capi_operator.html">Installing Cluster API Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developer-guide/development.html">Development setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../reference/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../reference/contributing_guidelines.html">Guidelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../reference/glossary.html">Glossary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../security/slsa.html">SLSA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Cluster API</span>
    <span class="version">0.11</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../../admission-controller/1.31/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../admission-controller/1.32/en/introduction.html">1.32-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../admission-controller/1.31/en/introduction.html">1.31-latest</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.30/en/introduction.html">1.30</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../../../v0.25/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../v0.25/en/index.html">0.25</a>
            </li>
            <li class="version">
              <a href="../../../../v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../../v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../../v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../../v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../../v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../../v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../../v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../../v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../../v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../v0.12/en/index.html">0.12</a>
            </li>
            <li class="version is-current">
              <a href="../../index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../continuous-delivery/v0.14/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../continuous-delivery/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../os-manager/1.8/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../os-manager/1.9/en/index.html">1.9-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../os-manager/1.8/en/index.html">1.8</a>
            </li>
            <li class="version">
              <a href="../../../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher for AWS</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">v2.13</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../storage/1.10/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../storage/1.10/en/longhorn-documentation.html">1.10 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.9/en/longhorn-documentation.html">1.9</a>
            </li>
            <li class="version">
              <a href="../../../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../suse-virtual-clusters/v1.0.1/en/introduction.html">SUSE® Virtual Clusters</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../suse-virtual-clusters/1.0.2/en/introduction.html">1.0.2-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../suse-virtual-clusters/v1.0.1/en/introduction.html">v1.0.1-latest</a>
            </li>
            <li class="version">
              <a href="../../../../../suse-virtual-clusters/v1.0.0/en/introduction.html">v1.0.0</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../../virtualization/v1.6/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../../../virtualization/v1.7/en/introduction/overview.html">v1.7 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../../../virtualization/v1.6/en/introduction/overview.html">v1.6 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../../virtualization/v1.5/en/introduction/overview.html">v1.5</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a class="home-link-dsc" href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home"></a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/cluster-api" title="Cluster API" aria-label="SUSE Documentation - Cluster API">
        Cluster API
      </a>
    </li>
      <li>
          Getting Started
      </li>
  </ul>
</nav><div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.11</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../../../v0.25/en/index.html">0.25</a>
    <a class="version is-missing" href="../../../../v0.24/en/index.html">0.24</a>
    <a class="version is-missing" href="../../../../v0.23/en/index.html">0.23</a>
    <a class="version is-missing" href="../../../../v0.22/en/index.html">0.22</a>
    <a class="version is-missing" href="../../../../v0.21/en/index.html">0.21</a>
    <a class="version is-missing" href="../../../../v0.20/en/index.html">0.20</a>
    <a class="version is-missing" href="../../../../v0.19/en/index.html">0.19</a>
    <a class="version is-missing" href="../../../../v0.18/en/index.html">0.18</a>
    <a class="version is-missing" href="../../../../v0.17/en/index.html">0.17</a>
    <a class="version" href="../../../../v0.16/en/getting-started/create-first-cluster/using_fleet.html">0.16</a>
    <a class="version" href="../../../../v0.15/en/getting-started/create-first-cluster/using_fleet.html">0.15</a>
    <a class="version" href="../../../../v0.14/en/getting-started/create-first-cluster/using_fleet.html">0.14</a>
    <a class="version" href="../../../../v0.13/en/getting-started/create-first-cluster/using_fleet.html">0.13</a>
    <a class="version" href="../../../../v0.12/en/getting-started/create-first-cluster/using_fleet.html">0.12</a>
    <a class="version is-current" href="using_fleet.html">0.11</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/turtles-product-docs/edit/main/versions/v0.11/modules/en/pages/getting-started/create-first-cluster/using_fleet.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:cluster-api" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Create &amp; import your first cluster using Fleet</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section will guide you through creating your first cluster and importing it into Rancher Manager using a GitOps workflow with Fleet.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Rancher Manager cluster with SUSE® Rancher Prime Cluster API installed</p>
</li>
<li>
<p>Cluster API providers installed for your scenario - we&#8217;ll be using the <a href="https://github.com/kubernetes-sigs/cluster-api/tree/main/test/infrastructure/docker">Docker infrastructure</a> and <a href="https://github.com/rancher-sandbox/cluster-api-provider-rke2">RKE2 bootstrap/control plane</a> providers in these instructions - see <a href="../../tasks/capi-operator/capiprovider_resource.html" class="xref page">Initialization for common providers using Turtles' <code>CAPIProvider</code></a></p>
</li>
<li>
<p><strong>clusterctl</strong> CLI - see the <a href="https://github.com/kubernetes-sigs/cluster-api/releases">releases</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_your_cluster_definition"><a class="anchor" href="#_create_your_cluster_definition"></a>Create your cluster definition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>clusterctl</strong> CLI can be used to generate the YAML for a cluster. When you run <code>clusterctl generate cluster</code>, it will connect to the management cluster to see what infrastructure providers have been installed. Also, it will take care of replacing any tokens in the chosen template (a.k.a flavour) with values from environment variables.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can craft the YAML for your cluster manually. If you decide to do this then you can use the <strong>templates</strong> that infrastructure providers publish as part of their releases. For example, the AWS provider <a href="https://github.com/kubernetes-sigs/cluster-api-provider-aws/releases/tag/v2.2.1">publishes files</a> prefixed with <strong>cluster-template</strong> that can be used as a base. You will need to replace any tokens yourself or by using clusterctl (e.g. <code>clusterctl generate cluster test1 --from https://github.com/kubernetes-sigs/cluster-api-provider-aws/releases/download/v2.2.1/cluster-template-eks.yaml &gt; cluster.yaml</code>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To maintain proper resource management and avoid accidental deletion of custom resources managed outside of Helm during Helm operations, include the <code>helm.sh/resource-policy": keep</code> annotation in the top-level CAPI kinds within your cluster manifests.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This guide does not use ClusterClass. Templates that use ClusterClass will require that the experimental feature be enabled.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To generate the YAML for the cluster do the following (assuming the Docker infrastructure provider is being used):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal and run the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export CONTROL_PLANE_MACHINE_COUNT=1
export WORKER_MACHINE_COUNT=1
export KUBERNETES_VERSION=v1.30.0

clusterctl generate cluster cluster1 \
--from https://raw.githubusercontent.com/rancher-sandbox/rancher-turtles-fleet-example/templates/docker-rke2.yaml \
&gt; cluster1.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>View <strong>cluster1.yaml</strong> to ensure there are no tokens. You can make any changes you want as well.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Cluster API quickstart guide contains more detail. Read the steps related to this section <a href="https://cluster-api.sigs.k8s.io/user/quick-start.html#required-configuration-for-common-providers">here</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_your_repo_for_fleet"><a class="anchor" href="#_create_your_repo_for_fleet"></a>Create your repo for Fleet</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new git repository (this guide uses GitHub)</p>
</li>
<li>
<p>Create a new folder called <strong>clusters</strong></p>
</li>
<li>
<p>Move the <strong>cluster1.yaml</strong> file you generated in the last section to the <strong>clusters</strong> folder.</p>
</li>
<li>
<p>Create a file called <strong>fleet.yaml</strong> in the root and add the following contents</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">namespace: default</code></pre>
</div>
</div>
</li>
<li>
<p>Commit the changes</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <strong>fleet.yaml</strong> is used to specify configuration options for fleet (see <a href="https://documentation.suse.com/cloudnative/continuous-delivery/latest/en/reference/ref-fleet-yaml.html">Fleet reference documentation</a> for further details). In this instance its declaring that the cluster definitions should be added to the <strong>default</strong> namespace.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After the described steps there will be a repository created structure similar to the example: [<a href="https://github.com/rancher-sandbox/rancher-turtles-fleet-example" class="bare">https://github.com/rancher-sandbox/rancher-turtles-fleet-example</a>]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mark_namespace_for_auto_import"><a class="anchor" href="#_mark_namespace_for_auto_import"></a>Mark Namespace for auto-import</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To automatically import a CAPI cluster into Rancher Manager there are 2 options:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>label a namespace so all clusters contained in it are imported.</p>
</li>
<li>
<p>label an individual cluster definition so that it&#8217;s imported.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In both cases the label is <code>cluster-api.cattle.io/rancher-auto-import</code>.</p>
</div>
<div class="paragraph">
<p>This walkthrough will use the first option of importing all clusters in a namespace.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal</p>
</li>
<li>
<p>Label the default namespace in your Rancher Manager cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl label namespace default cluster-api.cattle.io/rancher-auto-import=true</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configure_rancher_manager"><a class="anchor" href="#_configure_rancher_manager"></a>Configure Rancher Manager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now the cluster definitions are committed to a git repository they can be used to provision the clusters. To do this they will need to be imported into the Rancher Manager cluster (which is also acting as a Cluster API management cluster) using the <strong>Continuous Delivery</strong> feature (which uses Fleet).</p>
</div>
<div class="paragraph">
<p>There are 2 options to provide the configuration. The first is using the Rancher Manager UI and the second is by applying some YAML to your cluster. Both are covered below.</p>
</div>
<div class="sect2">
<h3 id="_using_the_rancher_manager_ui"><a class="anchor" href="#_using_the_rancher_manager_ui"></a>Using the Rancher Manager UI</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to Rancher Manager</p>
</li>
<li>
<p>Select <strong>Continuos Delivery</strong> from the menu:
<span class="image"><img src="../../_images/sidebar.png" alt="sidebar"></span></p>
</li>
<li>
<p>Select <strong>fleet-local</strong> as the namespace from the top right
<span class="image"><img src="../../_images/ns.png" alt="namespace"></span></p>
</li>
<li>
<p>Select <strong>Git Repos</strong> from the sidebar</p>
</li>
<li>
<p>Click <strong>Add Repository</strong></p>
</li>
<li>
<p>Enter <strong>clusters</strong> as the name</p>
</li>
<li>
<p>Get the <strong>HTTPS</strong> clone URL from your git repo
<span class="image"><img src="../../_images/gh_clone.png" alt="git clone url"></span></p>
</li>
<li>
<p>Add the URL into the <strong>Repository URL</strong> field</p>
</li>
<li>
<p>Change the branch name to <strong>main</strong></p>
</li>
<li>
<p>Click <strong>Next</strong></p>
</li>
<li>
<p>Click <strong>Create</strong></p>
</li>
<li>
<p>Click on the <strong>clusters</strong> name</p>
</li>
<li>
<p>Watch the resources become ready</p>
</li>
<li>
<p>Select <strong>Cluster Management</strong> from the menu</p>
</li>
<li>
<p>Check your cluster has been imported</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_kubectl"><a class="anchor" href="#_using_kubectl"></a>Using kubectl</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the <strong>HTTPS</strong> clone URL from your git repo</p>
</li>
<li>
<p>Create a new file called <strong>repo.yaml</strong></p>
</li>
<li>
<p>Add the following contents to the new file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: fleet.cattle.io/v1alpha1
kind: GitRepo
metadata:
  name: clusters
  namespace: fleet-local
spec:
  branch: main
  repo: &lt;https://github.com/rancher-sandbox/rancher-turtles-fleet-example.git&gt;
  targets: []</code></pre>
</div>
</div>
</li>
<li>
<p>Apply the file to the Rancher Manager cluster using <strong>kubectl</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f repo.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Go to Rancher Manager</p>
</li>
<li>
<p>Select <strong>Continuos Delivery</strong> from the side bar</p>
</li>
<li>
<p>Select <strong>fleet-local</strong> as the namespace from the top right</p>
</li>
<li>
<p>Select <strong>Git Repos</strong> from the sidebar</p>
</li>
<li>
<p>Click on the <strong>clusters</strong> name</p>
</li>
<li>
<p>Watch the resources become ready</p>
</li>
<li>
<p>Select <strong>Cluster Management</strong> from the menu</p>
</li>
<li>
<p>Check your cluster has been imported</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="intro.html">Introduction</a></span>
  <span class="next"><a href="using_kubectl.html">Create &amp; Import Your First Cluster Using kubectl</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../../_/js/site.js"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
<script src="../../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../../_/js/vendor/tabs.js"></script>


<script src="../../../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
