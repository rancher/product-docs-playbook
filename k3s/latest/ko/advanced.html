<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>고급 옵션 / 설정 | K3s  Latest</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/k3s/latest/ko/advanced.html">
    <link rel="prev" href="networking/networking-services.html">
    <link rel="next" href="reference/env-variables.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
<meta http-equiv="last-modified" content="2025-12-31"/>
<link rel="stylesheet" href="../../../_/css/search.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap&family=SUSE+Mono:ital,wght@0,100..800;1,100..800" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<link rel="stylesheet" href="../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>
<script type="module">
  import { defineCustomElements, setAssetPath } from 'https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/shared-header.esm.js';
  defineCustomElements();
  setAssetPath("https://d12w0ryu9hjsx8.cloudfront.net/shared-header/1.10/assets");
</script>
<!-- Default English link -->
<link href="https://documentation.suse.com/cloudnative/k3s/latest/en/advanced.html" hreflang="x-default" rel="alternate"/>
<!-- Link for the currently processed page -->
<link href="https://documentation.suse.com/cloudnative/k3s/latest/ko/advanced.html" hrefLang="ko-KR" rel="alternate" />
<!-- Link for the English page -->
<link href="https://documentation.suse.com/cloudnative/k3s/latest/en/advanced.html" hreflang="en-US" rel="alternate" />
<!-- Link for the Japanese page -->
<link href="https://documentation.suse.com/cloudnative/k3s/latest/ja/advanced.html" hreflang="ja-JP" rel="alternate" />
<!-- Link for the Chinese page -->
<link href="https://documentation.suse.com/cloudnative/k3s/latest/zh/advanced.html" hreflang="zh-CN" rel="alternate" />

<!-- JSON-LD for doc metadata -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "name": "고급 옵션 / 설정 | SUSE Rancher Prime: K3s latest",
  "headline": "고급 옵션 / 설정",
  "description": "고급 옵션 / 설정",
  "inLanguage": "ko",
  "dateModified": "2025-12-31T00:00:00Z",
  "author": {
    "@type": "Organization",
    "name": "SUSE Product & Solution Documentation Team",
    "url": "https://documentation.suse.com"
  },
  "mentions": [
    {
      "@type": "SoftwareApplication",
      "name": "SUSE Rancher Prime: K3s",
      "softwareVersion": "latest",
      "applicationCategory": "Cloud Infrastructure",
      "operatingSystem": "Linux"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "SUSE",
    "url": "https://documentation.suse.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
    }
  }
}
</script>
<!-- end JSON-LD for doc metadata -->
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><shared-header
language="en"
languages='{
    "en": { "label": "English", "url": "https://documentation.suse.com/en-us/" },
    "de": { "label": "Deutsch", "url": "https://documentation.suse.com/de-de/" },
    "fr": { "label": "Français", "url": "https://documentation.suse.com/fr-fr/" },
    "es": { "label": "Español", "url": "https://documentation.suse.com/es-es/" },
    "zh_CN": { "label": "中文", "url": "https://documentation.suse.com/zh-cn/" },
    "pt_BR": { "label": "Português Brasileiro", "url": "https://documentation.suse.com/pt-br/" }
}'
enable-search='false'>
</shared-header>

<!-- Leaving as a comment, I expect it will be required again next year.
<a target=_blank"" class="survey-link" href="https://suselinux.fra1.qualtrics.com/jfe/form/SV_bEiGZbUNzLD8Tcy"> Documentation survey </a>
--><div class="body">
<div class="nav-container" data-component="k3s" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title">K3s</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">K3s - Lightweight Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quick-start.html">빠른 시작 가이드</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="installation/installation.html">설치</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/requirements.html">Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/configuration.html">Configuration Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/private-registry.html">Private Registry Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/registry-mirror.html">Embedded Registry Mirror</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/airgap.html">Air-Gap Install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/server-roles.html">Managing Server Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/packaged-components.html">Managing Packaged Components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation/uninstall.html">Uninstalling K3s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="datastore/datastore.html">클러스터 데이터 저장소</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datastore/backup-restore.html">Backup and Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datastore/ha-embedded.html">High Availability Embedded etcd</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datastore/ha.html">High Availability External DB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datastore/cluster-loadbalancer.html">Cluster Load Balancer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="upgrades/upgrades.html">업그레이드</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrades/killall.html">Stopping K3s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrades/manual.html">Manual Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrades/automated.html">Automated Upgrades</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrades/roll-back.html">Rolling Back K3s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="security/security.html">보안</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/secrets-encryption.html">Secrets Encryption Config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/hardening-guide.html">CIS Hardening Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/self-assessment-1.11.html">CIS 1.11 Self Assessment Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/self-assessment-1.10.html">CIS 1.10 Self Assessment Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/self-assessment-1.9.html">CIS 1.9 Self Assessment Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/self-assessment-1.8.html">CIS 1.8 Self Assessment Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="security/self-assessment-1.7.html">CIS 1.7 Self Assessment Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="cli/cli.html">명령줄 도구</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cli/server.html">server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cli/agent.html">agent</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cli/certificate.html">certificate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cli/etcd-snapshot.html">etcd-snapshot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cli/secrets-encrypt.html">secrets-encrypt</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cli/token.html">token</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture.html">아키텍처</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cluster-access.html">클러스터 접근</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Add-Ons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add-ons/helm.html">헬름(Helm)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add-ons/import-images.html">Import images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add-ons/storage.html">볼륨과 저장소</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="networking/networking.html">Networking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking/basic-network-options.html">Basic Network Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking/distributed-multicloud.html">Distributed hybrid or multicloud cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking/multus-ipams.html">Multus and IPAM plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking/networking-services.html">네트워킹</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="advanced.html">고급 옵션 / 설정</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">레퍼런스</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/env-variables.html">Environment Variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/flag-deprecation.html">Flag Deprecation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/metrics.html">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reference/resource-profiling.html">Resource Profiling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Release Notes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="release-notes/v1.34.X.html">v1.34.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="release-notes/v1.33.X.html">v1.33.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="release-notes/v1.32.X.html">v1.32.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="release-notes/v1.31.X.html">v1.31.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Older&#8230;&#8203;</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.30.X.html">v1.30.X</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.29.X.html">v1.29.X</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.28.X.html">v1.28.X</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.27.X.html">v1.27.X</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.26.X.html">v1.26.X</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.25.X.html">v1.25.X</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="release-notes/v1.24.X.html">v1.24.X</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="related-projects.html">Related Projects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="known-issues.html">알려진 이슈</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">자주 묻는 질문</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">K3s</span>
    <span class="version">Latest</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../admission-controller/1.31/en/introduction.html">Admission Controller</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../admission-controller/1.32/en/introduction.html">1.32-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../admission-controller/1.31/en/introduction.html">1.31-latest</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.30/en/introduction.html">1.30</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.29/en/introduction.html">1.29</a>
            </li>
            <li class="version">
              <a href="../../../admission-controller/1.28/en/introduction.html">1.28</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../cluster-api/v0.25/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../cluster-api/v0.25/en/index.html">0.25</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.24/en/index.html">0.24</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.23/en/index.html">0.23</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.22/en/index.html">0.22</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.21/en/index.html">0.21</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.20/en/index.html">0.20</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.19/en/index.html">0.19</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.18/en/index.html">0.18</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.17/en/index.html">0.17</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../continuous-delivery/v0.14/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../continuous-delivery/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-current is-latest">
              <a href="../en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../os-manager/1.8/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../os-manager/1.9/en/index.html">1.9-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../os-manager/1.8/en/index.html">1.8</a>
            </li>
            <li class="version">
              <a href="../../../os-manager/1.7/en/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../suse-observability/latest/en/classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../suse-observability/latest/en/classic.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher for AWS</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rancher-srfa/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rancher-manager/v2.13/en/about-rancher/what-is-rancher.html">v2.13</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.12/en/about-rancher/what-is-rancher.html">v2.12</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.11/en/about-rancher/what-is-rancher.html">v2.11</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../storage/1.10/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../storage/1.11/en/longhorn-documentation.html">1.11 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../storage/1.10/en/longhorn-documentation.html">1.10 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.9/en/longhorn-documentation.html">1.9</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.8/en/longhorn-documentation.html">1.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../suse-virtual-clusters/v1.0.1/en/introduction.html">SUSE® Virtual Clusters</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../suse-virtual-clusters/1.0.2/en/introduction.html">1.0.2-dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../suse-virtual-clusters/v1.0.1/en/introduction.html">v1.0.1-latest</a>
            </li>
            <li class="version">
              <a href="../../../suse-virtual-clusters/v1.0.0/en/introduction.html">v1.0.0</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../virtualization/v1.6/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version">
              <a href="../../../virtualization/v1.7/en/introduction/overview.html">v1.7 (Dev)</a>
            </li>
            <li class="version is-latest">
              <a href="../../../virtualization/v1.6/en/introduction/overview.html">v1.6 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.5/en/introduction/overview.html">v1.5</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
<ul>
    <li>
      <a class="home-link-dsc" href="https://documentation.suse.com/" title="documentation.suse.com" aria-label="SUSE Documentation Home"></a>
    </li>
    <li>
      <a href="https://documentation.suse.com/cloudnative/k3s" title="K3s" aria-label="SUSE Documentation - K3s">
        K3s
      </a>
    </li>
      <li>
          <a href="advanced.html" title="고급 옵션 / 설정" aria-label="고급 옵션 / 설정">고급 옵션 / 설정</a>
      </li>
  </ul>
</nav>  <div class="edit-this-page"><a href="https://github.com/rancher/k3s-product-docs/edit/main/docs/latest/modules/ko/pages/advanced.adoc"><strong>Edit</strong></a></div>
        <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label-bc" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:k3s" checked> Only this project
          </label>
        </div>
      </div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">고급 옵션 / 설정</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>이 섹션에는 K3s를 실행하고 관리할 수 있는 다양한 방법과 K3s 사용을 위해 호스트 OS를 준비하는 데 필요한 단계를 설명하는 고급 정보가 포함되어 있습니다.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_인증서_관리"><a class="anchor" href="#_인증서_관리"></a>인증서 관리</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_인증_기관_인증서"><a class="anchor" href="#_인증_기관_인증서"></a>인증 기관 인증서</h3>
<div class="paragraph">
<p>K3s는 첫 번째 서버 노드를 시작하는 동안 자체 서명된 CA(인증 기관) 인증서를 생성합니다. 이 CA 인증서는 10년 동안 유효하며 자동으로 갱신되지 않습니다.</p>
</div>
<div class="paragraph">
<p>사용자 지정 CA 인증서 사용 또는 자체 서명 CA 인증서 갱신에 대한 자세한 내용은 <a href="cli/certificate.html#_certificate_authority_ca_certificates" class="xref page"><code>k3s 인증서 rotate-ca</code> 명령 설명서</a>를 참조하세요.</p>
</div>
</div>
<div class="sect2">
<h3 id="_클라이언트_및_서버_인증서"><a class="anchor" href="#_클라이언트_및_서버_인증서"></a>클라이언트 및 서버 인증서</h3>
<div class="paragraph">
<p>K3s 클라이언트 및 서버 인증서는 발급한 날로부터 365일 동안 유효합니다. 만료되었거나 만료 후 90일 이내에 만료된 인증서는 K3s를 시작할 때마다 자동으로 갱신됩니다.</p>
</div>
<div class="paragraph">
<p>클라이언트 및 서버 인증서를 수동으로 로테이션하는 것에 대한 정보는 <a href="cli/certificate.html#_client_and_server_certificates" class="xref page"><code>k3s 인증서 로테이션</code> 명령 설명서</a>를 참조하세요.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_토큰_관리"><a class="anchor" href="#_토큰_관리"></a>토큰 관리</h2>
<div class="sectionbody">
<div class="paragraph">
<p>기본적으로 K3s는 서버와 에이전트 모두에 단일 정적 토큰을 사용합니다. With care, this token can be rotated once the cluster has been created.
It is also possible to enable a second static token that can only be used to join agents, or to create temporary <code>kubeadm</code> style join tokens that expire automatically.
자세한 내용은 <a href="cli/token.html#_k3s_token_1" class="xref page"><code>k3s token</code> 명령어 설명서</a>를 참고하세요.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_dns_resolution"><a class="anchor" href="#_configuring_dns_resolution"></a>Configuring DNS Resolution</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_nameserver_viability_checks"><a class="anchor" href="#_nameserver_viability_checks"></a>Nameserver Viability Checks</h3>
<div class="paragraph">
<p>On startup, each node checks the files at <code>/etc/resolv.conf</code> and <code>/run/systemd/resolve/resolv.conf</code> for loopback, multicast, or link-local nameservers.
If any such entries are present, the configuration file is not used, as such entries would not function properly within pods that <a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy">inherit name resolution configuration</a> from their node.
If no usable resolv.conf is found, K3s prints a warning message to the logs, and generate a stub resolv.conf that uses <code>8.8.8.8</code> and <code>2001:4860:4860::8888</code> as the nameservers.</p>
</div>
<div class="paragraph">
<p>If you want to provide K3s with an alternative resolver configuration without modifying the system configuration files, you may use the <code>--resolv-conf</code> option to specify the path to a suitable file.
Manually specified resolver configuration files are not subject to viability checks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_coredns_custom_configuration_imports"><a class="anchor" href="#_coredns_custom_configuration_imports"></a>CoreDNS Custom Configuration Imports</h3>
<div class="paragraph">
<p>In order to customize the CoreDNS configuration, you may create a ConfigMap named <code>coredns-custom</code> in the <code>kube-system</code> namespace.
Keys matching <code>*.override</code> are imported into the <code>:.53</code> Server Block.
Additional Server Blocks may be placed in keys matching <code>*.server</code>.
Additional content (zone files, etc) may also be present, and are mounted under <code>/etc/coredns/custom</code> in the coredns pods.</p>
</div>
<div class="paragraph">
<p>Here is an example ConfigMap that forwards lookups to <code>example.com</code> to a nameserver at <code>10.0.0.1</code>, and serves <code>example.net</code> from an <a href="https://datatracker.ietf.org/doc/html/rfc1035#section-5">RFC 1035</a> compliant text file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: coredns-custom
  namespace: kube-system
data:
  example-com.override: |
    forward example.com 10.0.0.1
  example-net.server: |
    example.net:53 {
      log
      errors
      file /etc/coredns/custom/db.example.net
    }
  db.example.net: |
    $ORIGIN example.net.
    @       3600 IN SOA    sns.dns.icann.org. noc.dns.icann.org. 2017042745 7200 3600 1209600 3600
            3600 IN NS     a.iana-servers.net.
            3600 IN NS     b.iana-servers.net.
    www          IN A      127.0.0.1
                 IN AAAA   ::1</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_프록시_구성하기"><a class="anchor" href="#_http_프록시_구성하기"></a>HTTP 프록시 구성하기</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP 프록시를 통해서만 외부와 연결할 수 있는 환경에서 K3s를 실행하는 경우, K3s 시스템드 서비스에서 프록시 설정을 구성할 수 있습니다. 그러면 이 프록시 설정이 K3s에서 사용되어 내장 컨테이너와 kubelet에 전달됩니다.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Proxy configuration and other environment variables from the host are NOT passed into Pods.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>K3s 설치 스크립트는 자동으로 현재 셸에서 <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code> 및 <code>NO_PROXY</code> 변수와 <code>CONTAINERD_HTTP_PROXY</code>, <code>CONTAINERD_HTTPS_PROXY</code> 및 <code>CONTAINERD_NO_PROXY</code> 변수가 있는 경우 이를 systemd 서비스의 환경 파일에 작성합니다:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/etc/systemd/system/k3s.service.env</code></p>
</li>
<li>
<p><code>/etc/systemd/system/k3s-agent.service.env</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>물론 이 파일을 편집하여 프록시를 구성할 수도 있습니다.</p>
</div>
<div class="paragraph">
<p>K3s는 클러스터 내부 파드 및 서비스 IP 범위와 클러스터 DNS 도메인을 자동으로 <code>NO_PROXY</code> 항목 목록에 추가합니다. 쿠버네티스 노드 자체에서 사용하는 IP 주소 범위(즉, 노드의 퍼블릭 및 프라이빗 IP)가 <code>NO_PROXY</code> 목록에 포함되어 있는지 또는 프록시를 통해 노드에 도달할 수 있는지 확인해야 합니다.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>HTTP_PROXY=http://your-proxy.example.com:8888
HTTPS_PROXY=http://your-proxy.example.com:8888
NO_PROXY=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16</pre>
</div>
</div>
<div class="paragraph">
<p>K3s와 Kubelet에 영향을 주지 않고 컨테이너에 대한 프록시 설정을 구성하려면, 변수 앞에 <code>CONTAINERD_</code>를 붙이면 됩니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CONTAINERD_HTTP_PROXY=http://your-proxy.example.com:8888
CONTAINERD_HTTPS_PROXY=http://your-proxy.example.com:8888
CONTAINERD_NO_PROXY=127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_컨테이너_런타임으로_docker_사용"><a class="anchor" href="#_컨테이너_런타임으로_docker_사용"></a>컨테이너 런타임으로 Docker 사용</h2>
<div class="sectionbody">
<div class="paragraph">
<p>K3s는 업계 표준 컨테이너 런타임인 <a href="https://containerd.io/">containerd</a>를 포함하며 기본값으로 사용합니다.
쿠버네티스 1.24부터, kubelet은 더 이상 kubelet이 dockerd와 통신할 수 있도록 하는 컴포넌트인 dockershim을 포함하지 않습니다.
K3s 1.24 이상에는 <a href="https://github.com/Mirantis/cri-dockerd">cri-dockerd</a>가 포함되어 있어 이전 릴리즈의 K3s에서 원활하게 업그레이드하면서 Docker 컨테이너 런타임을 계속 사용할 수 있습니다.</p>
</div>
<div class="paragraph">
<p>컨테이너 대신 Docker를 사용하려면:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>K3s 노드에 Docker를 설치합니다. 랜처의 <a href="https://github.com/rancher/install-docker">Docker 설치 스크립트</a> 중 하나를 사용하여 Docker를 설치할 수 있습니다:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl https://releases.rancher.com/install-docker/20.10.sh | sh</code></pre>
</div>
</div>
</li>
<li>
<p><code>--docker</code> 옵션을 사용하여 K3s를 설치합니다:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -sfL https://get.k3s.io | sh -s - --docker</code></pre>
</div>
</div>
</li>
<li>
<p>클러스터를 사용할 수 있는지 확인합니다:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ sudo k3s kubectl get pods --all-namespaces
NAMESPACE     NAME                                     READY   STATUS      RESTARTS   AGE
kube-system   local-path-provisioner-6d59f47c7-lncxn   1/1     Running     0          51s
kube-system   metrics-server-7566d596c8-9tnck          1/1     Running     0          51s
kube-system   helm-install-traefik-mbkn9               0/1     Completed   1          51s
kube-system   coredns-8655855d6-rtbnb                  1/1     Running     0          51s
kube-system   svclb-traefik-jbmvl                      2/2     Running     0          43s
kube-system   traefik-758cd5fc85-2wz97                 1/1     Running     0          43s</code></pre>
</div>
</div>
</li>
<li>
<p>Docker 컨테이너가 실행 중인지 확인합니다:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ sudo docker ps
CONTAINER ID        IMAGE                     COMMAND                  CREATED              STATUS              PORTS               NAMES
3e4d34729602        897ce3c5fc8f              "entry"                  About a minute ago   Up About a minute                       k8s_lb-port-443_svclb-traefik-jbmvl_kube-system_d46f10c6-073f-4c7e-8d7a-8e7ac18f9cb0_0
bffdc9d7a65f        rancher/klipper-lb        "entry"                  About a minute ago   Up About a minute                       k8s_lb-port-80_svclb-traefik-jbmvl_kube-system_d46f10c6-073f-4c7e-8d7a-8e7ac18f9cb0_0
436b85c5e38d        rancher/library-traefik   "/traefik --configfi…"   About a minute ago   Up About a minute                       k8s_traefik_traefik-758cd5fc85-2wz97_kube-system_07abe831-ffd6-4206-bfa1-7c9ca4fb39e7_0
de8fded06188        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_svclb-traefik-jbmvl_kube-system_d46f10c6-073f-4c7e-8d7a-8e7ac18f9cb0_0
7c6a30aeeb2f        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_traefik-758cd5fc85-2wz97_kube-system_07abe831-ffd6-4206-bfa1-7c9ca4fb39e7_0
ae6c58cab4a7        9d12f9848b99              "local-path-provisio…"   About a minute ago   Up About a minute                       k8s_local-path-provisioner_local-path-provisioner-6d59f47c7-lncxn_kube-system_2dbd22bf-6ad9-4bea-a73d-620c90a6c1c1_0
be1450e1a11e        9dd718864ce6              "/metrics-server"        About a minute ago   Up About a minute                       k8s_metrics-server_metrics-server-7566d596c8-9tnck_kube-system_031e74b5-e9ef-47ef-a88d-fbf3f726cbc6_0
4454d14e4d3f        c4d3d16fe508              "/coredns -conf /etc…"   About a minute ago   Up About a minute                       k8s_coredns_coredns-8655855d6-rtbnb_kube-system_d05725df-4fb1-410a-8e82-2b1c8278a6a1_0
c3675b87f96c        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_coredns-8655855d6-rtbnb_kube-system_d05725df-4fb1-410a-8e82-2b1c8278a6a1_0
4b1fddbe6ca6        rancher/pause:3.1         "/pause"                 About a minute ago   Up About a minute                       k8s_POD_local-path-provisioner-6d59f47c7-lncxn_kube-system_2dbd22bf-6ad9-4bea-a73d-620c90a6c1c1_0
64d3517d4a95        rancher/pause:3.1         "/pause"</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_etcdctl_사용하기"><a class="anchor" href="#_etcdctl_사용하기"></a>etcdctl 사용하기</h2>
<div class="sectionbody">
<div class="paragraph">
<p>etcdctl은 etcd 서버와 상호 작용하기 위한 CLI를 제공합니다. K3s는 etcdctl을 번들로 제공하지 않습니다.</p>
</div>
<div class="paragraph">
<p>etcdctl을 사용하여 K3s의 내장된 etcd와 상호 작용하려면 <a href="https://etcd.io/docs/latest/install/">공식 문서</a>를 참조하여 etcdctl을 설치하세요.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ETCD_VERSION="v3.5.5"
ETCD_URL="https://github.com/etcd-io/etcd/releases/download/${ETCD_VERSION}/etcd-${ETCD_VERSION}-linux-amd64.tar.gz"
curl -sL ${ETCD_URL} | sudo tar -zxv --strip-components=1 -C /usr/local/bin</code></pre>
</div>
</div>
<div class="paragraph">
<p>그런 다음 인증에 K3s에서 관리하는 인증서 및 키를 사용하도록 etcdctl을 구성하여 사용할 수 있습니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo etcdctl version \
  --cacert=/var/lib/rancher/k3s/server/tls/etcd/server-ca.crt \
  --cert=/var/lib/rancher/k3s/server/tls/etcd/client.crt \
  --key=/var/lib/rancher/k3s/server/tls/etcd/client.key</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_containerd_설정하기"><a class="anchor" href="#_containerd_설정하기"></a>containerd 설정하기</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Version Gate</div>
<div class="paragraph">
<p>K3s includes containerd 2.0 as of the February 2025 releases: v1.31.6+k3s1 and v1.32.2+k3s1.
Be aware that containerd 2.0 prefers config version 3, while containerd 1.7 prefers config version 2.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>K3s will generate a configuration file for containerd at <code>/var/lib/rancher/k3s/agent/etc/containerd/config.toml</code>, using values specific to the current cluster and node configuration.</p>
</div>
<div class="paragraph">
<p>For advanced customization, you can create a containerd config template in the same directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For containerd 2.0, place a version 3 configuration template in <code>config-v3.toml.tmpl</code>.</p>
<div class="paragraph">
<p>See the <a href="https://github.com/containerd/containerd/blob/release/2.0/docs/cri/config.md">containerd 2.0 documentation</a> for more information.</p>
</div>
</li>
<li>
<p>For containerd 1.7 and earlier, place a version 2 configuration template in <code>config.toml.tmpl</code>.</p>
<div class="paragraph">
<p>See the <a href="https://github.com/containerd/containerd/blob/release/1.7/docs/cri/config.md">containerd 1.7 documentation</a> for more information.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Containerd 2.0 is backwards compatible with prior config versions, and k3s will continue to render legacy version 2 configuration from <code>config.toml.tmpl</code> if <code>config-v3.toml.tmpl</code> is not found.</p>
</div>
<div class="paragraph">
<p>The template file is rendered into the containerd config using the <a href="https://pkg.go.dev/text/template"><code>text/template</code></a> library.
See <code>ContainerdConfigTemplateV3</code> and <code>ContainerdConfigTemplate</code> in <a href="https://github.com/k3s-io/k3s/blob/main/pkg/agent/templates/templates.go"><code>templates.go</code></a> for the default template content.
The template is executed with a <a href="https://github.com/k3s-io/k3s/blob/main/pkg/agent/templates/templates.go#L22-L33"><code>ContainerdConfig</code></a> struct as its dot value (data argument).</p>
</div>
<div class="sect2">
<h3 id="_base_template"><a class="anchor" href="#_base_template"></a>Base template</h3>
<div class="paragraph">
<p>You can extend the K3s base template instead of copy-pasting the complete stock template out of the K3s source code. This is useful if you only need to build on the existing configuration by adding a few extra lines before or after the defaults.</p>
</div>
<div class="listingblock">
<div class="title">/var/lib/rancher/k3s/agent/etc/containerd/config-v3.toml.tmpl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-toml hljs" data-lang="toml">{{ template "base" . }}

[plugins.'io.containerd.cri.v1.runtime'.containerd.runtimes.'custom']
  runtime_type = "io.containerd.runc.v2"
[plugins.'io.containerd.cri.v1.runtime'.containerd.runtimes.'custom'.options]
  BinaryName = "/usr/bin/custom-container-runtime"
  SystemdCgroup = true</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For best results, do NOT simply copy a prerendered <code>config.toml</code> into the template and make your desired changes. Use the base template, or provide a full template based on the k3s defaults linked above.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alternative_컨테이너_런타임_지원"><a class="anchor" href="#_alternative_컨테이너_런타임_지원"></a>Alternative 컨테이너 런타임 지원</h2>
<div class="sectionbody">
<div class="paragraph">
<p>K3s will automatically detect alternative container runtimes if they are present when K3s starts. Supported container runtimes are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>crun, lunatic, nvidia, nvidia-cdi, nvidia-experimental, slight, spin, wasmedge, wasmer, wasmtime, wws</pre>
</div>
</div>
<div class="paragraph">
<p>NVIDIA GPUs require installation of the NVIDIA Container Runtime in order to schedule and run accelerated workloads in Pods. To use NVIDIA GPUs with K3s, perform the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>아래의 안내에 따라 노드에 엔비디아 컨테이너 패키지 리포지토리를 설치합니다:
<a href="https://nvidia.github.io/libnvidia-container/" class="bare">https://nvidia.github.io/libnvidia-container/</a></p>
</li>
<li>
<p>엔비디아 컨테이너 런타임 패키지를 설치합니다. 예시:
<code>apt install -y nvidia-container-runtime cuda-drivers-fabricmanager-515 nvidia-headless-515-server</code></p>
</li>
<li>
<p><a href="installation/installation.html" class="xref page">Install K3s</a>, or restart it if already installed.</p>
</li>
<li>
<p>Confirm that the nvidia container runtime has been found by k3s:
<code>grep nvidia /var/lib/rancher/k3s/agent/etc/containerd/config.toml</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>K3s includes Kubernetes RuntimeClass definitions for all supported alternative runtimes. You can select one of these to replace <code>runc</code> as the default runtime on a node by setting the <code>--default-runtime</code> value via the k3s CLI or config file.</p>
</div>
<div class="paragraph">
<p>If you have not changed the default runtime on your GPU nodes, you must explicitly request the NVIDIA runtime by setting <code>runtimeClassName: nvidia</code> in the Pod spec:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: nbody-gpu-benchmark
  namespace: default
spec:
  restartPolicy: OnFailure
  runtimeClassName: nvidia
  containers:
    - name: cuda-container
      image: nvcr.io/nvidia/k8s/cuda-sample:nbody
      args: ["nbody", "-gpu", "-benchmark"]
      resources:
        limits:
          nvidia.com/gpu: 1
      env:
        - name: NVIDIA_VISIBLE_DEVICES
          value: all
        - name: NVIDIA_DRIVER_CAPABILITIES
          value: all</code></pre>
</div>
</div>
<div class="paragraph">
<p>엔비디아 컨테이너 런타임은 <a href="https://github.com/NVIDIA/k8s-device-plugin/">엔비디아 디바이스 플러그인</a> 및 <a href="https://github.com/NVIDIA/gpu-feature-discovery/">GPU 기능 검색</a>과 함께 자주 사용되며, 위에서 언급한 것처럼 파드 사양에 <code>runtimeClassName: nvidia</code>가 포함되도록 수정하여 별도로 설치해야 한다는 점에 유의하세요.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_agentless_servers_experimental"><a class="anchor" href="#_running_agentless_servers_experimental"></a>에이전트 없는 서버 실행하기(실험적)</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>경고:</strong> 이 기능은 실험 단계입니다.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><code>disable-agent</code> 플래그로 시작하면, 서버는 kubelet, 컨테이너 런타임 또는 CNI를 실행하지 않습니다. 클러스터에 노드 리소스를 등록하지 않으며, <code>kubectl get nodes</code> 출력에 나타나지 않습니다.
에이전트리스 서버는 kubelet을 호스트하지 않기 때문에, 파드를 실행하거나 내장된 etcd 컨트롤러 및 시스템 업그레이드 컨트롤러를 포함하여 클러스터 노드를 열거하는 데 의존하는 운영자가 관리할 수 없습니다.</p>
</div>
<div class="paragraph">
<p>에이전트리스 서버를 실행하는 것은 클러스터 운영자 지원 부족으로 인한 관리 오버헤드 증가를 감수하고서라도 에이전트와 워크로드에 의한 검색으로부터 컨트롤 플레인 노드를 숨기고자 하는 경우에 유리할 수 있습니다.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_루트리스_서버_실행실험적"><a class="anchor" href="#_루트리스_서버_실행실험적"></a>루트리스 서버 실행(실험적)</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>경고:</strong> 이 기능은 실험 단계입니다.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>루트리스 모드는 잠재적인 컨테이너 브레이크아웃 공격으로부터 호스트의 실제 루트를 보호하기 위해 권한이 없는 사용자로 K3s 서버를 실행할 수 있습니다.</p>
</div>
<div class="paragraph">
<p>루트리스 쿠버네티스에 대한 자세한 내용은 <a href="https://rootlesscontaine.rs/" class="bare">https://rootlesscontaine.rs/</a> 을 참조하세요.</p>
</div>
<div class="sect2">
<h3 id="_known_issues_with_rootless_mode"><a class="anchor" href="#_known_issues_with_rootless_mode"></a>루트리스 모드의 알려진 이슈</h3>
<div class="ulist">
<ul>
<li>
<p><strong>포트</strong></p>
<div class="paragraph">
<p>루트리스 실행 시 새로운 네트워크 네임스페이스가 생성됩니다. 이는 K3s 인스턴스가 호스트와 네트워킹이 상당히 분리된 상태로 실행된다는 것을 의미합니다.
호스트에서 K3s에서 실행되는 서비스에 액세스하는 유일한 방법은 K3s 네트워크 네임스페이스에 포트 포워드를 설정하는 것입니다.
루트리스 K3s에는 6443 및 1024 미만의 서비스 포트를 10000 오프셋으로 호스트에 자동으로 바인딩하는 컨트롤러가 포함되어 있습니다.</p>
</div>
<div class="paragraph">
<p>예를 들어, 포트 80의 서비스는 호스트에서 10080이 되지만 8080은 오프셋 없이 8080이 됩니다. 현재 로드밸런서 서비스만 자동으로 바인딩됩니다.</p>
</div>
</li>
<li>
<p><strong>Cgroup</strong></p>
<div class="paragraph">
<p>Cgroup v1 및 하이브리드 v1/v2는 지원되지 않으며, 순수 Cgroup v2만 지원됩니다. 루트리스 실행 시 누락된 Cgroup으로 인해 K3s가 시작되지 않는 경우, 노드가 하이브리드 모드에 있고 "누락된" Cgroup이 여전히 v1 컨트롤러에 바인딩되어 있을 가능성이 높습니다.</p>
</div>
</li>
<li>
<p><strong>멀티노드/멀티프로세스 클러스터</strong></p>
<div class="paragraph">
<p>다중 노드 루트리스 클러스터 또는 동일한 노드에 있는 여러 개의 루트리스 k3s 프로세스는 현재 지원되지 않습니다. 자세한 내용은 <a href="https://github.com/k3s-io/k3s/issues/6488#issuecomment-1314998091">#6488</a>을 참조하세요.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_루트리스_서버_시작하기"><a class="anchor" href="#_루트리스_서버_시작하기"></a>루트리스 서버 시작하기</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://rootlesscontaine.rs/getting-started/common/cgroup2/" class="bare">https://rootlesscontaine.rs/getting-started/common/cgroup2/</a> 을 참조하여 cgroup v2 위임을 활성화합니다.
이 단계는 필수이며, 적절한 cgroups가 위임되지 않으면 루트리스 kubelet을 시작하지 못합니다.</p>
</li>
<li>
<p><code>https://github.com/k3s-io/k3s/blob/&lt;VERSION&gt;/k3s-rootless.service</code>](<a href="https://github.com/k3s-io/k3s/blob/main/k3s-rootless.service)에서" class="bare">https://github.com/k3s-io/k3s/blob/main/k3s-rootless.service)에서</a> <code>k3s-rootless.service</code>를 다운로드한다.
<code>k3s-rootless.service</code>와 <code>k3s</code>의 버전이 같은 것을 사용해야 합니다.</p>
</li>
<li>
<p><code>k3s-rootless.service</code>를 <code>~/.config/systemd/user/k3s-rootless.service</code>에 설치합니다.
이 파일을 시스템 전체 서비스(<code>/etc/systemd/...</code>)로 설치하는 것은 지원되지 않습니다.
<code>k3s</code> 바이너리의 경로에 따라 파일의 <code>ExecStart=/usr/local/bin/k3s ...</code> 행을 수정해야 할 수 있습니다.</p>
</li>
<li>
<p><code>systemctl --user daemon-reload</code>를 실행합니다.</p>
</li>
<li>
<p><code>systemctl --user enable --now k3s-rootless</code>를 실행한다.</p>
</li>
<li>
<p><code>KUBECONFIG=~/.kube/k3s.yaml kubectl get pods -A</code>를 실행하고, 파드가 실행 중인지 확인한다.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>참고: 터미널 세션은 cgroups v2 위임을 허용하지 않으므로 터미널에서 <code>k3s server --rootless</code>를 실행하지 않는다.
터미널에서 꼭 실행해야 하는 경우, <code>systemd-run --user -p Delegate=yes --tty k3s server --roolless</code>를 사용하여 systemd 범위로 래핑합니다.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_고급_루트리스_구성"><a class="anchor" href="#_고급_루트리스_구성"></a>고급 루트리스 구성</h3>
<div class="paragraph">
<p>루트리스 K3s는 호스트와 사용자 네트워크 네임스페이스 간 통신을 위해 <a href="https://github.com/rootless-containers/rootlesskit">rootlesskit</a> 및 <a href="https://github.com/rootless-containers/slirp4netns">slirp4netns</a>를 사용합니다.
루트리스킷과 slirp4net에서 사용하는 구성 중 일부는 환경 변수로 설정할 수 있습니다. 이를 설정하는 가장 좋은 방법은 k3s-rootless systemd 유닛의 <code>Environment</code> 필드에 추가하는 것입니다.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K3S_ROOTLESS_MTU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">slirp4netns 가상 인터페이스의 MTU를 설정합니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K3S_ROOTLESS_CIDR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.41.0.0/16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">slirp4netns 가상 인터페이스에서 사용하는 CIDR을 설정합니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K3S_ROOTLESS_ENABLE_IPV6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">autotedected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables slirp4netns IPv6 지원. 지정하지 않으면 K3가 듀얼 스택 작동을 위해 구성되면 자동으로 활성화됩니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K3S_ROOTLESS_PORT_DRIVER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">builtin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">루트리스 포트 드라이버를 선택합니다. <code>builtin</code> 또는 <code>slirp4netns</code> 중 하나를 선택합니다. 빌트인이 더 빠르지만 인바운드 패킷의 원래 소스 주소를 가장합니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>K3S_ROOTLESS_DISABLE_HOST_LOOPBACK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">게이트웨이 인터페이스를 통한 호스트의 루프백 주소에 대한 액세스를 사용할지 여부를 제어합니다. 보안상의 이유로 변경하지 않는 것이 좋습니다.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_루트리스_문제_해결하기"><a class="anchor" href="#_루트리스_문제_해결하기"></a>루트리스 문제 해결하기</h3>
<div class="ulist">
<ul>
<li>
<p><code>systemctl --user status k3s-rootless</code>를 실행하여 데몬 상태를 확인합니다.</p>
</li>
<li>
<p><code>journalctl --user -f -u k3s-rootless</code>를 실행하여 데몬 로그를 확인합니다.</p>
</li>
<li>
<p><a href="https://rootlesscontaine.rs/" class="bare">https://rootlesscontaine.rs/</a> 참조</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_노드_레이블_및_테인트"><a class="anchor" href="#_노드_레이블_및_테인트"></a>노드 레이블 및 테인트</h2>
<div class="sectionbody">
<div class="paragraph">
<p>K3s 에이전트는 <code>--node-label</code> 및 <code>--node-taint</code> 옵션으로 구성할 수 있으며, 이 옵션은 kubelet에 레이블과 테인트를 추가합니다. 이 두 옵션은 [등록 시점에] 레이블 및/또는 테인트만 추가하므로(./cli/agent.md#node-labels-and-taints-for-agents), 노드가 클러스터에 처음 조인될 때만 설정할 수 있습니다.</p>
</div>
<div class="paragraph">
<p>현재 모든 버전의 쿠버네티스는 노드가 <code>kubernetes.io</code> 및 <code>k8s.io</code> 접두사가 포함된 대부분의 레이블, 특히 <code>kubernetes.io/role</code> 레이블에 등록하는 것을 제한합니다. 허용되지 않는 레이블을 가진 노드를 시작하려고 하면 K3s가 시작되지 않습니다. 쿠버네티스 작성자가 언급했듯이:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>노드는 자체 역할 레이블을 어설트하는 것이 허용되지 않습니다. 노드 역할은 일반적으로 권한 또는 컨트롤 플레인 유형의 노드를 식별하는 데 사용되며, 노드가 해당 풀에 레이블을 지정하도록 허용하면 손상된 노드가 더 높은 권한 자격 증명에 대한 액세스 권한을 부여하는 워크로드(예: 컨트롤 플레인 데몬셋)를 사소하게 끌어들일 수 있습니다.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>자세한 내용은 <a href="https://github.com/kubernetes/enhancements/blob/master/keps/sig-auth/279-limit-node-access/README.md#proposal">SIG-Auth KEP 279</a>를 참조하세요.</p>
</div>
<div class="paragraph">
<p>노드 등록 후 노드 레이블과 틴트를 변경하거나 예약 레이블을 추가하려면 <code>kubectl</code>을 사용해야 합니다. <a href="https://kubernetes.io/ko/docs/concepts/scheduling-eviction/taint-and-toleration/">taint</a> 및 <a href="https://kubernetes.io/ko/docs/tasks/configure-pod-container/assign-pods-nodes/#add-a-label-to-a-node">노드 레이블</a>을 추가하는 방법에 대한 자세한 내용은 쿠버네티스 공식 문서를 참고하세요.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_설치_스크립트로_서비스_시작하기"><a class="anchor" href="#_설치_스크립트로_서비스_시작하기"></a>설치 스크립트로 서비스 시작하기</h2>
<div class="sectionbody">
<div class="paragraph">
<p>설치 스크립트는 설치 프로세스의 일부로 OS가 systemd 또는 openrc를 사용하는지 자동으로 감지하고 서비스를 활성화 및 시작합니다.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>openrc로 실행하면 <code>/var/log/k3s.log</code>에 로그가 생성됩니다.</p>
</li>
<li>
<p>systemd로 실행하는 경우, <code>/var/log/syslog</code>에 로그가 생성되며 <code>journalctl -u k3s</code>(또는 에이전트에서는 <code>journalctl -u k3s-agent</code>)를 사용하여 로그를 확인할 수 있습니다.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>설치 스크립트로 자동 시작 및 서비스 활성화를 비활성화하는 예제입니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -sfL https://get.k3s.io | INSTALL_K3S_SKIP_START=true INSTALL_K3S_SKIP_ENABLE=true sh -</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_추가_os_준비_사항"><a class="anchor" href="#_추가_os_준비_사항"></a>추가 OS 준비 사항</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_이전_iptables_버전"><a class="anchor" href="#_이전_iptables_버전"></a>이전 iptables 버전</h3>
<div class="paragraph">
<p>몇몇 유명 Linux 배포판에는 중복 규칙이 누적되어 노드의 성능과 안정성에 부정적인 영향을 주는 버그가 포함된 버전의 iptables가 포함되어 있습니다. 이 문제의 영향을 받는지 확인하는 방법에 대한 자세한 내용은 <a href="https://github.com/k3s-io/k3s/issues/3117">Issue #3117</a>을 참조하세요.</p>
</div>
<div class="paragraph">
<p>K3s에는 정상적으로 작동하는 iptables(v1.8.8) 버전이 포함되어 있습니다. <code>--prefer-bundled-bin</code> 옵션으로 K3s를 시작하거나 운영 체제에서 iptables/nftables 패키지를 제거하여 K3s가 번들 버전의 iptables를 사용하도록 설정할 수 있습니다.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Version Gate</div>
<div class="paragraph">
<p><code>prefer-bundled-bin</code> 플래그는 2022-12 릴리스(v1.26.0+k3s1, v1.25.5+k3s1, v1.24.9+k3s1, v1.23.15+k3s1) 부터 사용할 수 있습니다.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_red_hat_enterprise_linux_centos"><a class="anchor" href="#_red_hat_enterprise_linux_centos"></a>Red Hat Enterprise Linux / CentOS</h3>
<div class="paragraph">
<p>firewalld를 끄는 것이 좋습니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">systemctl disable firewalld --now</code></pre>
</div>
</div>
<div class="paragraph">
<p>방화벽을 사용하도록 설정하려면 기본적으로 다음 규칙이 필요합니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">firewall-cmd --permanent --add-port=6443/tcp #apiserver
firewall-cmd --permanent --zone=trusted --add-source=10.42.0.0/16 #pods
firewall-cmd --permanent --zone=trusted --add-source=10.43.0.0/16 #services
firewall-cmd --reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>설정에 따라 추가 포트를 열어야 할 수도 있습니다. 자세한 내용은 <a href="installation/requirements.html#_inbound_rules_for_k3s_nodes" class="xref page">인바운드 규칙</a>을 참조하세요. 파드 또는 서비스에 대한 기본 CIDR을 변경하는 경우, 그에 따라 방화벽 규칙을 업데이트해야 합니다.</p>
</div>
<div class="paragraph">
<p>활성화된 경우, nm-cloud-setup을 비활성화하고 노드를 재부팅해야 합니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">systemctl disable nm-cloud-setup.service nm-cloud-setup.timer
reboot</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ubuntu"><a class="anchor" href="#_ubuntu"></a>Ubuntu</h3>
<div class="paragraph">
<p>ufw(uncomplicated firewall)를 끄는 것이 좋습니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ufw disable</code></pre>
</div>
</div>
<div class="paragraph">
<p>ufw를 사용하도록 설정하려면 기본적으로 다음 규칙이 필요합니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ufw allow 6443/tcp #apiserver
ufw allow from 10.42.0.0/16 to any #pods
ufw allow from 10.43.0.0/16 to any #services</code></pre>
</div>
</div>
<div class="paragraph">
<p>설정에 따라 추가 포트를 열어야 할 수도 있습니다. 자세한 내용은 <a href="installation/requirements.html#_inbound_rules_for_k3s_nodes" class="xref page">인바운드 규칙</a>을 참조한다. 파드 또는 서비스에 대한 기본 CIDR을 변경하는 경우, 그에 따라 방화벽 규칙을 업데이트해야 합니다.</p>
</div>
</div>
<div class="sect2">
<h3 id="_raspberry_pi"><a class="anchor" href="#_raspberry_pi"></a>Raspberry Pi</h3>
<div class="paragraph">
<p>라즈베리파이 OS는 데비안 기반이며, 오래된 iptables 버전으로 인해 문제가 발생할 수 있습니다. <a href="#_이전_iptables_버전">해결 방법</a>을 참조하세요.</p>
</div>
<div class="paragraph">
<p>표준 라즈베리파이 OS 설치는 <code>cgroups</code>가 활성화된 상태에서 시작되지 않습니다. <strong>K3S</strong>는 systemd 서비스를 시작하기 위해 <code>cgroups</code>가 필요합니다. <code>cgroups</code>는 <code>/boot/cmdline.txt</code>에 <code>cgroup_memory=1 cgroup_enable=memory</code>를 추가하여 활성화할 수 있습니다.</p>
</div>
<div class="paragraph">
<p>cmdline.txt 예시:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>console=serial0,115200 console=tty1 root=PARTUUID=58b06195-02 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait cgroup_memory=1 cgroup_enable=memory</pre>
</div>
</div>
<div class="paragraph">
<p>우분투 21.10부터 라즈베리파이의 vxlan 지원은 별도의 커널 모듈로 옮겨졌습니다.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo apt install linux-modules-extra-raspi</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_k3s_in_docker"><a class="anchor" href="#_running_k3s_in_docker"></a>Docker에서 k3s 실행하기</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Docker에서 K3s를 실행하는 방법에는 여러 가지가 있습니다:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_k3d" class="tab">
<p>K3d</p>
</li>
<li id="_tabs_1_docker" class="tab">
<p>Docker</p>
</li>
</ul>
</div>
<div id="_tabs_1_k3d--panel" class="tabpanel" aria-labelledby="_tabs_1_k3d">
<div class="paragraph">
<p><a href="https://github.com/k3d-io/k3d">k3d</a>는 도커에서 멀티노드 K3s 클러스터를 쉽게 실행할 수 있도록 설계된 유틸리티입니다.</p>
</div>
<div class="paragraph">
<p>k3d를 사용하면 쿠버네티스의 로컬 개발 등을 위해 도커에서 단일 노드 및 다중 노드 k3s 클러스터를 매우 쉽게 생성할 수 있습&gt;니다.</p>
</div>
<div class="paragraph">
<p>k3d 설치 및 사용 방법에 대한 자세한 내용은 <a href="https://k3d.io/#installation">설치</a> 설명서를 참조하세요.</p>
</div>
</div>
<div id="_tabs_1_docker--panel" class="tabpanel" aria-labelledby="_tabs_1_docker">
<div class="paragraph">
<p>Docker를 사용하려면 <code>rancher/k3s</code> 이미지를 사용하여 K3s 서버와 에이전트를 실행할 수도 있습니다.
<code>docker run</code> 명령어를 사용합니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo docker run \
  --privileged \
  --name k3s-server-1 \
  --hostname k3s-server-1 \
  -p 6443:6443 \
  -d rancher/k3s:v1.24.10-k3s1 \
  server</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>태그에 유효한 K3s 버전을 지정해야 하며, <code>latest</code> 태그는 유지되지 않습니다. 도커 이미지는 태그에 <code>+</code> 기호를 허용하지 않으므로 태그에 <code>-</code>를 대신 사용하세요.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>K3s가 실행되고 나면, 관리자 kubeconfig를 Docker 컨테이너에서 복사하여 사용할 수 있습니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo docker cp k3s-server-1:/etc/rancher/k3s/k3s.yaml ~/.kube/config</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_selinux_support"><a class="anchor" href="#_selinux_support"></a>SELinux 지원</h2>
<div class="sectionbody">
<div class="paragraph">
<p>기본적으로 SELinux가 활성화된 시스템(예로 CentOS)에 K3s를 설치하는 경우 적절한 SELinux 정책이 설치되어 있는지 확인해야 합니다.</p>
</div>
<div id="_tabs_2" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_자동_설치" class="tab">
<p>자동 설치</p>
</li>
<li id="_tabs_2_수동_설치" class="tab">
<p>수동 설치</p>
</li>
</ul>
</div>
<div id="_tabs_2_자동_설치--panel" class="tabpanel" aria-labelledby="_tabs_2_자동_설치">
<div class="paragraph">
<p>에어 갭(폐쇄망) 설치를 수행하지 않는 경우 호환되는 시스템에서 <a href="installation/configuration.html#_configuration_with_install_script" class="xref page">설치 스크립트</a>는 랜처 RPM 저장소에서 SELinux RPM을 자동으로 설치합니다. 자동 설치는 `INSTALL_K3S_SKIP_SELINUX_RPM=true`로 설정하여 건너뛸 수 있습니다.</p>
</div>
</div>
<div id="_tabs_2_수동_설치--panel" class="tabpanel" aria-labelledby="_tabs_2_수동_설치">
<div class="paragraph">
<p>필요한 policy는 다음 명령을 사용하여 설치할 수 있습니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yum install -y container-selinux selinux-policy-base
yum install -y https://rpm.rancher.io/k3s/latest/common/centos/7/noarch/k3s-selinux-0.2-1.el7_8.noarch.rpm</code></pre>
</div>
</div>
<div class="paragraph">
<p>설치 스크립트가 실패하지 않고 경고를 기록하도록 하려면 다음 환경 변수를 설정하면 됩니다: <code>INSTALL_K3S_SELINUX_WARN=true</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selinux_적용_활성화하기"><a class="anchor" href="#_selinux_적용_활성화하기"></a>SELinux 적용 활성화하기</h3>
<div class="paragraph">
<p>SELinux를 활용하려면 K3s 서버 및 에이전트를 시작할 때 <code>--selinux</code> 플래그를 지정하세요.</p>
</div>
<div class="paragraph">
<p>이 옵션은 K3s <a href="installation/configuration.html#_configuration_file" class="xref page">구성 파일</a>에서도 지정할 수 있습니다.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>selinux: true</pre>
</div>
</div>
<div class="paragraph">
<p>SELinux에서 사용자 지정 <code>--data-dir</code>을 사용하는 것은 지원되지 않습니다. 사용자 지정하려면 사용자 지정 정책을 직접 작성해야 할 가능성이 높습니다. 컨테이너 런타임에 대한 SELinux 정책 파일이 포함된 <a href="https://github.com/containers/container-selinux">containers/container-selinux</a> 리포지토리와 K3s를 위한 SELinux 정책이 포함된 <a href="https://github.com/k3s-io/k3s-selinux">k3s-io/k3s-selinux</a> 리포지토리를 참고할 수 있습니다.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_지연_풀링의_지연_풀링_활성화_실험적"><a class="anchor" href="#_지연_풀링의_지연_풀링_활성화_실험적"></a>지연 풀링의 지연 풀링 활성화 (실험적)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_지연_풀링과_estargz란_무엇인가요"><a class="anchor" href="#_지연_풀링과_estargz란_무엇인가요"></a>지연 풀링과 eStargz란 무엇인가요?</h3>
<div class="paragraph">
<p>이미지 풀링은 컨테이너 라이프사이클에서 시간이 많이 소요되는 단계 중 하나로 알려져 있습니다.
Harter, et al.(<a href="https://www.usenix.org/conference/fast16/technical-sessions/presentation/harter" class="bare">https://www.usenix.org/conference/fast16/technical-sessions/presentation/harter</a>),</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>패키지 풀링은 컨테이너 시작 시간의 76%를 차지하지만, 그 중 읽기 데이터는 6.4%에 불과합니다.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>이 문제를 해결하기 위해 k3s는 이미지 콘텐츠의 <em>lazy pulling</em>을 실험적으로 지원합니다.
이를 통해 k3s는 전체 이미지가 풀링되기 전에 컨테이너를 시작할 수 있습니다.
대신 필요한 콘텐츠 청크(예: 개별 파일)를 온디맨드 방식으로 가져옵니다.
특히 대용량 이미지의 경우 이 기술을 사용하면 컨테이너 시작 지연 시간을 단축할 수 있습니다.</p>
</div>
<div class="paragraph">
<p>지연 풀링을 사용하려면 대상 이미지의 포맷을 <a href="https://github.com/containerd/stargz-snapshotter/blob/main/docs/stargz-estargz.md"><em>eStargz</em></a>로 지정해야 합니다.
이 형식은 OCI 대체 형식이지만 지연 풀링을 위한 100% 호환되는 이미지 형식입니다.
호환성 때문에 eStargz는 표준 컨테이너 레지스트리(예: ghcr.io)로 푸시할 수 있을 뿐만 아니라 eStargz와 무관한 런타임에서도 <em>실행 가능</em> 합니다.</p>
</div>
<div class="paragraph">
<p>eStargz는 <a href="https://github.com/google/crfs">Google CRFS 프로젝트에서 제안한 stargz 형식</a>을 기반으로 개발되었지만 콘텐츠 검증 및 성능 최적화를 포함한 실용적인 기능을 제공합니다.
지연 풀링과 eStargz에 대한 자세한 내용은 <a href="https://github.com/containerd/stargz-snapshotter">Stargz Snapshotter 프로젝트 리포지토리</a>를 참고하시기 바랍니다.</p>
</div>
</div>
<div class="sect2">
<h3 id="_지연_풀링이_가능하도록_k3s_구성하기"><a class="anchor" href="#_지연_풀링이_가능하도록_k3s_구성하기"></a>지연 풀링이 가능하도록 k3s 구성하기</h3>
<div class="paragraph">
<p>아래와 같이 k3s 서버와 에이전트에는 <code>--snapshotter=stargz</code> 옵션이 필요합니다.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">k3s server --snapshotter=stargz</code></pre>
</div>
</div>
<div class="paragraph">
<p>이 구성을 사용하면, eStargz 형식의 이미지에 대해 지연 풀링을 수행할 수 있습니다.
다음 예제 파드 매니페스트는 eStargz 형식의 <code>node:13.13.0</code> 이미지(<code>ghcr.io/stargz-containers/node:13.13.0-esgz</code>)를 사용합니다.
스타즈 스냅샷터가 활성화되면 K3s는 이 이미지에 대해 지연 풀링을 수행합니다.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Pod
metadata:
  name: nodejs
spec:
  containers:
    - name: nodejs-estargz
      image: ghcr.io/stargz-containers/node:13.13.0-esgz
      command: ["node"]
      args:
        - -e
        - var http = require('http');
          http.createServer(function(req, res) {
          res.writeHead(200);
          res.end('Hello World!\n');
          }).listen(80);
      ports:
        - containerPort: 80</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_logging_sources"><a class="anchor" href="#_additional_logging_sources"></a>추가 로깅 소스</h2>
<div class="sectionbody">
<div class="paragraph">
<p>K3s용 <a href="https://documentation.suse.com/cloudnative/rancher-manager/latest/en/observability/logging/logging-helm-chart-options.html">랜처 로깅</a>은 랜처를 사용하지 않고 설치할 수 있습니다. 이를 위해서는 다음 지침을 실행해야 합니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">helm repo add rancher-charts https://charts.rancher.io
helm repo update
helm install --create-namespace -n cattle-logging-system rancher-logging-crd rancher-charts/rancher-logging-crd
helm install --create-namespace -n cattle-logging-system rancher-logging --set additionalLoggingSources.k3s.enabled=true rancher-charts/rancher-logging</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_추가_네트워크_정책_로깅"><a class="anchor" href="#_추가_네트워크_정책_로깅"></a>추가 네트워크 정책 로깅</h2>
<div class="sectionbody">
<div class="paragraph">
<p>네트워크 정책에 의해 차단된 패킷을 로깅할 수 있습니다. 패킷은 차단 네트워크 정책을 포함한 패킷 세부 정보를 표시하는 iptables NFLOG 작업으로 전송됩니다.</p>
</div>
<div class="paragraph">
<p>트래픽이 많으면 로그 메시지 수가 매우 많아질 수 있습니다. 정책별로 로그 속도를 제어하려면, 해당 네트워크 정책에 다음 어노테이션을 추가하여 <code>limit</code> 및 <code>limit-burst</code> iptables 매개변수를 설정합니다:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>kube-router.io/netpol-nflog-limit=&lt;LIMIT-VALUE&gt;</code></p>
</li>
<li>
<p><code>kube-router.io/netpol-nflog-limit-burst=&lt;LIMIT-BURST-VALUE&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>기본값은 <code>limit=10/minute</code>와 <code>limit-burst=10</code>입니다. 이러한 필드의 형식과 사용 가능한 값에 대한 자세한 내용은 <a href="https://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO-7.html#:~:text=restrict%20the%20rate%20of%20matches">iptables manual</a>을 참조하세요.</p>
</div>
<div class="paragraph">
<p>NFLOG 패킷을 로그 항목으로 변환하려면 ulogd2를 설치하고 <code>[log1]</code>을 <code>group=100</code>에서 읽도록 구성합니다. 그런 다음 ulogd2 서비스를 다시 시작하여 새 구성이 커밋되도록 합니다.
네트워크 정책 규칙에 의해 패킷이 차단되면 <code>/var/log/ulog/syslogemu.log</code>에 로그 메시지가 나타납니다.</p>
</div>
<div class="paragraph">
<p>NFLOG 넷링크 소켓으로 전송된 패킷은 tcpdump 또는 tshark와 같은 명령줄 도구를 사용하여 읽을 수도 있습니다:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">tcpdump -ni nflog:100</code></pre>
</div>
</div>
<div class="paragraph">
<p>더 쉽게 사용할 수 있지만, tcpdump는 패킷을 차단한 네트워크 정책의 이름을 표시하지 않습니다. 대신 와이어샤크의 tshark 명령을 사용하여 정책 이름이 포함된 <code>nflog.prefix</code> 필드를 포함한 전체 NFLOG 패킷 헤더를 표시하세요.</p>
</div>
<div class="paragraph">
<p>Network Policy logging of dropped packets does not support <a href="https://github.com/k3s-io/k3s/issues/8008">policies with an empty <code>podSelector</code></a>. If you rely on logging dropped packets for diagnostic or audit purposes, ensure that your policies include a pod selector that matches the affected pods.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="networking/networking-services.html">네트워킹</a></span>
  <span class="next"><a href="reference/env-variables.html">Environment Variables</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
<script src="../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>


<script src="../../../_/js/CNLanguageSwitcher.js"></script>
  </body>
</html>
